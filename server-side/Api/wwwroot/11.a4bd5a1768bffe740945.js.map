{"version":3,"sources":["./src/app/shared/enums/userRole.enum.ts","./src/app/shared/guards/auth-doctor.guard.ts","./src/app/shared/components/doctor-sidebar/doctor-sidebar.component.html","./src/app/shared/components/doctor-sidebar/doctor-sidebar.component.ts","./src/app/shared/components/appointment-details/appointment-details.component.ts","./src/app/shared/components/appointment-details/appointment-details.component.html","./src/app/shared/components/medical-record/medical-record.component.ts","./src/app/shared/components/medical-record/medical-record.component.html","./src/app/shared/components/time-slot-form-input/time-slot-form-input.component.html","./src/app/shared/components/time-slot-form-input/time-slot-form-input.component.ts","./src/app/shared/components/time-slot/time-slot.component.ts","./src/app/shared/components/time-slot/time-slot.component.html","./src/app/shared/services/modal-services.service.ts","./src/app/shared/components/pages-action-for-user-dashboard/pages-action-for-user-dashboard.component.ts","./src/app/shared/components/pages-action-for-user-dashboard/pages-action-for-user-dashboard.component.html","./src/app/views/main/doctor/appointments/appointments.component.html","./src/app/views/main/doctor/appointments/appointments.component.ts","./src/app/shared/services/doctor.service.ts","./src/app/views/main/doctor/change-password/change-password.component.ts","./src/app/views/main/doctor/change-password/change-password.component.html","./src/app/shared/components/dashboard-canvas/dashboard-canvas.component.ts","./src/app/shared/components/dashboard-canvas/dashboard-canvas.component.html","./src/app/shared/components/doctor-dashboard-patients-appointment/doctor-dashboard-patients-appointment.component.html","./src/app/shared/components/doctor-dashboard-patients-appointment/doctor-dashboard-patients-appointment.component.ts","./src/app/views/main/doctor/dashboard/dashboard.component.html","./src/app/views/main/doctor/dashboard/dashboard.component.ts","./src/app/views/main/doctor/doctor-blog/doctor-blog.component.ts","./src/app/views/main/doctor/doctor-blog/doctor-blog.component.html","./src/app/views/main/doctor/doctor.component.html","./src/app/views/main/doctor/doctor.component.ts","./src/app/shared/components/invoice-table/invoice-table.component.ts","./src/app/shared/components/invoice-table/invoice-table.component.html","./src/app/views/main/doctor/invoices/invoices.component.ts","./src/app/views/main/doctor/invoices/invoices.component.html","./node_modules/@microsoft/signalr/dist/esm/Errors.js","./node_modules/@microsoft/signalr/dist/esm/HttpClient.js","./node_modules/@microsoft/signalr/dist/esm/ILogger.js","./node_modules/@microsoft/signalr/dist/esm/Loggers.js","./node_modules/@microsoft/signalr/dist/esm/Utils.js","./node_modules/@microsoft/signalr/dist/esm/FetchHttpClient.js","./node_modules/@microsoft/signalr/dist/esm/XhrHttpClient.js","./node_modules/@microsoft/signalr/dist/esm/DefaultHttpClient.js","./node_modules/@microsoft/signalr/dist/esm/TextMessageFormat.js","./node_modules/@microsoft/signalr/dist/esm/HandshakeProtocol.js","./node_modules/@microsoft/signalr/dist/esm/IHubProtocol.js","./node_modules/@microsoft/signalr/dist/esm/Subject.js","./node_modules/@microsoft/signalr/dist/esm/HubConnection.js","./node_modules/@microsoft/signalr/dist/esm/DefaultReconnectPolicy.js","./node_modules/@microsoft/signalr/dist/esm/ITransport.js","./node_modules/@microsoft/signalr/dist/esm/AbortController.js","./node_modules/@microsoft/signalr/dist/esm/LongPollingTransport.js","./node_modules/@microsoft/signalr/dist/esm/ServerSentEventsTransport.js","./node_modules/@microsoft/signalr/dist/esm/WebSocketTransport.js","./node_modules/@microsoft/signalr/dist/esm/HttpConnection.js","./node_modules/@microsoft/signalr/dist/esm/JsonHubProtocol.js","./node_modules/@microsoft/signalr/dist/esm/HubConnectionBuilder.js","./src/app/shared/services/chat.service.ts","./src/app/shared/components/chat-lef-side-bar/chat-lef-side-bar.component.html","./src/app/shared/components/chat-lef-side-bar/chat-lef-side-bar.component.ts","./src/app/shared/components/chat-message/chat-message.component.html","./src/app/shared/components/chat-message/chat-message.component.ts","./src/app/views/main/doctor/messages/messages.component.html","./src/app/views/main/doctor/messages/messages.component.ts","./src/app/views/main/doctor/my-patients/my-patients.component.html","./src/app/views/main/doctor/my-patients/my-patients.component.ts","./src/app/shared/components/patient-profile-appointment/patient-profile-appointment.component.ts","./src/app/shared/components/patient-profile-appointment/patient-profile-appointment.component.html","./src/app/shared/components/patient-profile-prescription/patient-profile-prescription.component.ts","./src/app/shared/components/patient-profile-prescription/patient-profile-prescription.component.html","./src/app/shared/components/patient-profile-medical-record/patient-profile-medical-record.component.ts","./src/app/shared/components/patient-profile-medical-record/patient-profile-medical-record.component.html","./src/app/shared/components/patient-profile-billing/patient-profile-billing.component.ts","./src/app/shared/components/patient-profile-billing/patient-profile-billing.component.html","./src/app/shared/components/patient-user-tabs/patient-user-tabs.component.ts","./src/app/shared/components/patient-user-tabs/patient-user-tabs.component.html","./src/app/views/main/doctor/patient-profile/patient-profile.component.html","./src/app/views/main/doctor/patient-profile/patient-profile.component.ts","./src/app/views/main/doctor/profile-settings/profile-settings.component.ts","./src/app/views/main/doctor/profile-settings/profile-settings.component.html","./src/app/views/main/doctor/reviews/reviews.component.ts","./src/app/views/main/doctor/reviews/reviews.component.html","./src/app/views/main/doctor/doctor-routing.module.ts","./src/app/views/main/doctor/schedule-timings/schedule-timings.component.ts","./src/app/views/main/doctor/schedule-timings/schedule-timings.component.html","./src/app/views/main/doctor/social-media/social-media.component.ts","./src/app/views/main/doctor/social-media/social-media.component.html","./src/app/views/main/doctor/doctor.module.ts"],"names":["UserRole","AuthDoctorGuard","router","auth","toastr","next","state","this","currentUser$","subscribe","user","role","doctor","navigate","error","queryParams","returnUrl","url","DoctorSidebarComponent","userService","confirm","currentUser","response","result","logout","AppointmentDetailsComponent","bsModalRef","hide","close","MedicalRecordComponent","TimeSlotFormInputComponent","main","event","preventDefault","parent","target","parentElement","r","row","nativeElement","children","length","item","removeChild","TimeSlotComponent","fb","componentFactoryResolver","appRef","injector","fg","intitializeForm","group","starts","array","Date","required","ends","get","componentRef","resolveComponentFactory","create","instance","attachView","hostView","appendChild","rootNodes","console","log","value","submitAddOrEdit","addRowCount","ModalServicesService","modalService","config","animated","class","bsModelRef","show","PagesActionForUserDashboardComponent","modals","appointmentDetails","AppointmentsComponent","patients","DoctorService","http","authService","baseUrl","environment","api","memberCache","Map","slug","patient","values","reduce","arr","elem","concat","find","x","of","model","put","pipe","map","setCurrentUser","message","ChangePasswordComponent","title","doctorService","setTitle","newPassword","confirmPassword","currentPassword","updateDoctorPassword","forEach","success","updatePassword","DashboardCanvasComponent","percent","formatSubtitle","subtitle","DoctorDashboardPatientsAppointmentComponent","DashboardComponent","currentTarget","href","getAttribute","replace","navLink","activeLinks","toArray","apps","className","classList","add","setApp","DoctorBlogComponent","DoctorComponent","apiResponse","patientsAppointment","component","InvoiceTableComponent","InvoicesComponent","extendStatics","__extends","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","HttpError","_super","errorMessage","statusCode","_this","trueProto","call","Error","TimeoutError","AbortError","__assign","assign","t","s","i","n","arguments","HttpResponse","statusText","content","HttpClient","options","send","method","post","delete","getCookieString","LogLevel","NullLogger","_logLevel","_message","Arg","isRequired","val","name","isNotEmpty","match","isIn","Platform","defineProperty","window","enumerable","configurable","self","isBrowser","isWebWorker","getDataDetail","data","includeContent","detail","isArrayBuffer","byteLength","view","Uint8Array","str","num","toString","substr","formatArrayBuffer","ArrayBuffer","sendMessage","logger","transportName","httpClient","accessTokenFactory","logMessageContent","withCredentials","defaultHeaders","thisArg","generator","_a","headers","token","_b","responseType","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","done","pop","push","e","step","__generator","_c","getUserAgentHeader","Trace","P","Promise","resolve","reject","fulfilled","rejected","then","apply","SubjectSubscription","subject","observer","dispose","index","observers","indexOf","splice","cancelCallback","catch","ConsoleLogger","minimumLogLevel","outputConsole","logLevel","Critical","toISOString","Warning","warn","Information","info","version","os","runtime","runtimeVersion","userAgent","majorAndMinor","userAgentHeaderName","isNode","getOsName","getRuntimeVersion","split","process","platform","versions","node","FetchHttpClient","fetch","requireFunc","jar","CookieJar","fetchType","abortControllerType","bind","AbortController","request","abortController","timeoutId","e_1","payload","abortSignal","aborted","onabort","abort","timeout","setTimeout","cache","credentials","mode","redirect","signal","clearTimeout","ok","status","arrayBuffer","text","deserializeContent","cookies","getCookies","c","join","XhrHttpClient","xhr","XMLHttpRequest","open","undefined","setRequestHeader","keys","header","onload","responseText","onerror","ontimeout","DefaultHttpClient","TextMessageFormat","write","output","RecordSeparator","parse","input","messages","RecordSeparatorCode","String","fromCharCode","HandshakeProtocol","writeHandshakeRequest","handshakeRequest","JSON","stringify","parseHandshakeResponse","messageData","remainingData","Buffer","binaryData","separatorIndex","responseLength","slice","buffer","textData","substring","type","MessageType","Subject","_i","err","complete","_arguments","HubConnectionState","HubConnection","connection","protocol","reconnectPolicy","serverTimeoutInMilliseconds","keepAliveIntervalInMilliseconds","handshakeProtocol","onreceive","processIncomingData","onclose","connectionClosed","callbacks","methods","closedCallbacks","reconnectingCallbacks","reconnectedCallbacks","invocationId","receivedHandshakeResponse","connectionState","Disconnected","connectionStarted","cachedPingMessage","writeMessage","Ping","connectionId","set","Reconnecting","start","startPromise","startWithStateTransitions","Connecting","Debug","startInternal","Connected","handshakePromise","e_2","stopDuringStartError","handshakeResolver","handshakeRejecter","transferFormat","cleanupTimeout","resetTimeoutPeriod","resetKeepAliveInterval","cleanupPingTimer","stop","stopPromise","stopInternal","Disconnecting","reconnectDelayHandle","completeClose","stream","methodName","args","promiseQueue","replaceStreamingParams","streams","streamIds","invocationDescriptor","createStreamInvocation","cancelInvocation","createCancelInvocation","sendWithProtocol","invocationEvent","Completion","launchStreams","sendPromise","createInvocation","invoke","on","newMethod","toLowerCase","off","handlers","removeIdx","callback","onreconnecting","onreconnected","processHandshakeResponse","messages_1","parseMessages","Invocation","invokeClientMethod","StreamItem","Close","allowReconnect","responseMessage","features","inherentKeepAlive","pingServerHandle","timeoutHandle","serverTimeout","invocationMessage","m","cancelCallbacksWithError","reconnect","reconnectStartTime","previousReconnectAttempts","retryError","nextRetryDelay","e_4","now","getNextRetryDelay","previousRetryCount","elapsedMilliseconds","retryReason","nextRetryDelayInMilliseconds","key","nonblocking","_loop_1","streamId","createCompletionMessage","createStreamItemMessage","argument","isObservable","arg","StreamInvocation","id","CancelInvocation","DEFAULT_RETRY_DELAYS_IN_MILLISECONDS","DefaultReconnectPolicy","retryDelays","retryContext","HttpTransportType","TransferFormat","isAborted","LongPollingTransport","pollAbort","running","connect","pollOptions","pollUrl","Binary","getAccessToken","updateHeaderToken","closeError","receiving","poll","pollAborted","raiseOnClose","deleteOptions","logMessage","ServerSentEventsTransport","eventSourceConstructor","encodeURIComponent","opened","Text","eventSource","Cookie","onmessage","onopen","WebSocketTransport","webSocketConstructor","webSocket","binaryType","_event","ErrorEvent","readyState","OPEN","isCloseEvent","wasClean","code","reason","HttpConnection","negotiateVersion","resolveUrl","webSocketModule","eventSourceModule","WebSocket","EventSource","startInternalPromise","sendQueue","TransportSendQueue","transport","stopPromiseResolver","stopError","stopConnection","negotiateResponse","redirects","this_1","e_3","skipNegotiation","WebSockets","constructTransport","startTransport","accessToken_1","getNegotiationResponse","ProtocolVersion","accessToken","createTransport","negotiateUrl","resolveNegotiateUrl","connectionToken","createConnectUrl","requestedTransport","requestedTransferFormat","connectUrl","transportExceptions","negotiate","transports_1","endpoint","transportOrError","ex_1","ex_2","isITransport","availableTransports","resolveTransportOrError","ServerSentEvents","LongPolling","actualTransport","transportMatches","transferFormats","ex","lastIndexOf","document","aTag","createElement","executing","sendBufferedData","PromiseSource","transportResult","sendLoopPromise","sendLoop","bufferData","promise","error_1","concatBuffers","arrayBuffers","totalLength","a","offset","arrayBuffers_1","resolver","rejecter","JsonHubProtocol","hubMessages","parsedMessage","isInvocationMessage","isStreamItemMessage","isCompletionMessage","assertNotEmptyString","LogLevelNameMapping","trace","debug","information","warning","critical","none","None","HubConnectionBuilder","configureLogging","logging","mapping","parseLogLevel","withUrl","transportTypeOrOptions","httpConnectionOptions","withHubProtocol","withAutomaticReconnect","retryDelaysOrReconnectPolicy","isArray","build","ChatService","spinnerService","hubUrl","messageThreadSource","BehaviorSubject","messageThread$","asObservable","busy","hubConnection","finally","idle","chat","ChatLefSideBarComponent","showChatRight","chats","chatMessageDTOs","chatId","isSeen","sender","patientContent","element","mediaChat","remove","parseInt","emit","ChatMessageComponent","MessagesComponent","chatService","loading","localStorage","getItem","loadHubConnection","loadMessages","createHubConnection","getMessages","timer","toPromise","showChat","MyPatientsComponent","PatientProfileAppointmentComponent","PatientProfilePrescriptionComponent","PatientProfileMedicalRecordComponent","medicalRecord","openAddEditMedicalRecor","openAppointmentDetails","PatientProfileBillingComponent","PatientUserTabsComponent","patientProfiles","switchNavTabs","PatientProfileComponent","route","routeReuseStrategy","shouldReuseRoute","snapshot","paramMap","patientBySlug","ProfileSettingsComponent","ReviewsComponent","routes","path","runGuardsAndResolvers","canActivate","ScheduleTimingsComponent","navLinks","tabs","timeSlot","switchTab","openTimeSlotCreateUpdate","removeExistingTimeSlot","SocialMediaComponent","getUrls","getDoctorSocialMediaUrl","controls","facebookURL","setValue","twitterURL","instagramURL","pinterestURL","linkedinURL","updateDoctorSocialMediaUrl","updateUrls","DoctorRoutingModule","forChild","DoctorModule"],"mappings":"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EAAKI,iBAAiB9iB,KAAKC,GAAKA,EAAE8iB,SAAWL,EAAK5J,KAAmB,IAAb7Y,EAAE+iB,QAIpG,YAAYN,GACjB,MAAMO,EAASP,EAAKI,gBAAgBJ,EAAKI,gBAAgBvmB,OAAS,GAElE,OADgB0mB,EAAOC,eAAiBD,EAAS,KAI5C,KAAKnK,GACV,MAAMqK,EAAwB9oB,KAAK+oB,UAAUphB,UAC7CmhB,EAAQliB,QAAShB,GAAMA,EAAE5D,cAAc8F,UAAUkhB,OAAO,WACxDF,EAAQliB,QAAShB,IACGqjB,SAASrjB,EAAE5D,cAAcuF,aAAa,SACtCkX,IAChBze,KAAKuoB,cAAcW,KAAKzK,GACxB7Y,EAAE5D,cAAc8F,UAAUC,IAAI,c,6CA3BzBugB,I,uBAAAA,EAAuB,8D,GAAA,K,y0BDfpC,gBACE,eAAM,gBAAK,OACX,cACE,cAA0B,wBAAa,OACzC,OACF,OACA,iBACE,gBACE,gBACE,cACF,OACA,mBACF,OACF,OACA,iBACE,iBACE,kCAsBF,OACF,Q,MAvBmB,2C,uECDb,G,+FCfN,QACE,gBACE,cACE,cAA0B,uBAAY,OACxC,OACA,gBACE,gBACE,gBAEE,gBACF,OACF,OACA,gBACE,iBAAuB,SAAiB,OACxC,kBAAyB,SAA4C,OACvE,OACF,OACA,kBACE,gBACE,eAA0B,qBAAS,OACrC,OACF,OACF,OACA,kBACE,kBACE,iBACE,iBACE,iBACE,kBACE,eACE,aAAG,yCAA6B,OAChC,iBACE,cACE,kBACE,gBAAM,mBAAO,OACf,OACF,OACF,OACF,OACF,OACF,OACF,OACA,iBACE,kBACE,kBACF,OACA,iBACE,kBACE,eACE,aAAG,oCAAwB,OAC3B,aAAG,sDAA0C,OAC7C,iBACE,cACE,kBACE,gBAAM,mBAAO,OACf,OACF,OACF,OACF,OACF,OACA,kBACE,eACE,aAAG,qCAAyB,OAC5B,iBACE,cACE,kBACE,gBAAM,mBAAO,OACf,OACF,OACF,OACF,OACF,OACA,kBACE,eACE,kBACE,kBACE,kBACA,kBAAiC,2BAAe,OAChD,gBACE,gBACF,OACF,OACA,kBACE,kBACA,kBAAiC,2BAAe,OAChD,gBACE,gBACF,OACF,OACF,OACA,iBACE,cACE,kBACE,gBAAM,mBAAO,OACf,OACF,OACF,OACF,OACF,OACF,OACF,OACA,iBAAsB,iBAAK,OAC3B,iBACE,kBACE,kBACF,OACA,iBACE,kBACE,eACE,kBACE,gBACA,gBACA,gBACF,OACF,OACF,OACF,OACF,OACF,OACF,OACF,OACA,kBACE,kBACE,kBACE,kBACE,gBACA,oBACF,OACF,OACA,oBACA,kBACE,qBAA+C,gBAAqC,OACtF,OACF,OACF,OACF,Q,oBA/HU,yFACK,sCAAmB,4BAIH,8BACE,sDCR1B,IAAD,S,MAAOa,EAGX,cAFS,KAAA7kB,MAAO,EAIhB,a,6CALW6kB,I,uBAAAA,EAAoB,qvCDNjC,iC,KAAe,6B,0CCMT,G,gDCGM,8B,oBAA+B,6BAAsB,gB,wCCA1D,IAAD,S,MAAOC,EAOX,YAAoBC,GAAA,KAAAA,cAJb,KAAAb,MAAgB,GAChB,KAAAD,eAAgB,EAChB,KAAAe,SAAU,EAIjB,WACEtpB,KAAKG,KAAO6V,KAAKT,MAAMgU,aAAaC,QAAQ,UAC5CxpB,KAAKypB,oBACLzpB,KAAK0pB,eAGC,oBACY,OAAd1pB,KAAKG,OACPH,KAAKspB,SAAU,EACftpB,KAAKqpB,YAAYM,oBAAoB3pB,KAAKG,OAItC,eACY,OAAdH,KAAKG,MACPH,KAAKqpB,YACFO,YAAY5pB,KAAKG,KAAKse,IACtBve,UAAWa,IACVf,KAAKwoB,MAAQznB,IAKd,SAAS0d,GACd,MAAM4J,EAAa3f,OAAOpD,OAAOtF,KAAKwoB,OAAO7iB,KAC1CC,GAAMA,EAAEP,QAAQoZ,KAAOA,GAE1Bze,KAAKG,KAAOkoB,EAAKhjB,QAAUgjB,EAAKhjB,QAAU,KAC1CrF,KAAKuoB,eAAgB,EACH,OAAdvoB,KAAKG,MACP,OAAA0pB,GAAA,GAAM,KACHC,YACAha,KAAK,KACJ9P,KAAKuoB,eAAgB,K,6CA1ClBa,GAAiB,W,uBAAjBA,EAAiB,qD,GAAA,K,oVDT9B,gBACE,gBACE,gBACE,gBACE,gBACE,gBACE,kCAAuC,wCAAiB,EAAAW,SAAA,KAAkB,OAC5E,OACA,kBACE,oCACF,OACF,OACF,OACF,OAEF,OACF,Q,MAVmC,8BAEe,mDACnB,8B,gDCAzB,G,yFCAI,gBACE,gBACE,iBACE,iBACE,iBACE,eACE,iBACF,OACA,iBACE,aAAI,eAA8D,SAAiB,OAAI,OAEvF,kBACE,cAAI,aAAG,wBAAY,OAAK,SAAc,OACtC,iBAAiB,gBAAsC,SAAoB,OAC7E,OACF,OACF,OACF,OACA,kBACE,cACE,cAAI,kBAAM,gBAAM,SAAc,OAAO,OACrC,cAAI,gBAAI,gBAAM,SAAwB,OAAO,OAC7C,cAAI,wBAAY,gBAAM,SAAmB,OAAO,OAClD,OACF,OACF,OACF,OACF,Q,yBAtBa,8CACI,iCAAmB,uBAGjB,8CAA2D,yBAGxC,6BAC+B,mCAO3C,sBACF,sCACQ,4BCzBnC,IAAD,S,MAAOC,EAGX,cAFS,KAAArlB,SAAmB,GAI5B,a,6CALWqlB,I,uBAAAA,EAAmB,mqBDPhC,gCAEA,gBACE,gBACE,gBACE,gBACE,6BACF,OACA,gBACE,gBACE,yBA4BF,OACF,OACF,OACF,OACF,Q,MA1CqB,4BAU8C,qC,gDCH7D,GCDA,S,MAAOC,EAEX,eAEA,a,6CAJWA,I,uBAAAA,EAAkC,0+BCN/C,gBACE,gBACE,gBACE,kBACE,gBACE,aACE,aAAI,iBAAM,OACV,aAAI,oBAAS,OACb,cAAI,wBAAY,OAChB,cAAI,kBAAM,OACV,cAAI,qBAAS,OACb,cAAI,kBAAM,OACV,cACF,OACF,OACA,iBACE,cACE,cACE,gBACE,eACE,iBACF,OACA,eAA8B,6BAAiB,gBAAM,kBAAM,OAAO,OACpE,OACF,OACA,cAAI,wBAAY,kBAAgC,oBAAQ,OAAO,OAC/D,cAAI,uBAAW,OACf,cAAI,gBAAI,OACR,cAAI,uBAAW,OACf,cAAI,kBAAgD,mBAAO,OAAO,OAClE,iBACE,kBACE,gBACE,gBAA4B,kBAC9B,OACF,OACF,OACF,OACA,cACE,cACE,gBACE,eACE,iBACF,OACA,eAA8B,6BAAiB,gBAAM,kBAAM,OAAO,OACpE,OACF,OACA,cAAI,wBAAY,kBAAgC,oBAAQ,OAAO,OAC/D,cAAI,uBAAW,OACf,cAAI,gBAAI,OACR,cAAI,uBAAW,OACf,cAAI,mBAA+C,qBAAS,OAAO,OACnE,iBACE,kBACE,gBACE,gBAA4B,kBAC9B,OACF,OACF,OACF,OACA,cACE,cACE,gBACE,eACE,iBACF,OACA,eAA8B,6BAAiB,gBAAM,kBAAM,OAAO,OACpE,OACF,OACA,cAAI,wBAAY,kBAAgC,mBAAO,OAAO,OAC9D,cAAI,uBAAW,OACf,cAAI,gBAAI,OACR,cAAI,uBAAW,OACf,cAAI,mBAAgD,mBAAO,OAAO,OAClE,iBACE,kBACE,gBACE,gBAA4B,mBAC9B,OACA,iBACE,iBAAiC,qBACnC,OACF,OACF,OACF,OACA,eACE,eACE,iBACE,gBACE,kBACF,OACA,gBAA8B,8BAAiB,iBAAM,mBAAM,OAAO,OACpE,OACF,OACA,eAAI,wBAAW,mBAAgC,oBAAO,OAAO,OAC7D,eAAI,uBAAU,OACd,eAAI,iBAAI,OACR,eAAI,uBAAU,OACd,eAAI,oBAA6C,sBAAS,OAAO,OACjE,kBACE,mBACE,iBACE,iBAA6B,yBAC/B,OACF,OACF,OACF,OACF,OACF,OACF,OACF,OACF,S,qBDzGM,GEAA,S,MAAOC,EAEX,eAEA,a,6CAJWA,I,uBAAAA,EAAmC,y8BCNhD,gBACE,cAAoD,2BAAgB,OACtE,OACA,gBACE,gBACE,gBACE,kBACE,gBACE,aACE,aAAI,iBAAK,OACT,cAAI,gBAAI,OACR,cAAI,uBAAW,OACf,cACF,OACF,OACA,iBACE,cACE,cAAI,uBAAW,OACf,cAAI,0BAAc,OAClB,cACE,gBACE,eACE,iBACF,OACA,eAA8B,4BAAgB,gBAAM,kBAAM,OAAO,OACnE,OACF,OACA,gBACE,kBACE,gBACE,gBAA6B,mBAC/B,OACA,gBACE,gBAA2B,kBAC7B,OACF,OACF,OACF,OACA,cACE,cAAI,uBAAW,OACf,cAAI,0BAAc,OAClB,cACE,gBACE,eACE,kBACF,OACA,eAA8B,6BAAiB,gBAAM,kBAAM,OAAO,OACpE,OACF,OACA,gBACE,kBACE,gBACE,gBAA6B,mBAC/B,OACA,gBACE,gBAA2B,kBAC7B,OACA,gBACE,gBAA4B,kBAC9B,OACA,gBACE,gBAAiC,oBACnC,OACF,OACF,OACF,OACF,OACF,OACF,OACF,OACF,S,qBDhEM,GECA,S,MAAOC,EACX,YAAoBlmB,GAAA,KAAAA,eAEpB,YAEO,0BACLjE,KAAKiE,aAAammB,gBAGb,yBACLpqB,KAAKiE,aAAaQ,sB,6CAVT0lB,GAAoC,U,uBAApCA,EAAoC,g/BCPjD,gBACE,cAAG,+BAAS,EAAAE,4BAA0E,8BAAmB,OAC3G,OACA,gBACE,gBACE,gBACE,kBACE,gBACE,aACE,aAAI,cAAE,OACN,cAAI,iBAAK,OACT,cAAI,uBAAW,OACf,cAAI,sBAAU,OACd,cAAI,mBAAO,OACX,cACF,OACF,OACA,iBACE,cACE,cAAI,eAA8B,oBAAQ,OAAI,OAC9C,cAAI,uBAAW,OACf,cAAI,0BAAc,OAClB,cAAI,eAAY,2BAAe,OAAI,OACnC,cACE,gBACE,eACE,kBACF,OACA,eAA8B,4BAAgB,gBAAM,kBAAM,OAAO,OACnE,OACF,OACA,gBACE,kBACE,gBACE,gBAA6B,mBAC/B,OACA,gBAAG,+BAAS,EAAAC,2BACV,gBAA2B,kBAC7B,OACF,OACF,OACF,OACA,cACE,cAAI,eAA8B,oBAAQ,OAAI,OAC9C,cAAI,uBAAW,OACf,cAAI,0BAAc,OAClB,cAAI,eAAY,2BAAe,OAAI,OACnC,cACE,gBACE,eACE,kBACF,OACA,eAA8B,6BAAiB,gBAAM,kBAAM,OAAO,OACpE,OACF,OACA,gBACE,kBACE,gBACE,gBAA6B,mBAC/B,OACA,gBAAG,+BAAS,EAAAA,2BACV,gBAA2B,kBAC7B,OACA,gBAAG,+BAAS,EAAAD,4BACV,gBAA4B,kBAC9B,OACA,gBACE,gBAAiC,oBACnC,OACF,OACF,OACF,OACF,OACF,OACF,OACF,OACF,S,qBDrEM,GEDA,S,MAAOE,EAEX,eAEA,a,6CAJWA,I,uBAAAA,EAA8B,gICN3C,gBACE,4BACF,S,qCDIM,G,+CEAC,IAAD,S,MAAOC,EAIX,eAEA,YAGO,cAAc/oB,G,MACnBA,EAAMC,iBAEN,MAAME,EAASH,EAAM4F,cACfC,EAAkC,QAA9B,EAAG1F,EAAO2F,aAAa,eAAO,eAAEC,QAAQ,IAAK,IACjDC,EAAwBzH,KAAK0H,YAAYC,UACT3H,KAAKyqB,gBAAgB9iB,UAE3Cf,QAAShB,IACvBA,EAAE5D,cAAc6F,UAAY,gBACxBjC,EAAE5D,cAAcuF,aAAa,QAAUD,IACzC1B,EAAE5D,cAAc6F,UAAY,+BAIhCJ,EAAQb,QAAShB,GAAOA,EAAE5D,cAAc6F,UAAY,YAEpDjG,EAAOkG,UAAUC,IAAI,W,6CA1BZyiB,I,uBAAAA,EAAwB,8D,GAAA,M,ysBCNrC,gBACE,gBACE,gBACE,eACE,eACE,gBAAG,gCAAS,EAAAE,cAAA,KAAgF,uBAAY,OAC1G,OACA,eACE,gBAAG,gCAAS,EAAAA,cAAA,KAAiE,gBAAM,wBAAY,OAAO,OACxG,OACA,gBACE,iBAAG,gCAAS,EAAAA,cAAA,KAAoE,kBACxD,2BAAe,OAAO,OAChD,OACA,gBACE,kBAAG,gCAAS,EAAAA,cAAA,KAAoE,gBAAM,mBAAO,OAAO,OACtG,OACF,OACF,OACA,kBAEE,qBACE,2CACF,OAGA,qBACE,4CACF,OAGA,qBACE,8CACF,OAGA,qBACE,uCACF,OAEF,OACF,OACF,S,8CDpCM,G,0BEIE,iBACE,iBACE,iBACE,iBACE,eACE,iBACF,OACA,iBACE,aAAI,QAAoB,OAExB,iBACE,cAAI,aAAG,wBAAY,OAAK,SAAkB,OAC1C,iBAAiB,gBAAsC,SAAuB,OAChF,OACF,OACF,OACF,OACA,kBACE,cACE,cAAI,kBAAM,gBAAM,SAAiB,OAAO,OACxC,cAAI,gBAAI,gBAAM,SAA2B,OAAO,OAChD,cAAI,wBAAY,gBAAM,SAAsB,OAAO,OACrD,OACF,OACF,OACF,Q,oBApBe,yCAAsB,+BAGvB,iCAGsB,sCAC+B,2CAO3C,8BACF,8CACQ,oCCtB/B,IAAD,S,MAAOC,EAGX,YACUC,EACAtkB,EACA3G,GAFA,KAAAirB,QACA,KAAAtkB,gBACA,KAAA3G,SAERK,KAAKL,OAAOkrB,mBAAmBC,iBAAmB,KAAM,EAG1D,WACE9qB,KAAKmI,cAGC,cACN,MAAM/C,EAAYpF,KAAK4qB,MAAMG,SAASC,SAAS9nB,IAAI,QACnDlD,KAAKsG,cAAc2kB,cAAc7lB,GAAMwB,QAAS7F,GAAcf,KAAKqF,QAAUtE,I,6CAjBpE4pB,GAAuB,8B,uBAAvBA,EAAuB,u7BDTpC,gCAGA,gBACE,gBAEE,gBACE,gBAGE,wBA6BA,gBACE,gBACE,eAAuB,uBAAY,OACrC,OACA,gBACE,iBACE,kBACE,kBACE,kBACF,OACA,kBACE,iBAAyB,6BAAiB,OAC1C,mBAAyC,mBAAO,OAChD,mBAAyC,+BAAmB,OAC9D,OACF,OACF,OACF,OACF,OAGF,OAEA,kBACE,iCACF,OACF,OAEF,OAEF,Q,MArEqB,gCAUwC,iC,6CCDvD,GCHA,S,MAAOO,EAEX,eAEA,a,6CAJWA,I,uBAAAA,EAAwB,62FCNrC,gCAGE,gBACE,gBAEE,gBACE,gBACA,6BACA,OAEA,gBAGE,gBACE,gBACE,eAAuB,6BAAiB,OACxC,iBACE,kBACE,kBACE,kBACE,kBACE,kBACF,OACA,kBACE,kBACE,gBAAM,gBAA6B,yBAAY,OAC/C,oBACF,OACA,oBAAoC,oDAAwC,OAC9E,OACF,OACF,OACF,OACA,kBACE,kBACE,iBAAO,qBAAS,mBAA0B,aAAC,OAAO,OAClD,oBACF,OACF,OACA,kBACE,kBACE,iBAAO,kBAAM,mBAA0B,aAAC,OAAO,OAC/C,oBACF,OACF,OACA,kBACE,kBACE,iBAAO,uBAAW,mBAA0B,aAAC,OAAO,OACpD,oBACF,OACF,OACA,kBACE,kBACE,iBAAO,sBAAU,mBAA0B,aAAC,OAAO,OACnD,oBACF,OACF,OACA,kBACE,kBACE,iBAAO,wBAAY,OACnB,oBACF,OACF,OACA,kBACE,kBACE,iBAAO,kBAAM,OACb,qBACE,kBAAQ,kBAAM,OACd,kBAAQ,gBAAI,OACZ,kBAAQ,kBAAM,OAChB,OACF,OACF,OACA,kBACE,kBACE,iBAAO,yBAAa,OACpB,oBACF,OACF,OACF,OACF,OACF,OAIA,iBACE,iBACE,gBAAuB,oBAAQ,OAC/B,kBACE,iBAAO,qBAAS,OAChB,uBACF,OACF,OACF,OAIA,iBACE,iBACE,gBAAuB,uBAAW,OAClC,iBACE,kBACE,kBACE,iBAAO,uBAAW,OAClB,oBACF,OACF,OACA,kBACE,kBACE,iBAAO,0BAAc,OACrB,oBACF,OACF,OACA,kBACE,kBACE,iBAAO,0BAAa,OACpB,oBACF,OACA,mBACE,mBACE,mBACA,iBAAqE,iBAAgC,OACvG,OACA,mBACE,mBACA,iBAAqE,iBAAgC,OACvG,OACF,OACF,OACF,OACF,OACF,OAIA,mBACE,kBACE,iBAAuB,4BAAe,OACtC,kBACE,mBACE,mBACE,kBAAO,2BAAc,OACrB,qBACF,OACF,OACA,mBACE,mBACE,qBAA6B,2BAAc,OAC3C,qBACF,OACF,OACA,mBACE,mBACE,qBAA6B,iBAAI,OACjC,qBACF,OACF,OAEA,mBACE,mBACE,qBAA6B,6BAAgB,OAC7C,qBACF,OACF,OACA,mBACE,mBACE,qBAA6B,oBAAO,OACpC,qBACF,OACF,OACA,mBACE,mBACE,qBAA6B,wBAAW,OACxC,qBACF,OACF,OACF,OACF,OACF,OAIA,kBACE,kBACE,iBAAuB,oBAAO,OAE9B,mBACE,mBACE,mBACE,qBACA,qBAAqD,iBAAI,OAC3D,OACA,mBACE,qBACA,qBAAuD,oCAAuB,OAChF,OACF,OAEF,OAEA,mBACE,mBACE,qBACA,qBAAoC,qCAAwB,OAC9D,OACF,OAEF,OACF,OAIA,mBACE,kBACE,iBAAuB,wCAA2B,OAClD,mBACE,kBAAO,qBAAQ,OACf,qBACA,qBAAoC,0DAA6C,OACnF,OACA,mBACE,kBAAO,4BAAe,OACtB,qBACA,qBAAoC,gEAAoD,OAC1F,OACF,OACF,OAIA,kBACE,kBACE,iBAAuB,sBAAS,OAChC,mBACE,mBACE,mBACE,kBACE,mBACE,mBACE,kBAAO,mBAAM,OACb,qBACF,OACF,OACA,mBACE,mBACE,kBAAO,8BAAiB,OACxB,qBACF,OACF,OACA,mBACE,mBACE,kBAAO,+BAAkB,OACzB,qBACF,OACF,OACF,OACF,OACF,OACF,OACA,mBACE,iBAAoD,iBAAkC,sBAAQ,OAChG,OACF,OACF,OAIA,kBACE,kBACE,iBAAuB,uBAAU,OACjC,mBACE,mBACE,mBACE,kBACE,mBACE,mBACE,kBAAO,0BAAa,OACpB,qBACF,OACF,OACA,mBACE,mBACE,kBAAO,iBAAI,OACX,qBACF,OACF,OACA,mBACE,mBACE,kBAAO,eAAE,OACT,qBACF,OACF,OACA,mBACE,mBACE,kBAAO,wBAAW,OAClB,qBACF,OACF,OACF,OACF,OACF,OACF,OACA,mBACE,iBAAqD,iBAAkC,sBAAQ,OACjG,OACF,OACF,OAIA,kBACE,kBACE,iBAAuB,mBAAM,OAC7B,mBACE,mBACE,mBACE,mBACE,kBAAO,mBAAM,OACb,qBACF,OACF,OACA,mBACE,mBACE,kBAAO,iBAAI,OACX,qBACF,OACF,OACF,OACF,OACA,mBACE,iBAAgD,iBAAkC,sBAAQ,OAC5F,OACF,OACF,OAIA,kBACE,kBACE,iBAAuB,wBAAW,OAClC,mBACE,mBACE,mBACE,mBACE,kBAAO,wBAAW,OAClB,qBACF,OACF,OACF,OACF,OACA,mBACE,iBAAqD,iBAAkC,sBAAQ,OACjG,OACF,OACF,OAIA,kBACE,kBACE,iBAAuB,0BAAa,OACpC,mBACE,mBACE,mBACE,mBACE,kBAAO,0BAAa,OACpB,qBACF,OACF,OACA,mBACE,mBACE,kBAAO,iBAAI,OACX,qBACF,OACF,OACF,OACF,OACA,mBACE,iBAA8C,iBAAkC,sBAAQ,OAC1F,OACF,OACF,OAGA,mBACE,sBAAyD,yBAAY,OACvE,OAEF,OACF,OAEF,OAEF,Q,KA1YmB,kC,4DDMf,GEAA,S,MAAOC,EAEX,eAEA,a,6CAJWA,I,uBAAAA,EAAgB,49BCN7B,gCAGA,gBACE,gBAEE,gBACE,gBACA,6BACA,OAEA,gBACE,gBAGE,eAGE,aACE,iBACE,iBACA,kBACE,kBACE,mBAA6B,0BAAc,OAC3C,mBAA2B,+BAAmB,OAC9C,kBACE,gBACA,gBACA,gBACA,gBACA,gBACF,OACF,OACA,gBAAuB,gBAAiC,mCAAsB,OAC9E,gBAC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","file":"11.a4bd5a1768bffe740945.js","sourcesContent":["export enum UserRole {\n  other = 'Other',\n  admin = 'Admin',\n  doctor = 'Doctor',\n  patient = 'Patient'\n}\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  CanActivate,\r\n  ActivatedRouteSnapshot,\r\n  RouterStateSnapshot,\r\n  Router,\r\n  UrlTree,\r\n} from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { UserRole } from '../enums/userRole.enum';\r\nimport { User } from '../models/user';\r\nimport { AuthService } from '../services/auth.service';\r\nimport { ToastrService } from '../services/toastr.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthDoctorGuard implements CanActivate {\r\n  private user!: User;\r\n  constructor(\r\n    private router: Router,\r\n    private auth: AuthService,\r\n    private toastr: ToastrService\r\n  ) {}\r\n\r\n  canActivate(\r\n    next: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ):\r\n    | Observable<boolean | UrlTree>\r\n    | Promise<boolean | UrlTree>\r\n    | boolean\r\n    | UrlTree {\r\n    this.auth.currentUser$.subscribe((user) => (this.user = user));\r\n\r\n    if (this.user && this.user.role === UserRole.doctor) {\r\n      return true;\r\n    } else if (this.user && this.user.role !== UserRole.doctor) {\r\n      this.router.navigate(['/']);\r\n      this.toastr.error('You shall not pass!', 'Authorized');\r\n      return false;\r\n    } else {\r\n      this.router.navigate(['auth/login'], {\r\n        queryParams: { returnUrl: state.url },\r\n      });\r\n      return false;\r\n    }\r\n  }\r\n}\r\n","<!-- Profile Sidebar -->\r\n<div class=\"profile-sidebar\" *ngIf=\"user\">\r\n  <div class=\"widget-profile pro-widget-content\">\r\n    <div class=\"profile-info-widget\">\r\n      <a href=\"#\" class=\"booking-doc-img\">\r\n        <img src={{user.photo}} alt={{user.fullname}}>\r\n      </a>\r\n      <div class=\"profile-det-info\">\r\n        <h3>Dr. {{user.fullname}}</h3>\r\n        <div class=\"patient-details\">\r\n          <h5 class=\"mb-0\">BDS, MDS - Oral & Maxillofacial Surgery</h5>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"dashboard-widget\">\r\n    <nav class=\"dashboard-menu\">\r\n      <ul>\r\n        <li [routerLinkActive]=\"['active']\">\r\n          <a [routerLink]=\"['/main/doctor/dashboard']\">\r\n            <i class=\"fas fa-columns\"></i>\r\n            <span>Dashboard</span>\r\n          </a>\r\n        </li>\r\n        <li [routerLinkActive]=\"['active']\">\r\n          <a [routerLink]=\"['/main/doctor/appointments']\">\r\n            <i class=\"fas fa-calendar-check\"></i>\r\n            <span>Appointments</span>\r\n          </a>\r\n        </li>\r\n        <li [routerLinkActive]=\"['active']\">\r\n          <a [routerLink]=\"['/main/doctor/my-patients']\">\r\n            <i class=\"fas fa-user-injured\"></i>\r\n            <span>My Patients</span>\r\n          </a>\r\n        </li>\r\n        <li [routerLinkActive]=\"['active']\">\r\n          <a [routerLink]=\"['/main/doctor/schedule-timings']\">\r\n            <i class=\"fas fa-hourglass-start\"></i>\r\n            <span>Schedule Timings</span>\r\n          </a>\r\n        </li>\r\n        <li [routerLinkActive]=\"['active']\">\r\n          <a [routerLink]=\"['/main/doctor/invoices']\">\r\n            <i class=\"fas fa-file-invoice\"></i>\r\n            <span>Invoices</span>\r\n          </a>\r\n        </li>\r\n        <li [routerLinkActive]=\"['active']\">\r\n          <a [routerLink]=\"['/main/doctor/reviews']\">\r\n            <i class=\"fas fa-star\"></i>\r\n            <span>Reviews</span>\r\n          </a>\r\n        </li>\r\n        <li [routerLinkActive]=\"['active']\">\r\n          <a [routerLink]=\"['/main/doctor/message']\">\r\n            <i class=\"fas fa-comments\"></i>\r\n            <span>Message</span>\r\n            <small class=\"unread-msg\">23</small>\r\n          </a>\r\n        </li>\r\n        <li [routerLinkActive]=\"['active']\">\r\n          <a [routerLink]=\"['/main/doctor/profile-settings']\">\r\n            <i class=\"fas fa-user-cog\"></i>\r\n            <span>Profile Settings</span>\r\n          </a>\r\n        </li>\r\n        <li [routerLinkActive]=\"['active']\">\r\n          <a [routerLink]=\"['/main/doctor/social-media']\">\r\n            <i class=\"fas fa-share-alt\"></i>\r\n            <span>Social Media</span>\r\n          </a>\r\n        </li>\r\n        <li [routerLinkActive]=\"['active']\">\r\n          <a [routerLink]=\"['/main/doctor/change-password']\">\r\n            <i class=\"fas fa-lock\"></i>\r\n            <span>Change Password</span>\r\n          </a>\r\n        </li>\r\n        <li>\r\n          <a (click)=\"logout()\" href=\"javascript:void(0);\">\r\n            <i class=\"fas fa-sign-out-alt\"></i>\r\n            <span>Logout</span>\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  </div>\r\n</div>\r\n<!-- /Profile Sidebar -->","import { Component, OnInit } from '@angular/core';\r\nimport { User } from '../../models/user';\r\nimport { AuthService } from '../../services/auth.service';\r\nimport { ConfirmService } from '../../services/confirm.service';\r\n\r\n@Component({\r\n  selector: 'app-doctor-sidebar',\r\n  templateUrl: './doctor-sidebar.component.html',\r\n})\r\nexport class DoctorSidebarComponent implements OnInit {\r\n  public user!: User;\r\n  constructor(\r\n    private userService: AuthService,\r\n    private confirm: ConfirmService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.currentUser();\r\n  }\r\n\r\n  private currentUser() {\r\n    this.userService.currentUser$.subscribe((response) => (this.user = response));\r\n  }\r\n\r\n  public logout() {\r\n    this.confirm\r\n      .confirm('Confirm logout', 'Do you want to logout?')\r\n      .subscribe((result) => {\r\n        if (result) {\r\n          this.userService.logout();\r\n        }\r\n      });\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal';\r\n\r\n@Component({\r\n  selector: 'app-appointment-details',\r\n  templateUrl: './appointment-details.component.html'\r\n})\r\nexport class AppointmentDetailsComponent implements OnInit {\r\n\r\n  constructor(public bsModalRef: BsModalRef) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  public close() {\r\n    this.bsModalRef.hide();\r\n  }\r\n}\r\n","<!-- Appointment Details Modal -->\r\n<div class=\"modal-content\">\r\n  <div class=\"modal-header\">\r\n    <h5 class=\"modal-title\">Appointment Details</h5>\r\n    <button (click)=\"close()\" type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div class=\"modal-body\">\r\n    <ul class=\"info-details\">\r\n      <li>\r\n        <div class=\"details-header\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-6\">\r\n              <span class=\"title\">#APT0001</span>\r\n              <span class=\"text\">21 Oct 2019 10:00 AM</span>\r\n            </div>\r\n            <div class=\"col-md-6\">\r\n              <div class=\"text-right\">\r\n                <button type=\"button\" class=\"btn bg-success-light btn-sm\" id=\"topup_status\">\r\n                  Completed\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li>\r\n        <span class=\"title\">Status:</span>\r\n        <span class=\"text\">Completed</span>\r\n      </li>\r\n      <li>\r\n        <span class=\"title\">Confirm Date:</span>\r\n        <span class=\"text\">29 Jun 2019</span>\r\n      </li>\r\n      <li>\r\n        <span class=\"title\">Paid Amount</span>\r\n        <span class=\"text\">$450</span>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</div>\r\n<!-- /Appointment Details Modal -->","import { Component, OnInit } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal';\r\n\r\n@Component({\r\n  selector: 'app-medical-record',\r\n  templateUrl: './medical-record.component.html'\r\n})\r\nexport class MedicalRecordComponent implements OnInit {\r\n\r\n  constructor(public bsModalRef: BsModalRef) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  public close() {\r\n    this.bsModalRef.hide();\r\n  }\r\n}\r\n","<!-- Medical Records Modal -->\r\n<div class=\"modal-content\">\r\n  <div class=\"modal-header\">\r\n    <h3 class=\"modal-title\">Medical Records</h3>\r\n    <button (click)=\"close()\" type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n  <form>\r\n    <div class=\"modal-body\">\r\n      <div class=\"form-group\">\r\n        <label>Date</label>\r\n        <input type=\"text\" class=\"form-control datetimepicker\" value=\"31-10-2019\" />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label>Description ( Optional )</label>\r\n        <textarea class=\"form-control\"></textarea>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label>Upload File</label>\r\n        <input type=\"file\" class=\"form-control\" />\r\n      </div>\r\n      <div class=\"submit-section text-center\">\r\n        <button type=\"submit\" class=\"btn btn-primary submit-btn\">\r\n          Submit\r\n        </button>\r\n        <button type=\"button\" class=\"btn btn-secondary submit-btn\" data-dismiss=\"modal\">\r\n          Cancel\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n<!-- /Medical Records Modal -->","<div class=\"row form-row hours-cont\" [formGroup]=\"fg\">\r\n  <div class=\"col-sm-12 col-md-10\">\r\n    <div class=\"row form-row\">\r\n      <div class=\"col-sm-12-6 col-md-6\" formArrayName=\"starts\">\r\n        <div\r\n          class=\"form-group\"\r\n          *ngFor=\"let start of starts.controls; index as s;\"\r\n        >\r\n          <label>Start Time {{s+1}}</label>\r\n          <mat-form-field>\r\n            <input\r\n              matInput\r\n              [ngxMatDatetimePicker]=\"startPicker\"\r\n              placeholder=\"Choose a start time\"\r\n              [formControlName]=\"s\"\r\n            />\r\n            <mat-datepicker-toggle\r\n              matSuffix\r\n              [for]=\"$any(startPicker)\"\r\n            ></mat-datepicker-toggle>\r\n            <ngx-mat-datetime-picker #startPicker></ngx-mat-datetime-picker>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-sm-12-6 col-md-6\" formArrayName=\"ends\">\r\n        <div class=\"form-group\" *ngFor=\"let end of ends.controls; index as e\">\r\n          <label>End Time {{e}}</label>\r\n          <mat-form-field>\r\n            <input\r\n              matInput\r\n              [ngxMatDatetimePicker]=\"endPicker\"\r\n              placeholder=\"Choose a end time\"\r\n              [formControlName]=\"e\"\r\n            />\r\n            <mat-datepicker-toggle\r\n              matSuffix\r\n              [for]=\"$any(endPicker)\"\r\n            ></mat-datepicker-toggle>\r\n            <ngx-mat-datetime-picker #endPicker></ngx-mat-datetime-picker>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"col-sm-12 col-md-2\" *ngIf=\"!main\">\r\n    <label class=\"d-md-block d-sm-none d-none\">&nbsp;</label>\r\n    <a\r\n      (click)=\"removeAddedElement($event)\"\r\n      href=\"javascript:void(0)\"\r\n      class=\"btn btn-danger trash\"\r\n    >\r\n      <i class=\"far fa-trash-alt\"></i>\r\n    </a>\r\n  </div>\r\n</div>\r\n","import {\r\n  Component,\r\n  ElementRef,\r\n  Input,\r\n  OnInit,\r\n  ViewChild,\r\n  ViewEncapsulation,\r\n} from '@angular/core';\r\nimport { FormArray, FormGroup } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-time-slot-form-input',\r\n  templateUrl: './time-slot-form-input.component.html',\r\n  styleUrls: ['./time-slot-form-input.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class TimeSlotFormInputComponent implements OnInit {\r\n  @ViewChild('startPicker') startPicker: any;\r\n  @ViewChild('endPicker') endPicker: any;\r\n\r\n  @Input() row!: ElementRef;\r\n  @Input() main = false;\r\n  @Input() fg!: FormGroup;\r\n\r\n  @Input() starts!: FormArray;\r\n  @Input() ends!: FormArray;\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit(): void { }\r\n\r\n  public removeAddedElement(event: Event) {\r\n    event.preventDefault();\r\n\r\n    const target = event.target as HTMLElement;\r\n    const parent = target.parentElement?.parentElement?.parentElement;\r\n    const r: HTMLElement[] = this.row.nativeElement.children;\r\n    if (r.length > 1) {\r\n      for (const item of r) {\r\n        if (item === parent) {\r\n          this.row.nativeElement.removeChild(item);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import {\r\n  ApplicationRef,\r\n  Component,\r\n  ComponentFactoryResolver,\r\n  ElementRef,\r\n  EmbeddedViewRef,\r\n  Injector,\r\n  OnInit,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport {\r\n  FormArray,\r\n  FormBuilder,\r\n  FormControl,\r\n  FormGroup,\r\n  Validators,\r\n} from '@angular/forms';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal';\r\nimport { TimeSlotFormInputComponent } from '../time-slot-form-input/time-slot-form-input.component';\r\n\r\n@Component({\r\n  selector: 'app-time-slot',\r\n  templateUrl: './time-slot.component.html',\r\n})\r\nexport class TimeSlotComponent implements OnInit {\r\n  @ViewChild('row_count') row!: ElementRef;\r\n\r\n  public fg: FormGroup = new FormGroup({});\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private bsModalRef: BsModalRef,\r\n    private componentFactoryResolver: ComponentFactoryResolver,\r\n    private appRef: ApplicationRef,\r\n    private injector: Injector\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.intitializeForm();\r\n  }\r\n\r\n  private intitializeForm() {\r\n    this.fg = this.fb.group({\r\n      starts: this.fb.array([new FormControl(new Date(), Validators.required)]),\r\n      ends: this.fb.array([new FormControl(new Date(), Validators.required)]),\r\n    });\r\n  }\r\n\r\n  get starts(): FormArray {\r\n    return this.fg.get('starts') as FormArray;\r\n  }\r\n\r\n  get ends(): FormArray {\r\n    return this.fg.get('ends') as FormArray;\r\n  }\r\n\r\n  public addRowCount() {\r\n    const componentRef = this.componentFactoryResolver\r\n      .resolveComponentFactory(TimeSlotFormInputComponent)\r\n      .create(this.injector);\r\n\r\n    componentRef.instance.row = this.row;\r\n    componentRef.instance.fg = this.fg;\r\n    componentRef.instance.starts = this.starts;\r\n    componentRef.instance.ends = this.ends;\r\n    this.appRef.attachView(componentRef.hostView);\r\n\r\n    const domElem = (componentRef.hostView as EmbeddedViewRef<any>)\r\n      .rootNodes[0] as HTMLElement;\r\n\r\n    this.row.nativeElement.appendChild(domElem);\r\n  }\r\n\r\n  public submitAddOrEdit() {\r\n    // this.fg.value.starts = [];\r\n    // this.fg.value.ends = [];\r\n\r\n    // this.fg.value.starts.push(this.starts.value);\r\n    // this.fg.value.ends.push(this.ends.value);\r\n\r\n    console.log(this.fg.value);\r\n  }\r\n\r\n  public close() {\r\n    this.bsModalRef.hide();\r\n  }\r\n}\r\n","<!-- Time Slot Modal -->\r\n<div class=\"modal-content\">\r\n  <div class=\"modal-header\">\r\n    <h5 class=\"modal-title\">Add Time Slots</h5>\r\n    <button\r\n      (click)=\"close()\"\r\n      type=\"button\"\r\n      class=\"close\"\r\n      data-dismiss=\"modal\"\r\n      aria-label=\"Close\"\r\n    >\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div class=\"modal-body\">\r\n    <form\r\n      [formGroup]=\"fg\"\r\n      (ngSubmit)=\"fg.valid && submitAddOrEdit()\"\r\n      autocomplete=\"off\"\r\n    >\r\n      <div #row_count class=\"hours-info\">\r\n        <app-time-slot-form-input\r\n          [main]=\"true\"\r\n          [fg]=\"fg\"\r\n          [starts]=\"starts\"\r\n          [ends]=\"ends\"\r\n        ></app-time-slot-form-input>\r\n      </div>\r\n      <div class=\"add-more mb-3\">\r\n        <a (click)=\"addRowCount()\" href=\"javascript:void(0);\" class=\"add-hours\"\r\n          ><i class=\"fa fa-plus-circle\"></i> Add More</a\r\n        >\r\n      </div>\r\n      <div class=\"submit-section text-center\">\r\n        <button\r\n          [disabled]=\"!fg.valid\"\r\n          type=\"submit\"\r\n          class=\"btn btn-primary submit-btn\"\r\n        >\r\n          Save Changes\r\n        </button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</div>\r\n<!-- /Time Slot Modal -->\r\n","import { Injectable } from '@angular/core';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\r\nimport { AppointmentDetailsComponent } from '../components/appointment-details/appointment-details.component';\r\nimport { MedicalRecordComponent } from '../components/medical-record/medical-record.component';\r\nimport { TimeSlotComponent } from '../components/time-slot/time-slot.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ModalServicesService {\r\n  private bsModelRef!: BsModalRef;\r\n  private config = {\r\n    animated: true,\r\n    class: 'gray modal-md'\r\n  };\r\n\r\n  constructor(private modalService: BsModalService) { }\r\n\r\n  public appointmentDetails() {\r\n    this.bsModelRef = this.modalService.show(AppointmentDetailsComponent, this.config);\r\n  }\r\n\r\n  public timeSlot() {\r\n    this.bsModelRef = this.modalService.show(TimeSlotComponent, this.config);\r\n  }\r\n\r\n  public medicalRecord() {\r\n    this.bsModelRef = this.modalService.show(MedicalRecordComponent, this.config);\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ModalServicesService } from '../../services/modal-services.service';\r\n\r\n@Component({\r\n  selector: 'app-pages-action-for-user-dashboard',\r\n  templateUrl: './pages-action-for-user-dashboard.component.html'\r\n})\r\nexport class PagesActionForUserDashboardComponent implements OnInit {\r\n\r\n  constructor(private modals: ModalServicesService) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  public appointmentDetails() {\r\n    this.modals.appointmentDetails();\r\n  }\r\n}\r\n","<a (click)=\"appointmentDetails()\" href=\"javascript:void(0);\" class=\"btn btn-sm bg-info-light\">\r\n  <i class=\"far fa-eye\"></i> View\r\n</a>\r\n<a href=\"javascript:void(0);\" class=\"btn btn-sm bg-success-light\">\r\n  <i class=\"fas fa-check\"></i> Accept\r\n</a>\r\n<a href=\"javascript:void(0);\" class=\"btn btn-sm bg-danger-light\">\r\n  <i class=\"fas fa-times\"></i> Cancel\r\n</a>","<app-main-breadcrumb [title]='\"Appointments\"'></app-main-breadcrumb>\r\n  <!-- Page Content -->\r\n  <div class=\"content\">\r\n    <div class=\"container-fluid\">\r\n      <div class=\"row\">\r\n        <div class=\"col-md-5 col-lg-4 col-xl-3 theiaStickySidebar\">\r\n          <app-doctor-sidebar></app-doctor-sidebar>\r\n        </div>\r\n        <div class=\"col-md-7 col-lg-8 col-xl-9\">\r\n          <div class=\"appointments\">\r\n            <!-- Appointment List -->\r\n            <div class=\"appointment-list\" *ngFor=\"let item of patients\">\r\n              <div class=\"profile-info-widget\">\r\n                <a [routerLink]=\"['/main/doctor/patient-profile', item.slug]\" class=\"booking-doc-img\">\r\n                  <img src={{item.photo}} alt={{item.fullname}}>\r\n                </a>\r\n                <div class=\"profile-det-info\">\r\n                  <h3><a [routerLink]=\"['/main/doctor/patient-profile', item.slug]\">{{item.fullname}}</a></h3>\r\n                  <div class=\"patient-details\">\r\n                    <h5><i class=\"far fa-clock\"></i> 14 Nov 2019, 10.00 AM</h5>\r\n                    <h5><i class=\"fas fa-map-marker-alt\"></i> {{item.fullAddress}}</h5>\r\n                    <h5><i class=\"fas fa-envelope\"></i> {{item.email}}</h5>\r\n                    <h5 class=\"mb-0\"><i class=\"fas fa-phone\"></i> {{item.phone}}</h5>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"appointment-action\">\r\n                <app-pages-action-for-user-dashboard></app-pages-action-for-user-dashboard>\r\n              </div>\r\n            </div>\r\n            <!-- /Appointment List -->\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\t\t\r\n  <!-- /Page Content -->","import { Component, Input, OnInit } from '@angular/core';\r\nimport { User } from 'src/app/shared/models/user';\r\n\r\n@Component({\r\n  selector: 'app-appointments',\r\n  templateUrl: './appointments.component.html'\r\n})\r\nexport class AppointmentsComponent implements OnInit {\r\n  @Input() patients: User[] = [];\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {}\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { environment } from 'src/environments/environment';\r\nimport { DoctorSocialMedia } from '../models/doctor-social-media-url';\r\nimport { UpdatePassword } from '../models/update-user-password';\r\nimport { User } from '../models/user';\r\nimport { AuthService } from './auth.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class DoctorService {\r\n  private baseUrl = environment.api;\r\n  private memberCache = new Map();\r\n\r\n  constructor(private http: HttpClient, private authService: AuthService) {}\r\n\r\n  public patientsAppointment(): Observable<User[]> {\r\n    const url = `${this.baseUrl}/doctor/patients/appointment`;\r\n    return this.http.get<User[]>(url);\r\n  }\r\n\r\n  public patientBySlug(slug: any): Observable<User> {\r\n    const patient = [...this.memberCache.values()]\r\n      .reduce((arr, elem) => arr.concat(elem.result), [])\r\n      .find((x: User) => x.slug === slug);\r\n\r\n    if (patient) {\r\n      return of(patient);\r\n    }\r\n\r\n    const url = `${this.baseUrl}/doctor/patient/${slug}`;\r\n    return this.http.get<User>(url);\r\n  }\r\n\r\n  public getDoctorSocialMediaUrl(): Observable<DoctorSocialMedia> {\r\n    const url = `${this.baseUrl}/doctor/social-media-url`;\r\n    return this.http.get<DoctorSocialMedia>(url);\r\n  }\r\n\r\n  public updateDoctorSocialMediaUrl(model: DoctorSocialMedia): Observable<any> {\r\n    const url = `${this.baseUrl}/doctor/update-social-media-url`;\r\n    return this.http.put(url, model);\r\n  }\r\n\r\n  public updateDoctorPassword(model: UpdatePassword): Observable<any> {\r\n    const url = `${this.baseUrl}/doctor/update-password`;\r\n    return this.http.put(url, model).pipe(\r\n      map((response: any) => {\r\n        const user = response.response;\r\n        if (user) {\r\n          this.authService.setCurrentUser(user);\r\n          return response.message;\r\n        }\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {\r\n  FormBuilder,\r\n  FormControl,\r\n  FormGroup,\r\n  Validators,\r\n} from '@angular/forms';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { DoctorService } from 'src/app/shared/services/doctor.service';\r\nimport { ToastrService } from 'src/app/shared/services/toastr.service';\r\n\r\n@Component({\r\n  selector: 'app-change-password',\r\n  templateUrl: './change-password.component.html',\r\n})\r\nexport class ChangePasswordComponent implements OnInit {\r\n  public fg: FormGroup = new FormGroup({});\r\n\r\n  constructor(\r\n    private title: Title,\r\n    private fb: FormBuilder,\r\n    private toastr: ToastrService,\r\n    private doctorService: DoctorService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.title.setTitle('Doccure | Doctor Change Password');\r\n    this.intitializeForm();\r\n  }\r\n\r\n  private intitializeForm() {\r\n    this.fg = this.fb.group({\r\n      newPassword: new FormControl('', Validators.required),\r\n      confirmPassword: new FormControl('', Validators.required),\r\n      currentPassword: new FormControl('', Validators.required),\r\n    });\r\n  }\r\n\r\n  public updatePassword() {\r\n    this.doctorService\r\n      .updateDoctorPassword(this.fg.value)\r\n      .forEach((response) => this.toastr.success(response, 'Success'));\r\n  }\r\n}\r\n","<app-main-breadcrumb [title]=\"'Change Password'\"></app-main-breadcrumb>\r\n<!-- Page Content -->\r\n<div class=\"content\">\r\n  <div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-5 col-lg-4 col-xl-3 theiaStickySidebar\">\r\n        <app-doctor-sidebar></app-doctor-sidebar>\r\n      </div>\r\n      <div class=\"col-md-7 col-lg-8 col-xl-9\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <div class=\"row\">\r\n              <div class=\"col-md-12 col-lg-6\">\r\n                <!-- Change Password Form -->\r\n                <form\r\n                  [formGroup]=\"fg\"\r\n                  (ngSubmit)=\"fg.valid && updatePassword()\"\r\n                  autocomplete=\"off\"\r\n                >\r\n                  <app-input-text\r\n                    [type]=\"'password'\"\r\n                    [label]=\"'Current Password'\"\r\n                    [formControlName]=\"'currentPassword'\"\r\n                  >\r\n                  </app-input-text>\r\n                  <app-input-text\r\n                    [type]=\"'password'\"\r\n                    [label]=\"'New Password'\"\r\n                    [formControlName]=\"'newPassword'\"\r\n                  >\r\n                  </app-input-text>\r\n                  <app-input-text\r\n                    [type]=\"'password'\"\r\n                    [label]=\"'Confirm Password'\"\r\n                    [formControlName]=\"'confirmPassword'\"\r\n                  >\r\n                  </app-input-text>\r\n                  <div class=\"submit-section\">\r\n                    <button\r\n                      [disabled]=\"!fg.valid\"\r\n                      type=\"submit\"\r\n                      class=\"btn btn-primary submit-btn\"\r\n                    >\r\n                      Save Changes\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n                <!-- /Change Password Form -->\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- /Page Content -->\r\n","import { Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-dashboard-canvas',\r\n  templateUrl: './dashboard-canvas.component.html',\r\n})\r\nexport class DashboardCanvasComponent implements OnInit {\r\n  @Input() title: any = 'Doctor';\r\n  @Input() percent = 50;\r\n  public subtitle: any;\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {\r\n    this.subtitle = this.formatSubtitle(this.percent);\r\n  }\r\n\r\n  private formatSubtitle = (percent: number): string => {\r\n    if (percent >= 100) {\r\n      return 'Congratulations!';\r\n    } else if (percent >= 50) {\r\n      return 'Half';\r\n    } else if (percent > 0) {\r\n      return 'Just began';\r\n    } else {\r\n      return 'Not started';\r\n    }\r\n  }\r\n}\r\n","<div class=\"dash-widget\">\r\n  <div class=\"circle-bar circle-bar1\">\r\n    <div class=\"circle-graph1\" data-percent=\"75\">\r\n      <circle-progress\r\n      [percent]=\"percent\"\r\n      [backgroundPadding]=\"50\"\r\n      [animation]=\"true\"\r\n      [animationDuration]=\"300\"\r\n      [responsive]=\"true\"\r\n      [subtitle]=\"subtitle\"\r\n    >\r\n    </circle-progress>\r\n    </div>\r\n  </div>\r\n  <div class=\"dash-widget-info\">\r\n    <h6>Total Patient</h6>\r\n    <h3>1500</h3>\r\n    <p class=\"text-muted\">Till Today</p>\r\n  </div>\r\n</div>\r\n","<div class=\"card card-table mb-0\">\r\n  <div class=\"card-body\">\r\n    <div class=\"table-responsive\">\r\n      <table class=\"table table-hover table-center mb-0\">\r\n        <thead>\r\n          <tr>\r\n            <th>Patient Name</th>\r\n            <th>Appt Date</th>\r\n            <th>Purpose</th>\r\n            <th>Type</th>\r\n            <th class=\"text-center\">Paid Amount</th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor=\"let item of patients\">\r\n            <td>\r\n              <h2 class=\"table-avatar\">\r\n                <a [routerLink]=\"['/main/doctor/patient-profile']\" class=\"avatar avatar-sm mr-2\"><img class=\"avatar-img rounded-circle\" src={{item.photo}} alt={{item.fullname}}></a>\r\n                <a [routerLink]=\"['/main/doctor/patient-profile', item.slug]\">{{item.fullname}} <span>#PT{{item.code}}</span></a>\r\n              </h2>\r\n            </td>\r\n            <td>11 Nov 2019 <span class=\"d-block text-info\">10.00 AM</span></td>\r\n            <td>General</td>\r\n            <td>New Patient</td>\r\n            <td class=\"text-center\">$150</td>\r\n            <td class=\"text-right\">\r\n              <div class=\"table-action\">\r\n                <app-pages-action-for-user-dashboard></app-pages-action-for-user-dashboard>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\t\t\r\n    </div>\r\n  </div>\r\n</div>","import { Component, Input, OnInit } from '@angular/core';\r\nimport { User } from '../../models/user';\r\n\r\n@Component({\r\n  selector: 'app-doctor-dashboard-patients-appointment',\r\n  templateUrl: './doctor-dashboard-patients-appointment.component.html',\r\n})\r\nexport class DoctorDashboardPatientsAppointmentComponent implements OnInit {\r\n  @Input() patients: User[] = [];\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit(): void { }\r\n}\r\n","<app-main-breadcrumb [title]='\"Dashboard\"'></app-main-breadcrumb>\r\n\r\n<!-- Page Content -->\r\n<div class=\"content\">\r\n  <div class=\"container-fluid\">\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-md-5 col-lg-4 col-xl-3 theiaStickySidebar\">\r\n        <app-doctor-sidebar></app-doctor-sidebar>\r\n      </div>\r\n\r\n      <div class=\"col-md-7 col-lg-8 col-xl-9\">\r\n        <div class=\"row\">\r\n          <div class=\"col-md-12\">\r\n            <div class=\"card dash-card\">\r\n              <div class=\"card-body\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-md-12 col-lg-4\">\r\n                    <app-dashboard-canvas></app-dashboard-canvas>\r\n                  </div>\r\n                  <div class=\"col-md-12 col-lg-4\">\r\n                    <app-dashboard-canvas></app-dashboard-canvas>\r\n                  </div>\r\n                  <div class=\"col-md-12 col-lg-4\">\r\n                    <app-dashboard-canvas></app-dashboard-canvas>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-md-12\">\r\n            <h4 class=\"mb-4\">Patient Appoinment</h4>\r\n            <div class=\"appointment-tab\">\r\n\r\n              <!-- Appointment Tab -->\r\n              <ul class=\"nav nav-tabs nav-tabs-solid nav-tabs-rounded\">\r\n                <li class=\"nav-item\">\r\n                  <a #activeLink (click)=\"setApp($event)\" class=\"nav-link active\"\r\n                    href=\"#upcoming-appointments\">Upcoming</a>\r\n                </li>\r\n                <li class=\"nav-item\">\r\n                  <a #activeLink (click)=\"setApp($event)\" class=\"nav-link\" href=\"#today-appointments\">Today</a>\r\n                </li>\r\n              </ul>\r\n              <!-- /Appointment Tab -->\r\n\r\n              <div class=\"tab-content\">\r\n                <!-- Upcoming Appointment Tab -->\r\n                <div #app class=\"tab-pane show active\" id=\"upcoming-appointments\">\r\n                  <app-doctor-dashboard-patients-appointment *ngIf=\"patients.length !== 0\" [patients]=\"patients\">\r\n                  </app-doctor-dashboard-patients-appointment>\r\n                </div>\r\n                <!-- /Upcoming Appointment Tab -->\r\n                <!-- Today Appointment Tab -->\r\n                <div #app class=\"tab-pane\" id=\"today-appointments\">\r\n                  <app-doctor-dashboard-patients-appointment *ngIf=\"patients.length !== 0\" [patients]=\"patients\">\r\n                  </app-doctor-dashboard-patients-appointment>\r\n                </div>\r\n                <!-- /Today Appointment Tab -->\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n<!-- /Page Content -->","import {\r\n  Component,\r\n  ElementRef,\r\n  Input,\r\n  OnInit,\r\n  QueryList,\r\n  ViewChildren,\r\n} from '@angular/core';\r\nimport { User } from 'src/app/shared/models/user';\r\n\r\n@Component({\r\n  selector: 'app-dashboard',\r\n  templateUrl: './dashboard.component.html',\r\n})\r\nexport class DashboardComponent implements OnInit {\r\n  @ViewChildren('app') apps!: QueryList<ElementRef>;\r\n  @ViewChildren('activeLink') activeLinks!: QueryList<ElementRef>;\r\n  @Input() patients: User[] = [];\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  public setApp(event: Event) {\r\n    event.preventDefault();\r\n\r\n    const target = event.currentTarget as HTMLElement;\r\n    const href = target.getAttribute('href')?.replace('#', '');\r\n    const navLink: ElementRef[] = this.activeLinks.toArray();\r\n    const app: ElementRef[] = this.apps.toArray();\r\n\r\n    app.forEach((x) => {\r\n      x.nativeElement.className = 'tab-pane';\r\n      if (x.nativeElement.getAttribute('id') === href) {\r\n        x.nativeElement.className = 'tab-pane show active';\r\n      }\r\n    });\r\n\r\n    navLink.forEach((x) => (x.nativeElement.className = 'nav-link'));\r\n\r\n    target.classList.add('active');\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-doctor-blog',\n  templateUrl: './doctor-blog.component.html'\n})\nexport class DoctorBlogComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<app-main-breadcrumb [title]='\"Doctor Blog\"'></app-main-breadcrumb>\n\n<!-- Page Content -->\n<div class=\"content\">\n  <div class=\"container-fluid\">\n\n    <div class=\"row\">\n      <div class=\"col-md-5 col-lg-4 col-xl-3 theiaStickySidebar\">\n        <app-doctor-sidebar></app-doctor-sidebar>\n      </div>\n\n      <div class=\"col-md-7 col-lg-8 col-xl-9\">\n        <div class=\"doc-review review-listing custom-edit-service\">\n\n          <div class=\"row mb-5\">\n            <div class=\"col\">\n              <ul class=\"nav nav-tabs nav-tabs-solid\">\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\" href=\"doctor-blog.html\">Acitive Blog</a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\" href=\"doctor-pending-blog.html\">Pending Blog</a>\n                </li>\n              </ul>\n            </div>\n            <div class=\"col-auto\">\n              <a class=\"btn btn-primary btn-sm\" href=\"doctor-add-blog.html\"><i class=\"fas fa-plus mr-1\"></i> Add\n                Blog</a>\n            </div>\n          </div>\n\n          <!-- Add Blog -->\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <h3 class=\"pb-3\">Add Blog</h3>\n\n              <form method=\"post\" enctype=\"multipart/form-data\" autocomplete=\"off\" id=\"update_service\"\n                action=\"https://doccure-html.dreamguystech.com/template/doctor-blog.html\">\n                <input type=\"hidden\" name=\"csrf_token_name\" value=\"0146f123a4c7ae94253b39bca6bd5a5e\">\n\n                <div class=\"service-fields mb-3\">\n                  <div class=\"row\">\n                    <div class=\"col-lg-12\">\n                      <div class=\"form-group\">\n                        <label>Blog Title <span class=\"text-danger\">*</span></label>\n                        <input type=\"hidden\" name=\"service_id\" id=\"service_id\" value=\"18\">\n                        <input class=\"form-control\" type=\"text\" name=\"service_title\" id=\"service_title\"\n                          value=\"Doccure  Making your clinic painless visit?\" required=\"\">\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"service-fields mb-3\">\n                  <div class=\"row\">\n                    <div class=\"col-lg-6\">\n                      <div class=\"form-group\">\n                        <label>Category <span class=\"text-danger\">*</span></label>\n                        <select class=\"form-control select\" name=\"category\" required=\"\">\n                          <option value=\"1\">Automobile</option>\n                          <option value=\"2\" selected=\"selected\">Construction</option>\n                          <option value=\"3\">Interior</option>\n                          <option value=\"4\">Cleaning</option>\n                          <option value=\"5\">Electrical</option>\n                          <option value=\"6\">Carpentry</option>\n                          <option value=\"7\">Computer</option>\n                          <option value=\"8\">Painting</option>\n                          <option value=\"9\">Car Wash</option>\n                          <option value=\"10\">Category Test</option>\n                          <option value=\"11\">dfdf</option>\n                          <option value=\"12\">Equipment</option>\n                          <option value=\"13\">Test category1</option>\n                          <option value=\"14\">Farming</option>\n                          <option value=\"15\">Test Category02</option>\n                          <option value=\"16\">Laundry</option>\n                        </select>\n                      </div>\n                    </div>\n                    <div class=\"col-lg-6\">\n                      <div class=\"form-group\">\n                        <label>Sub Category <span class=\"text-danger\">*</span></label>\n                        <select class=\"form-control select\" name=\"subcategory\">\n                          <option value=\"5\">Others</option>\n                          <option value=\"6\">Others</option>\n                          <option value=\"7\">Others</option>\n                          <option value=\"8\">House cleaning</option>\n                          <option value=\"9\">Others</option>\n                          <option value=\"10\">Others</option>\n                          <option value=\"11\">Others</option>\n                          <option value=\"12\">Others</option>\n                          <option value=\"13\">Full Car Wash</option>\n                          <option value=\"14\" selected=\"selected\">Testing category</option>\n                          <option value=\"15\">Test Sub category</option>\n                          <option value=\"16\">Harvesting pine</option>\n                          <option value=\"17\">Test Sub category name</option>\n                          <option value=\"18\">Test Sub category name</option>\n                        </select>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"service-fields mb-3\">\n                  <div class=\"row\">\n                    <div class=\"col-lg-12\">\n                      <div class=\"form-group\">\n                        <label>Descriptions <span class=\"text-danger\">*</span></label>\n                        <textarea id=\"about\" class=\"form-control service-desc\" name=\"about\">note.</textarea>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"service-fields mb-3\">\n                  <div class=\"row\">\n                    <div class=\"col-lg-12\">\n                      <div class=\"service-upload\">\n                        <i class=\"fas fa-cloud-upload-alt\"></i>\n                        <span>Upload Blog Images *</span>\n                        <input type=\"file\" name=\"images[]\" id=\"images\" multiple=\"\"\n                          accept=\"image/jpeg, image/png, image/gif,\">\n\n                      </div>\n                      <div id=\"uploadPreview\">\n                        <ul class=\"upload-wrap\">\n                          <li>\n                            <div class=\" upload-images\">\n                              <img alt=\"Blog Image\" src=\"assets/img/img-01.jpg\">\n                            </div>\n                          </li>\n                          <li>\n                            <div class=\" upload-images\">\n                              <img alt=\"Blog Image\" src=\"assets/img/img-02.jpg\">\n                            </div>\n                          </li>\n                          <li>\n                            <div class=\" upload-images\">\n                              <img alt=\"Blog Image\" src=\"assets/img/img-03.jpg\">\n                            </div>\n                          </li>\n                        </ul>\n                      </div>\n\n                    </div>\n                  </div>\n                </div>\n                <div class=\"service-fields mb-3\">\n                  <div class=\"row\">\n                    <div class=\"col-lg-12\">\n                      <div class=\"form-group\">\n                        <label>Video id <span class=\"text-danger\">*</span></label>\n                        <input type=\"hidden\" name=\"video_id\" id=\"video_id\" value=\"18\">\n                        <input class=\"form-control\" type=\"text\" name=\"video_id\" id=\"video_id\" value=\"Rf34rhkWW1\"\n                          required=\"\">\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"submit-section\">\n                  <button class=\"btn btn-primary submit-btn\" type=\"submit\" name=\"form_submit\"\n                    value=\"submit\">Submit</button>\n                </div>\n              </form>\n\n            </div>\n          </div>\n          <!-- /Add Blog -->\n\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\n<!-- /Page Content -->","<router-outlet *ngIf=\"patients.length !== 0\" (activate)=\"onDashboardLoaded($event); onAppointmentLoaded($event); onMyPatientsLoaded($event)\"></router-outlet>","import { Component, OnInit } from '@angular/core';\r\nimport { User } from 'src/app/shared/models/user';\r\nimport { DoctorService } from 'src/app/shared/services/doctor.service';\r\nimport { AppointmentsComponent } from './appointments/appointments.component';\r\nimport { DashboardComponent } from './dashboard/dashboard.component';\r\nimport { MyPatientsComponent } from './my-patients/my-patients.component';\r\n\r\n@Component({\r\n  selector: 'app-doctor',\r\n  templateUrl: './doctor.component.html'\r\n})\r\nexport class DoctorComponent implements OnInit {\r\n  public patients: User[] = [];\r\n  public patient!: User;\r\n  constructor(private doctorService: DoctorService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.apiResponse();\r\n  }\r\n\r\n  private apiResponse() {\r\n    this.doctorService.patientsAppointment().subscribe((response) => (this.patients = response));\r\n  }\r\n\r\n  public onDashboardLoaded(component: DashboardComponent) {\r\n    component.patients = this.patients;\r\n  }\r\n\r\n  public onAppointmentLoaded(component: AppointmentsComponent) {\r\n    component.patients = this.patients;\r\n  }\r\n\r\n  public onMyPatientsLoaded(component: MyPatientsComponent) {\r\n    component.patients = this.patients;\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-invoice-table',\r\n  templateUrl: './invoice-table.component.html'\r\n})\r\nexport class InvoiceTableComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"card-body\">\r\n  <!-- Invoice Table -->\r\n  <div class=\"table-responsive\">\r\n    <table class=\"table table-hover table-center mb-0\">\r\n      <thead>\r\n        <tr>\r\n          <th>Invoice No</th>\r\n          <th>Patient</th>\r\n          <th>Amount</th>\r\n          <th>Paid On</th>\r\n          <th></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr>\r\n          <td>\r\n            <a href=\"javascript:void(0);\">#INV-0010</a>\r\n          </td>\r\n          <td>\r\n            <h2 class=\"table-avatar\">\r\n              <a href=\"javascript:void(0);\" class=\"avatar avatar-sm mr-2\">\r\n                <img class=\"avatar-img rounded-circle\" src=\"assets/img/patients/patient.jpg\" alt=\"User Image\">\r\n              </a>\r\n              <a href=\"javascript:void(0);\">Richard Wilson <span>#PT0016</span></a>\r\n            </h2>\r\n          </td>\r\n          <td>$450</td>\r\n          <td>14 Nov 2019</td>\r\n          <td class=\"text-right\">\r\n            <div class=\"table-action\">\r\n              <a href=\"javascript:void(0);\" class=\"btn btn-sm bg-info-light\">\r\n                <i class=\"far fa-eye\"></i> View\r\n              </a>\r\n              <a href=\"javascript:void(0);\" class=\"btn btn-sm bg-primary-light\">\r\n                <i class=\"fas fa-print\"></i> Print\r\n              </a>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  <!-- /Invoice Table -->\r\n</div>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-invoices',\n  templateUrl: './invoices.component.html'\n})\nexport class InvoicesComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<app-main-breadcrumb [title]='\"Invoices\"'></app-main-breadcrumb>\r\n<!-- Page Content -->\r\n<div class=\"content\">\r\n  <div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-5 col-lg-4 col-xl-3 theiaStickySidebar\">\r\n      <app-doctor-sidebar></app-doctor-sidebar>\r\n      </div>\r\n      <div class=\"col-md-7 col-lg-8 col-xl-9\">\r\n        <div class=\"card card-table\">\r\n          <app-invoice-table></app-invoice-table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\t\t\r\n<!-- /Page Content -->","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/** Error thrown when an HTTP request fails. */\r\nvar HttpError = /** @class */ (function (_super) {\r\n    __extends(HttpError, _super);\r\n    /** Constructs a new instance of {@link @microsoft/signalr.HttpError}.\r\n     *\r\n     * @param {string} errorMessage A descriptive error message.\r\n     * @param {number} statusCode The HTTP status code represented by this error.\r\n     */\r\n    function HttpError(errorMessage, statusCode) {\r\n        var _newTarget = this.constructor;\r\n        var _this = this;\r\n        var trueProto = _newTarget.prototype;\r\n        _this = _super.call(this, errorMessage) || this;\r\n        _this.statusCode = statusCode;\r\n        // Workaround issue in Typescript compiler\r\n        // https://github.com/Microsoft/TypeScript/issues/13965#issuecomment-278570200\r\n        _this.__proto__ = trueProto;\r\n        return _this;\r\n    }\r\n    return HttpError;\r\n}(Error));\r\nexport { HttpError };\r\n/** Error thrown when a timeout elapses. */\r\nvar TimeoutError = /** @class */ (function (_super) {\r\n    __extends(TimeoutError, _super);\r\n    /** Constructs a new instance of {@link @microsoft/signalr.TimeoutError}.\r\n     *\r\n     * @param {string} errorMessage A descriptive error message.\r\n     */\r\n    function TimeoutError(errorMessage) {\r\n        var _newTarget = this.constructor;\r\n        if (errorMessage === void 0) { errorMessage = \"A timeout occurred.\"; }\r\n        var _this = this;\r\n        var trueProto = _newTarget.prototype;\r\n        _this = _super.call(this, errorMessage) || this;\r\n        // Workaround issue in Typescript compiler\r\n        // https://github.com/Microsoft/TypeScript/issues/13965#issuecomment-278570200\r\n        _this.__proto__ = trueProto;\r\n        return _this;\r\n    }\r\n    return TimeoutError;\r\n}(Error));\r\nexport { TimeoutError };\r\n/** Error thrown when an action is aborted. */\r\nvar AbortError = /** @class */ (function (_super) {\r\n    __extends(AbortError, _super);\r\n    /** Constructs a new instance of {@link AbortError}.\r\n     *\r\n     * @param {string} errorMessage A descriptive error message.\r\n     */\r\n    function AbortError(errorMessage) {\r\n        var _newTarget = this.constructor;\r\n        if (errorMessage === void 0) { errorMessage = \"An abort occurred.\"; }\r\n        var _this = this;\r\n        var trueProto = _newTarget.prototype;\r\n        _this = _super.call(this, errorMessage) || this;\r\n        // Workaround issue in Typescript compiler\r\n        // https://github.com/Microsoft/TypeScript/issues/13965#issuecomment-278570200\r\n        _this.__proto__ = trueProto;\r\n        return _this;\r\n    }\r\n    return AbortError;\r\n}(Error));\r\nexport { AbortError };\r\n//# sourceMappingURL=Errors.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\n/** Represents an HTTP response. */\r\nvar HttpResponse = /** @class */ (function () {\r\n    function HttpResponse(statusCode, statusText, content) {\r\n        this.statusCode = statusCode;\r\n        this.statusText = statusText;\r\n        this.content = content;\r\n    }\r\n    return HttpResponse;\r\n}());\r\nexport { HttpResponse };\r\n/** Abstraction over an HTTP client.\r\n *\r\n * This class provides an abstraction over an HTTP client so that a different implementation can be provided on different platforms.\r\n */\r\nvar HttpClient = /** @class */ (function () {\r\n    function HttpClient() {\r\n    }\r\n    HttpClient.prototype.get = function (url, options) {\r\n        return this.send(__assign({}, options, { method: \"GET\", url: url }));\r\n    };\r\n    HttpClient.prototype.post = function (url, options) {\r\n        return this.send(__assign({}, options, { method: \"POST\", url: url }));\r\n    };\r\n    HttpClient.prototype.delete = function (url, options) {\r\n        return this.send(__assign({}, options, { method: \"DELETE\", url: url }));\r\n    };\r\n    /** Gets all cookies that apply to the specified URL.\r\n     *\r\n     * @param url The URL that the cookies are valid for.\r\n     * @returns {string} A string containing all the key-value cookie pairs for the specified URL.\r\n     */\r\n    // @ts-ignore\r\n    HttpClient.prototype.getCookieString = function (url) {\r\n        return \"\";\r\n    };\r\n    return HttpClient;\r\n}());\r\nexport { HttpClient };\r\n//# sourceMappingURL=HttpClient.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n// These values are designed to match the ASP.NET Log Levels since that's the pattern we're emulating here.\r\n/** Indicates the severity of a log message.\r\n *\r\n * Log Levels are ordered in increasing severity. So `Debug` is more severe than `Trace`, etc.\r\n */\r\nexport var LogLevel;\r\n(function (LogLevel) {\r\n    /** Log level for very low severity diagnostic messages. */\r\n    LogLevel[LogLevel[\"Trace\"] = 0] = \"Trace\";\r\n    /** Log level for low severity diagnostic messages. */\r\n    LogLevel[LogLevel[\"Debug\"] = 1] = \"Debug\";\r\n    /** Log level for informational diagnostic messages. */\r\n    LogLevel[LogLevel[\"Information\"] = 2] = \"Information\";\r\n    /** Log level for diagnostic messages that indicate a non-fatal problem. */\r\n    LogLevel[LogLevel[\"Warning\"] = 3] = \"Warning\";\r\n    /** Log level for diagnostic messages that indicate a failure in the current operation. */\r\n    LogLevel[LogLevel[\"Error\"] = 4] = \"Error\";\r\n    /** Log level for diagnostic messages that indicate a failure that will terminate the entire application. */\r\n    LogLevel[LogLevel[\"Critical\"] = 5] = \"Critical\";\r\n    /** The highest possible log level. Used when configuring logging to indicate that no log messages should be emitted. */\r\n    LogLevel[LogLevel[\"None\"] = 6] = \"None\";\r\n})(LogLevel || (LogLevel = {}));\r\n//# sourceMappingURL=ILogger.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n/** A logger that does nothing when log messages are sent to it. */\r\nvar NullLogger = /** @class */ (function () {\r\n    function NullLogger() {\r\n    }\r\n    /** @inheritDoc */\r\n    // tslint:disable-next-line\r\n    NullLogger.prototype.log = function (_logLevel, _message) {\r\n    };\r\n    /** The singleton instance of the {@link @microsoft/signalr.NullLogger}. */\r\n    NullLogger.instance = new NullLogger();\r\n    return NullLogger;\r\n}());\r\nexport { NullLogger };\r\n//# sourceMappingURL=Loggers.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { NullLogger } from \"./Loggers\";\r\n// Version token that will be replaced by the prepack command\r\n/** The version of the SignalR client. */\r\nexport var VERSION = \"5.0.5\";\r\n/** @private */\r\nvar Arg = /** @class */ (function () {\r\n    function Arg() {\r\n    }\r\n    Arg.isRequired = function (val, name) {\r\n        if (val === null || val === undefined) {\r\n            throw new Error(\"The '\" + name + \"' argument is required.\");\r\n        }\r\n    };\r\n    Arg.isNotEmpty = function (val, name) {\r\n        if (!val || val.match(/^\\s*$/)) {\r\n            throw new Error(\"The '\" + name + \"' argument should not be empty.\");\r\n        }\r\n    };\r\n    Arg.isIn = function (val, values, name) {\r\n        // TypeScript enums have keys for **both** the name and the value of each enum member on the type itself.\r\n        if (!(val in values)) {\r\n            throw new Error(\"Unknown \" + name + \" value: \" + val + \".\");\r\n        }\r\n    };\r\n    return Arg;\r\n}());\r\nexport { Arg };\r\n/** @private */\r\nvar Platform = /** @class */ (function () {\r\n    function Platform() {\r\n    }\r\n    Object.defineProperty(Platform, \"isBrowser\", {\r\n        get: function () {\r\n            return typeof window === \"object\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Platform, \"isWebWorker\", {\r\n        get: function () {\r\n            return typeof self === \"object\" && \"importScripts\" in self;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Platform, \"isNode\", {\r\n        get: function () {\r\n            return !this.isBrowser && !this.isWebWorker;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Platform;\r\n}());\r\nexport { Platform };\r\n/** @private */\r\nexport function getDataDetail(data, includeContent) {\r\n    var detail = \"\";\r\n    if (isArrayBuffer(data)) {\r\n        detail = \"Binary data of length \" + data.byteLength;\r\n        if (includeContent) {\r\n            detail += \". Content: '\" + formatArrayBuffer(data) + \"'\";\r\n        }\r\n    }\r\n    else if (typeof data === \"string\") {\r\n        detail = \"String data of length \" + data.length;\r\n        if (includeContent) {\r\n            detail += \". Content: '\" + data + \"'\";\r\n        }\r\n    }\r\n    return detail;\r\n}\r\n/** @private */\r\nexport function formatArrayBuffer(data) {\r\n    var view = new Uint8Array(data);\r\n    // Uint8Array.map only supports returning another Uint8Array?\r\n    var str = \"\";\r\n    view.forEach(function (num) {\r\n        var pad = num < 16 ? \"0\" : \"\";\r\n        str += \"0x\" + pad + num.toString(16) + \" \";\r\n    });\r\n    // Trim of trailing space.\r\n    return str.substr(0, str.length - 1);\r\n}\r\n// Also in signalr-protocol-msgpack/Utils.ts\r\n/** @private */\r\nexport function isArrayBuffer(val) {\r\n    return val && typeof ArrayBuffer !== \"undefined\" &&\r\n        (val instanceof ArrayBuffer ||\r\n            // Sometimes we get an ArrayBuffer that doesn't satisfy instanceof\r\n            (val.constructor && val.constructor.name === \"ArrayBuffer\"));\r\n}\r\n/** @private */\r\nexport function sendMessage(logger, transportName, httpClient, url, accessTokenFactory, content, logMessageContent, withCredentials, defaultHeaders) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var _a, headers, token, _b, name, value, responseType, response;\r\n        return __generator(this, function (_c) {\r\n            switch (_c.label) {\r\n                case 0:\r\n                    headers = {};\r\n                    if (!accessTokenFactory) return [3 /*break*/, 2];\r\n                    return [4 /*yield*/, accessTokenFactory()];\r\n                case 1:\r\n                    token = _c.sent();\r\n                    if (token) {\r\n                        headers = (_a = {},\r\n                            _a[\"Authorization\"] = \"Bearer \" + token,\r\n                            _a);\r\n                    }\r\n                    _c.label = 2;\r\n                case 2:\r\n                    _b = getUserAgentHeader(), name = _b[0], value = _b[1];\r\n                    headers[name] = value;\r\n                    logger.log(LogLevel.Trace, \"(\" + transportName + \" transport) sending data. \" + getDataDetail(content, logMessageContent) + \".\");\r\n                    responseType = isArrayBuffer(content) ? \"arraybuffer\" : \"text\";\r\n                    return [4 /*yield*/, httpClient.post(url, {\r\n                            content: content,\r\n                            headers: __assign({}, headers, defaultHeaders),\r\n                            responseType: responseType,\r\n                            withCredentials: withCredentials,\r\n                        })];\r\n                case 3:\r\n                    response = _c.sent();\r\n                    logger.log(LogLevel.Trace, \"(\" + transportName + \" transport) request complete. Response status: \" + response.statusCode + \".\");\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\n/** @private */\r\nexport function createLogger(logger) {\r\n    if (logger === undefined) {\r\n        return new ConsoleLogger(LogLevel.Information);\r\n    }\r\n    if (logger === null) {\r\n        return NullLogger.instance;\r\n    }\r\n    if (logger.log) {\r\n        return logger;\r\n    }\r\n    return new ConsoleLogger(logger);\r\n}\r\n/** @private */\r\nvar SubjectSubscription = /** @class */ (function () {\r\n    function SubjectSubscription(subject, observer) {\r\n        this.subject = subject;\r\n        this.observer = observer;\r\n    }\r\n    SubjectSubscription.prototype.dispose = function () {\r\n        var index = this.subject.observers.indexOf(this.observer);\r\n        if (index > -1) {\r\n            this.subject.observers.splice(index, 1);\r\n        }\r\n        if (this.subject.observers.length === 0 && this.subject.cancelCallback) {\r\n            this.subject.cancelCallback().catch(function (_) { });\r\n        }\r\n    };\r\n    return SubjectSubscription;\r\n}());\r\nexport { SubjectSubscription };\r\n/** @private */\r\nvar ConsoleLogger = /** @class */ (function () {\r\n    function ConsoleLogger(minimumLogLevel) {\r\n        this.minimumLogLevel = minimumLogLevel;\r\n        this.outputConsole = console;\r\n    }\r\n    ConsoleLogger.prototype.log = function (logLevel, message) {\r\n        if (logLevel >= this.minimumLogLevel) {\r\n            switch (logLevel) {\r\n                case LogLevel.Critical:\r\n                case LogLevel.Error:\r\n                    this.outputConsole.error(\"[\" + new Date().toISOString() + \"] \" + LogLevel[logLevel] + \": \" + message);\r\n                    break;\r\n                case LogLevel.Warning:\r\n                    this.outputConsole.warn(\"[\" + new Date().toISOString() + \"] \" + LogLevel[logLevel] + \": \" + message);\r\n                    break;\r\n                case LogLevel.Information:\r\n                    this.outputConsole.info(\"[\" + new Date().toISOString() + \"] \" + LogLevel[logLevel] + \": \" + message);\r\n                    break;\r\n                default:\r\n                    // console.debug only goes to attached debuggers in Node, so we use console.log for Trace and Debug\r\n                    this.outputConsole.log(\"[\" + new Date().toISOString() + \"] \" + LogLevel[logLevel] + \": \" + message);\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    return ConsoleLogger;\r\n}());\r\nexport { ConsoleLogger };\r\n/** @private */\r\nexport function getUserAgentHeader() {\r\n    var userAgentHeaderName = \"X-SignalR-User-Agent\";\r\n    if (Platform.isNode) {\r\n        userAgentHeaderName = \"User-Agent\";\r\n    }\r\n    return [userAgentHeaderName, constructUserAgent(VERSION, getOsName(), getRuntime(), getRuntimeVersion())];\r\n}\r\n/** @private */\r\nexport function constructUserAgent(version, os, runtime, runtimeVersion) {\r\n    // Microsoft SignalR/[Version] ([Detailed Version]; [Operating System]; [Runtime]; [Runtime Version])\r\n    var userAgent = \"Microsoft SignalR/\";\r\n    var majorAndMinor = version.split(\".\");\r\n    userAgent += majorAndMinor[0] + \".\" + majorAndMinor[1];\r\n    userAgent += \" (\" + version + \"; \";\r\n    if (os && os !== \"\") {\r\n        userAgent += os + \"; \";\r\n    }\r\n    else {\r\n        userAgent += \"Unknown OS; \";\r\n    }\r\n    userAgent += \"\" + runtime;\r\n    if (runtimeVersion) {\r\n        userAgent += \"; \" + runtimeVersion;\r\n    }\r\n    else {\r\n        userAgent += \"; Unknown Runtime Version\";\r\n    }\r\n    userAgent += \")\";\r\n    return userAgent;\r\n}\r\nfunction getOsName() {\r\n    if (Platform.isNode) {\r\n        switch (process.platform) {\r\n            case \"win32\":\r\n                return \"Windows NT\";\r\n            case \"darwin\":\r\n                return \"macOS\";\r\n            case \"linux\":\r\n                return \"Linux\";\r\n            default:\r\n                return process.platform;\r\n        }\r\n    }\r\n    else {\r\n        return \"\";\r\n    }\r\n}\r\nfunction getRuntimeVersion() {\r\n    if (Platform.isNode) {\r\n        return process.versions.node;\r\n    }\r\n    return undefined;\r\n}\r\nfunction getRuntime() {\r\n    if (Platform.isNode) {\r\n        return \"NodeJS\";\r\n    }\r\n    else {\r\n        return \"Browser\";\r\n    }\r\n}\r\n//# sourceMappingURL=Utils.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { AbortError, HttpError, TimeoutError } from \"./Errors\";\r\nimport { HttpClient, HttpResponse } from \"./HttpClient\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { Platform } from \"./Utils\";\r\nvar FetchHttpClient = /** @class */ (function (_super) {\r\n    __extends(FetchHttpClient, _super);\r\n    function FetchHttpClient(logger) {\r\n        var _this = _super.call(this) || this;\r\n        _this.logger = logger;\r\n        if (typeof fetch === \"undefined\") {\r\n            // In order to ignore the dynamic require in webpack builds we need to do this magic\r\n            // @ts-ignore: TS doesn't know about these names\r\n            var requireFunc = typeof __webpack_require__ === \"function\" ? __non_webpack_require__ : require;\r\n            // Cookies aren't automatically handled in Node so we need to add a CookieJar to preserve cookies across requests\r\n            _this.jar = new (requireFunc(\"tough-cookie\")).CookieJar();\r\n            _this.fetchType = requireFunc(\"node-fetch\");\r\n            // node-fetch doesn't have a nice API for getting and setting cookies\r\n            // fetch-cookie will wrap a fetch implementation with a default CookieJar or a provided one\r\n            _this.fetchType = requireFunc(\"fetch-cookie\")(_this.fetchType, _this.jar);\r\n            // Node needs EventListener methods on AbortController which our custom polyfill doesn't provide\r\n            _this.abortControllerType = requireFunc(\"abort-controller\");\r\n        }\r\n        else {\r\n            _this.fetchType = fetch.bind(self);\r\n            _this.abortControllerType = AbortController;\r\n        }\r\n        return _this;\r\n    }\r\n    /** @inheritDoc */\r\n    FetchHttpClient.prototype.send = function (request) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var abortController, error, timeoutId, msTimeout, response, e_1, content, payload;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        // Check that abort was not signaled before calling send\r\n                        if (request.abortSignal && request.abortSignal.aborted) {\r\n                            throw new AbortError();\r\n                        }\r\n                        if (!request.method) {\r\n                            throw new Error(\"No method defined.\");\r\n                        }\r\n                        if (!request.url) {\r\n                            throw new Error(\"No url defined.\");\r\n                        }\r\n                        abortController = new this.abortControllerType();\r\n                        // Hook our abortSignal into the abort controller\r\n                        if (request.abortSignal) {\r\n                            request.abortSignal.onabort = function () {\r\n                                abortController.abort();\r\n                                error = new AbortError();\r\n                            };\r\n                        }\r\n                        timeoutId = null;\r\n                        if (request.timeout) {\r\n                            msTimeout = request.timeout;\r\n                            timeoutId = setTimeout(function () {\r\n                                abortController.abort();\r\n                                _this.logger.log(LogLevel.Warning, \"Timeout from HTTP request.\");\r\n                                error = new TimeoutError();\r\n                            }, msTimeout);\r\n                        }\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, 4, 5]);\r\n                        return [4 /*yield*/, this.fetchType(request.url, {\r\n                                body: request.content,\r\n                                cache: \"no-cache\",\r\n                                credentials: request.withCredentials === true ? \"include\" : \"same-origin\",\r\n                                headers: __assign({ \"Content-Type\": \"text/plain;charset=UTF-8\", \"X-Requested-With\": \"XMLHttpRequest\" }, request.headers),\r\n                                method: request.method,\r\n                                mode: \"cors\",\r\n                                redirect: \"manual\",\r\n                                signal: abortController.signal,\r\n                            })];\r\n                    case 2:\r\n                        response = _a.sent();\r\n                        return [3 /*break*/, 5];\r\n                    case 3:\r\n                        e_1 = _a.sent();\r\n                        if (error) {\r\n                            throw error;\r\n                        }\r\n                        this.logger.log(LogLevel.Warning, \"Error from HTTP request. \" + e_1 + \".\");\r\n                        throw e_1;\r\n                    case 4:\r\n                        if (timeoutId) {\r\n                            clearTimeout(timeoutId);\r\n                        }\r\n                        if (request.abortSignal) {\r\n                            request.abortSignal.onabort = null;\r\n                        }\r\n                        return [7 /*endfinally*/];\r\n                    case 5:\r\n                        if (!response.ok) {\r\n                            throw new HttpError(response.statusText, response.status);\r\n                        }\r\n                        content = deserializeContent(response, request.responseType);\r\n                        return [4 /*yield*/, content];\r\n                    case 6:\r\n                        payload = _a.sent();\r\n                        return [2 /*return*/, new HttpResponse(response.status, response.statusText, payload)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FetchHttpClient.prototype.getCookieString = function (url) {\r\n        var cookies = \"\";\r\n        if (Platform.isNode && this.jar) {\r\n            // @ts-ignore: unused variable\r\n            this.jar.getCookies(url, function (e, c) { return cookies = c.join(\"; \"); });\r\n        }\r\n        return cookies;\r\n    };\r\n    return FetchHttpClient;\r\n}(HttpClient));\r\nexport { FetchHttpClient };\r\nfunction deserializeContent(response, responseType) {\r\n    var content;\r\n    switch (responseType) {\r\n        case \"arraybuffer\":\r\n            content = response.arrayBuffer();\r\n            break;\r\n        case \"text\":\r\n            content = response.text();\r\n            break;\r\n        case \"blob\":\r\n        case \"document\":\r\n        case \"json\":\r\n            throw new Error(responseType + \" is not supported.\");\r\n        default:\r\n            content = response.text();\r\n            break;\r\n    }\r\n    return content;\r\n}\r\n//# sourceMappingURL=FetchHttpClient.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { AbortError, HttpError, TimeoutError } from \"./Errors\";\r\nimport { HttpClient, HttpResponse } from \"./HttpClient\";\r\nimport { LogLevel } from \"./ILogger\";\r\nvar XhrHttpClient = /** @class */ (function (_super) {\r\n    __extends(XhrHttpClient, _super);\r\n    function XhrHttpClient(logger) {\r\n        var _this = _super.call(this) || this;\r\n        _this.logger = logger;\r\n        return _this;\r\n    }\r\n    /** @inheritDoc */\r\n    XhrHttpClient.prototype.send = function (request) {\r\n        var _this = this;\r\n        // Check that abort was not signaled before calling send\r\n        if (request.abortSignal && request.abortSignal.aborted) {\r\n            return Promise.reject(new AbortError());\r\n        }\r\n        if (!request.method) {\r\n            return Promise.reject(new Error(\"No method defined.\"));\r\n        }\r\n        if (!request.url) {\r\n            return Promise.reject(new Error(\"No url defined.\"));\r\n        }\r\n        return new Promise(function (resolve, reject) {\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.open(request.method, request.url, true);\r\n            xhr.withCredentials = request.withCredentials === undefined ? true : request.withCredentials;\r\n            xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n            // Explicitly setting the Content-Type header for React Native on Android platform.\r\n            xhr.setRequestHeader(\"Content-Type\", \"text/plain;charset=UTF-8\");\r\n            var headers = request.headers;\r\n            if (headers) {\r\n                Object.keys(headers)\r\n                    .forEach(function (header) {\r\n                    xhr.setRequestHeader(header, headers[header]);\r\n                });\r\n            }\r\n            if (request.responseType) {\r\n                xhr.responseType = request.responseType;\r\n            }\r\n            if (request.abortSignal) {\r\n                request.abortSignal.onabort = function () {\r\n                    xhr.abort();\r\n                    reject(new AbortError());\r\n                };\r\n            }\r\n            if (request.timeout) {\r\n                xhr.timeout = request.timeout;\r\n            }\r\n            xhr.onload = function () {\r\n                if (request.abortSignal) {\r\n                    request.abortSignal.onabort = null;\r\n                }\r\n                if (xhr.status >= 200 && xhr.status < 300) {\r\n                    resolve(new HttpResponse(xhr.status, xhr.statusText, xhr.response || xhr.responseText));\r\n                }\r\n                else {\r\n                    reject(new HttpError(xhr.statusText, xhr.status));\r\n                }\r\n            };\r\n            xhr.onerror = function () {\r\n                _this.logger.log(LogLevel.Warning, \"Error from HTTP request. \" + xhr.status + \": \" + xhr.statusText + \".\");\r\n                reject(new HttpError(xhr.statusText, xhr.status));\r\n            };\r\n            xhr.ontimeout = function () {\r\n                _this.logger.log(LogLevel.Warning, \"Timeout from HTTP request.\");\r\n                reject(new TimeoutError());\r\n            };\r\n            xhr.send(request.content || \"\");\r\n        });\r\n    };\r\n    return XhrHttpClient;\r\n}(HttpClient));\r\nexport { XhrHttpClient };\r\n//# sourceMappingURL=XhrHttpClient.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { AbortError } from \"./Errors\";\r\nimport { FetchHttpClient } from \"./FetchHttpClient\";\r\nimport { HttpClient } from \"./HttpClient\";\r\nimport { Platform } from \"./Utils\";\r\nimport { XhrHttpClient } from \"./XhrHttpClient\";\r\n/** Default implementation of {@link @microsoft/signalr.HttpClient}. */\r\nvar DefaultHttpClient = /** @class */ (function (_super) {\r\n    __extends(DefaultHttpClient, _super);\r\n    /** Creates a new instance of the {@link @microsoft/signalr.DefaultHttpClient}, using the provided {@link @microsoft/signalr.ILogger} to log messages. */\r\n    function DefaultHttpClient(logger) {\r\n        var _this = _super.call(this) || this;\r\n        if (typeof fetch !== \"undefined\" || Platform.isNode) {\r\n            _this.httpClient = new FetchHttpClient(logger);\r\n        }\r\n        else if (typeof XMLHttpRequest !== \"undefined\") {\r\n            _this.httpClient = new XhrHttpClient(logger);\r\n        }\r\n        else {\r\n            throw new Error(\"No usable HttpClient found.\");\r\n        }\r\n        return _this;\r\n    }\r\n    /** @inheritDoc */\r\n    DefaultHttpClient.prototype.send = function (request) {\r\n        // Check that abort was not signaled before calling send\r\n        if (request.abortSignal && request.abortSignal.aborted) {\r\n            return Promise.reject(new AbortError());\r\n        }\r\n        if (!request.method) {\r\n            return Promise.reject(new Error(\"No method defined.\"));\r\n        }\r\n        if (!request.url) {\r\n            return Promise.reject(new Error(\"No url defined.\"));\r\n        }\r\n        return this.httpClient.send(request);\r\n    };\r\n    DefaultHttpClient.prototype.getCookieString = function (url) {\r\n        return this.httpClient.getCookieString(url);\r\n    };\r\n    return DefaultHttpClient;\r\n}(HttpClient));\r\nexport { DefaultHttpClient };\r\n//# sourceMappingURL=DefaultHttpClient.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n// Not exported from index\r\n/** @private */\r\nvar TextMessageFormat = /** @class */ (function () {\r\n    function TextMessageFormat() {\r\n    }\r\n    TextMessageFormat.write = function (output) {\r\n        return \"\" + output + TextMessageFormat.RecordSeparator;\r\n    };\r\n    TextMessageFormat.parse = function (input) {\r\n        if (input[input.length - 1] !== TextMessageFormat.RecordSeparator) {\r\n            throw new Error(\"Message is incomplete.\");\r\n        }\r\n        var messages = input.split(TextMessageFormat.RecordSeparator);\r\n        messages.pop();\r\n        return messages;\r\n    };\r\n    TextMessageFormat.RecordSeparatorCode = 0x1e;\r\n    TextMessageFormat.RecordSeparator = String.fromCharCode(TextMessageFormat.RecordSeparatorCode);\r\n    return TextMessageFormat;\r\n}());\r\nexport { TextMessageFormat };\r\n//# sourceMappingURL=TextMessageFormat.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nimport { TextMessageFormat } from \"./TextMessageFormat\";\r\nimport { isArrayBuffer } from \"./Utils\";\r\n/** @private */\r\nvar HandshakeProtocol = /** @class */ (function () {\r\n    function HandshakeProtocol() {\r\n    }\r\n    // Handshake request is always JSON\r\n    HandshakeProtocol.prototype.writeHandshakeRequest = function (handshakeRequest) {\r\n        return TextMessageFormat.write(JSON.stringify(handshakeRequest));\r\n    };\r\n    HandshakeProtocol.prototype.parseHandshakeResponse = function (data) {\r\n        var responseMessage;\r\n        var messageData;\r\n        var remainingData;\r\n        if (isArrayBuffer(data) || (typeof Buffer !== \"undefined\" && data instanceof Buffer)) {\r\n            // Format is binary but still need to read JSON text from handshake response\r\n            var binaryData = new Uint8Array(data);\r\n            var separatorIndex = binaryData.indexOf(TextMessageFormat.RecordSeparatorCode);\r\n            if (separatorIndex === -1) {\r\n                throw new Error(\"Message is incomplete.\");\r\n            }\r\n            // content before separator is handshake response\r\n            // optional content after is additional messages\r\n            var responseLength = separatorIndex + 1;\r\n            messageData = String.fromCharCode.apply(null, binaryData.slice(0, responseLength));\r\n            remainingData = (binaryData.byteLength > responseLength) ? binaryData.slice(responseLength).buffer : null;\r\n        }\r\n        else {\r\n            var textData = data;\r\n            var separatorIndex = textData.indexOf(TextMessageFormat.RecordSeparator);\r\n            if (separatorIndex === -1) {\r\n                throw new Error(\"Message is incomplete.\");\r\n            }\r\n            // content before separator is handshake response\r\n            // optional content after is additional messages\r\n            var responseLength = separatorIndex + 1;\r\n            messageData = textData.substring(0, responseLength);\r\n            remainingData = (textData.length > responseLength) ? textData.substring(responseLength) : null;\r\n        }\r\n        // At this point we should have just the single handshake message\r\n        var messages = TextMessageFormat.parse(messageData);\r\n        var response = JSON.parse(messages[0]);\r\n        if (response.type) {\r\n            throw new Error(\"Expected a handshake response from the server.\");\r\n        }\r\n        responseMessage = response;\r\n        // multiple messages could have arrived with handshake\r\n        // return additional data to be parsed as usual, or null if all parsed\r\n        return [remainingData, responseMessage];\r\n    };\r\n    return HandshakeProtocol;\r\n}());\r\nexport { HandshakeProtocol };\r\n//# sourceMappingURL=HandshakeProtocol.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n/** Defines the type of a Hub Message. */\r\nexport var MessageType;\r\n(function (MessageType) {\r\n    /** Indicates the message is an Invocation message and implements the {@link @microsoft/signalr.InvocationMessage} interface. */\r\n    MessageType[MessageType[\"Invocation\"] = 1] = \"Invocation\";\r\n    /** Indicates the message is a StreamItem message and implements the {@link @microsoft/signalr.StreamItemMessage} interface. */\r\n    MessageType[MessageType[\"StreamItem\"] = 2] = \"StreamItem\";\r\n    /** Indicates the message is a Completion message and implements the {@link @microsoft/signalr.CompletionMessage} interface. */\r\n    MessageType[MessageType[\"Completion\"] = 3] = \"Completion\";\r\n    /** Indicates the message is a Stream Invocation message and implements the {@link @microsoft/signalr.StreamInvocationMessage} interface. */\r\n    MessageType[MessageType[\"StreamInvocation\"] = 4] = \"StreamInvocation\";\r\n    /** Indicates the message is a Cancel Invocation message and implements the {@link @microsoft/signalr.CancelInvocationMessage} interface. */\r\n    MessageType[MessageType[\"CancelInvocation\"] = 5] = \"CancelInvocation\";\r\n    /** Indicates the message is a Ping message and implements the {@link @microsoft/signalr.PingMessage} interface. */\r\n    MessageType[MessageType[\"Ping\"] = 6] = \"Ping\";\r\n    /** Indicates the message is a Close message and implements the {@link @microsoft/signalr.CloseMessage} interface. */\r\n    MessageType[MessageType[\"Close\"] = 7] = \"Close\";\r\n})(MessageType || (MessageType = {}));\r\n//# sourceMappingURL=IHubProtocol.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nimport { SubjectSubscription } from \"./Utils\";\r\n/** Stream implementation to stream items to the server. */\r\nvar Subject = /** @class */ (function () {\r\n    function Subject() {\r\n        this.observers = [];\r\n    }\r\n    Subject.prototype.next = function (item) {\r\n        for (var _i = 0, _a = this.observers; _i < _a.length; _i++) {\r\n            var observer = _a[_i];\r\n            observer.next(item);\r\n        }\r\n    };\r\n    Subject.prototype.error = function (err) {\r\n        for (var _i = 0, _a = this.observers; _i < _a.length; _i++) {\r\n            var observer = _a[_i];\r\n            if (observer.error) {\r\n                observer.error(err);\r\n            }\r\n        }\r\n    };\r\n    Subject.prototype.complete = function () {\r\n        for (var _i = 0, _a = this.observers; _i < _a.length; _i++) {\r\n            var observer = _a[_i];\r\n            if (observer.complete) {\r\n                observer.complete();\r\n            }\r\n        }\r\n    };\r\n    Subject.prototype.subscribe = function (observer) {\r\n        this.observers.push(observer);\r\n        return new SubjectSubscription(this, observer);\r\n    };\r\n    return Subject;\r\n}());\r\nexport { Subject };\r\n//# sourceMappingURL=Subject.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { HandshakeProtocol } from \"./HandshakeProtocol\";\r\nimport { MessageType } from \"./IHubProtocol\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { Subject } from \"./Subject\";\r\nimport { Arg } from \"./Utils\";\r\nvar DEFAULT_TIMEOUT_IN_MS = 30 * 1000;\r\nvar DEFAULT_PING_INTERVAL_IN_MS = 15 * 1000;\r\n/** Describes the current state of the {@link HubConnection} to the server. */\r\nexport var HubConnectionState;\r\n(function (HubConnectionState) {\r\n    /** The hub connection is disconnected. */\r\n    HubConnectionState[\"Disconnected\"] = \"Disconnected\";\r\n    /** The hub connection is connecting. */\r\n    HubConnectionState[\"Connecting\"] = \"Connecting\";\r\n    /** The hub connection is connected. */\r\n    HubConnectionState[\"Connected\"] = \"Connected\";\r\n    /** The hub connection is disconnecting. */\r\n    HubConnectionState[\"Disconnecting\"] = \"Disconnecting\";\r\n    /** The hub connection is reconnecting. */\r\n    HubConnectionState[\"Reconnecting\"] = \"Reconnecting\";\r\n})(HubConnectionState || (HubConnectionState = {}));\r\n/** Represents a connection to a SignalR Hub. */\r\nvar HubConnection = /** @class */ (function () {\r\n    function HubConnection(connection, logger, protocol, reconnectPolicy) {\r\n        var _this = this;\r\n        Arg.isRequired(connection, \"connection\");\r\n        Arg.isRequired(logger, \"logger\");\r\n        Arg.isRequired(protocol, \"protocol\");\r\n        this.serverTimeoutInMilliseconds = DEFAULT_TIMEOUT_IN_MS;\r\n        this.keepAliveIntervalInMilliseconds = DEFAULT_PING_INTERVAL_IN_MS;\r\n        this.logger = logger;\r\n        this.protocol = protocol;\r\n        this.connection = connection;\r\n        this.reconnectPolicy = reconnectPolicy;\r\n        this.handshakeProtocol = new HandshakeProtocol();\r\n        this.connection.onreceive = function (data) { return _this.processIncomingData(data); };\r\n        this.connection.onclose = function (error) { return _this.connectionClosed(error); };\r\n        this.callbacks = {};\r\n        this.methods = {};\r\n        this.closedCallbacks = [];\r\n        this.reconnectingCallbacks = [];\r\n        this.reconnectedCallbacks = [];\r\n        this.invocationId = 0;\r\n        this.receivedHandshakeResponse = false;\r\n        this.connectionState = HubConnectionState.Disconnected;\r\n        this.connectionStarted = false;\r\n        this.cachedPingMessage = this.protocol.writeMessage({ type: MessageType.Ping });\r\n    }\r\n    /** @internal */\r\n    // Using a public static factory method means we can have a private constructor and an _internal_\r\n    // create method that can be used by HubConnectionBuilder. An \"internal\" constructor would just\r\n    // be stripped away and the '.d.ts' file would have no constructor, which is interpreted as a\r\n    // public parameter-less constructor.\r\n    HubConnection.create = function (connection, logger, protocol, reconnectPolicy) {\r\n        return new HubConnection(connection, logger, protocol, reconnectPolicy);\r\n    };\r\n    Object.defineProperty(HubConnection.prototype, \"state\", {\r\n        /** Indicates the state of the {@link HubConnection} to the server. */\r\n        get: function () {\r\n            return this.connectionState;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HubConnection.prototype, \"connectionId\", {\r\n        /** Represents the connection id of the {@link HubConnection} on the server. The connection id will be null when the connection is either\r\n         *  in the disconnected state or if the negotiation step was skipped.\r\n         */\r\n        get: function () {\r\n            return this.connection ? (this.connection.connectionId || null) : null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HubConnection.prototype, \"baseUrl\", {\r\n        /** Indicates the url of the {@link HubConnection} to the server. */\r\n        get: function () {\r\n            return this.connection.baseUrl || \"\";\r\n        },\r\n        /**\r\n         * Sets a new url for the HubConnection. Note that the url can only be changed when the connection is in either the Disconnected or\r\n         * Reconnecting states.\r\n         * @param {string} url The url to connect to.\r\n         */\r\n        set: function (url) {\r\n            if (this.connectionState !== HubConnectionState.Disconnected && this.connectionState !== HubConnectionState.Reconnecting) {\r\n                throw new Error(\"The HubConnection must be in the Disconnected or Reconnecting state to change the url.\");\r\n            }\r\n            if (!url) {\r\n                throw new Error(\"The HubConnection url must be a valid url.\");\r\n            }\r\n            this.connection.baseUrl = url;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /** Starts the connection.\r\n     *\r\n     * @returns {Promise<void>} A Promise that resolves when the connection has been successfully established, or rejects with an error.\r\n     */\r\n    HubConnection.prototype.start = function () {\r\n        this.startPromise = this.startWithStateTransitions();\r\n        return this.startPromise;\r\n    };\r\n    HubConnection.prototype.startWithStateTransitions = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.connectionState !== HubConnectionState.Disconnected) {\r\n                            return [2 /*return*/, Promise.reject(new Error(\"Cannot start a HubConnection that is not in the 'Disconnected' state.\"))];\r\n                        }\r\n                        this.connectionState = HubConnectionState.Connecting;\r\n                        this.logger.log(LogLevel.Debug, \"Starting HubConnection.\");\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, this.startInternal()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        this.connectionState = HubConnectionState.Connected;\r\n                        this.connectionStarted = true;\r\n                        this.logger.log(LogLevel.Debug, \"HubConnection connected successfully.\");\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        e_1 = _a.sent();\r\n                        this.connectionState = HubConnectionState.Disconnected;\r\n                        this.logger.log(LogLevel.Debug, \"HubConnection failed to start successfully because of error '\" + e_1 + \"'.\");\r\n                        return [2 /*return*/, Promise.reject(e_1)];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HubConnection.prototype.startInternal = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var handshakePromise, handshakeRequest, e_2;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.stopDuringStartError = undefined;\r\n                        this.receivedHandshakeResponse = false;\r\n                        handshakePromise = new Promise(function (resolve, reject) {\r\n                            _this.handshakeResolver = resolve;\r\n                            _this.handshakeRejecter = reject;\r\n                        });\r\n                        return [4 /*yield*/, this.connection.start(this.protocol.transferFormat)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        _a.trys.push([2, 5, , 7]);\r\n                        handshakeRequest = {\r\n                            protocol: this.protocol.name,\r\n                            version: this.protocol.version,\r\n                        };\r\n                        this.logger.log(LogLevel.Debug, \"Sending handshake request.\");\r\n                        return [4 /*yield*/, this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(handshakeRequest))];\r\n                    case 3:\r\n                        _a.sent();\r\n                        this.logger.log(LogLevel.Information, \"Using HubProtocol '\" + this.protocol.name + \"'.\");\r\n                        // defensively cleanup timeout in case we receive a message from the server before we finish start\r\n                        this.cleanupTimeout();\r\n                        this.resetTimeoutPeriod();\r\n                        this.resetKeepAliveInterval();\r\n                        return [4 /*yield*/, handshakePromise];\r\n                    case 4:\r\n                        _a.sent();\r\n                        // It's important to check the stopDuringStartError instead of just relying on the handshakePromise\r\n                        // being rejected on close, because this continuation can run after both the handshake completed successfully\r\n                        // and the connection was closed.\r\n                        if (this.stopDuringStartError) {\r\n                            // It's important to throw instead of returning a rejected promise, because we don't want to allow any state\r\n                            // transitions to occur between now and the calling code observing the exceptions. Returning a rejected promise\r\n                            // will cause the calling continuation to get scheduled to run later.\r\n                            throw this.stopDuringStartError;\r\n                        }\r\n                        return [3 /*break*/, 7];\r\n                    case 5:\r\n                        e_2 = _a.sent();\r\n                        this.logger.log(LogLevel.Debug, \"Hub handshake failed with error '\" + e_2 + \"' during start(). Stopping HubConnection.\");\r\n                        this.cleanupTimeout();\r\n                        this.cleanupPingTimer();\r\n                        // HttpConnection.stop() should not complete until after the onclose callback is invoked.\r\n                        // This will transition the HubConnection to the disconnected state before HttpConnection.stop() completes.\r\n                        return [4 /*yield*/, this.connection.stop(e_2)];\r\n                    case 6:\r\n                        // HttpConnection.stop() should not complete until after the onclose callback is invoked.\r\n                        // This will transition the HubConnection to the disconnected state before HttpConnection.stop() completes.\r\n                        _a.sent();\r\n                        throw e_2;\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /** Stops the connection.\r\n     *\r\n     * @returns {Promise<void>} A Promise that resolves when the connection has been successfully terminated, or rejects with an error.\r\n     */\r\n    HubConnection.prototype.stop = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var startPromise, e_3;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        startPromise = this.startPromise;\r\n                        this.stopPromise = this.stopInternal();\r\n                        return [4 /*yield*/, this.stopPromise];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        _a.trys.push([2, 4, , 5]);\r\n                        // Awaiting undefined continues immediately\r\n                        return [4 /*yield*/, startPromise];\r\n                    case 3:\r\n                        // Awaiting undefined continues immediately\r\n                        _a.sent();\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        e_3 = _a.sent();\r\n                        return [3 /*break*/, 5];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HubConnection.prototype.stopInternal = function (error) {\r\n        if (this.connectionState === HubConnectionState.Disconnected) {\r\n            this.logger.log(LogLevel.Debug, \"Call to HubConnection.stop(\" + error + \") ignored because it is already in the disconnected state.\");\r\n            return Promise.resolve();\r\n        }\r\n        if (this.connectionState === HubConnectionState.Disconnecting) {\r\n            this.logger.log(LogLevel.Debug, \"Call to HttpConnection.stop(\" + error + \") ignored because the connection is already in the disconnecting state.\");\r\n            return this.stopPromise;\r\n        }\r\n        this.connectionState = HubConnectionState.Disconnecting;\r\n        this.logger.log(LogLevel.Debug, \"Stopping HubConnection.\");\r\n        if (this.reconnectDelayHandle) {\r\n            // We're in a reconnect delay which means the underlying connection is currently already stopped.\r\n            // Just clear the handle to stop the reconnect loop (which no one is waiting on thankfully) and\r\n            // fire the onclose callbacks.\r\n            this.logger.log(LogLevel.Debug, \"Connection stopped during reconnect delay. Done reconnecting.\");\r\n            clearTimeout(this.reconnectDelayHandle);\r\n            this.reconnectDelayHandle = undefined;\r\n            this.completeClose();\r\n            return Promise.resolve();\r\n        }\r\n        this.cleanupTimeout();\r\n        this.cleanupPingTimer();\r\n        this.stopDuringStartError = error || new Error(\"The connection was stopped before the hub handshake could complete.\");\r\n        // HttpConnection.stop() should not complete until after either HttpConnection.start() fails\r\n        // or the onclose callback is invoked. The onclose callback will transition the HubConnection\r\n        // to the disconnected state if need be before HttpConnection.stop() completes.\r\n        return this.connection.stop(error);\r\n    };\r\n    /** Invokes a streaming hub method on the server using the specified name and arguments.\r\n     *\r\n     * @typeparam T The type of the items returned by the server.\r\n     * @param {string} methodName The name of the server method to invoke.\r\n     * @param {any[]} args The arguments used to invoke the server method.\r\n     * @returns {IStreamResult<T>} An object that yields results from the server as they are received.\r\n     */\r\n    HubConnection.prototype.stream = function (methodName) {\r\n        var _this = this;\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var _a = this.replaceStreamingParams(args), streams = _a[0], streamIds = _a[1];\r\n        var invocationDescriptor = this.createStreamInvocation(methodName, args, streamIds);\r\n        var promiseQueue;\r\n        var subject = new Subject();\r\n        subject.cancelCallback = function () {\r\n            var cancelInvocation = _this.createCancelInvocation(invocationDescriptor.invocationId);\r\n            delete _this.callbacks[invocationDescriptor.invocationId];\r\n            return promiseQueue.then(function () {\r\n                return _this.sendWithProtocol(cancelInvocation);\r\n            });\r\n        };\r\n        this.callbacks[invocationDescriptor.invocationId] = function (invocationEvent, error) {\r\n            if (error) {\r\n                subject.error(error);\r\n                return;\r\n            }\r\n            else if (invocationEvent) {\r\n                // invocationEvent will not be null when an error is not passed to the callback\r\n                if (invocationEvent.type === MessageType.Completion) {\r\n                    if (invocationEvent.error) {\r\n                        subject.error(new Error(invocationEvent.error));\r\n                    }\r\n                    else {\r\n                        subject.complete();\r\n                    }\r\n                }\r\n                else {\r\n                    subject.next((invocationEvent.item));\r\n                }\r\n            }\r\n        };\r\n        promiseQueue = this.sendWithProtocol(invocationDescriptor)\r\n            .catch(function (e) {\r\n            subject.error(e);\r\n            delete _this.callbacks[invocationDescriptor.invocationId];\r\n        });\r\n        this.launchStreams(streams, promiseQueue);\r\n        return subject;\r\n    };\r\n    HubConnection.prototype.sendMessage = function (message) {\r\n        this.resetKeepAliveInterval();\r\n        return this.connection.send(message);\r\n    };\r\n    /**\r\n     * Sends a js object to the server.\r\n     * @param message The js object to serialize and send.\r\n     */\r\n    HubConnection.prototype.sendWithProtocol = function (message) {\r\n        return this.sendMessage(this.protocol.writeMessage(message));\r\n    };\r\n    /** Invokes a hub method on the server using the specified name and arguments. Does not wait for a response from the receiver.\r\n     *\r\n     * The Promise returned by this method resolves when the client has sent the invocation to the server. The server may still\r\n     * be processing the invocation.\r\n     *\r\n     * @param {string} methodName The name of the server method to invoke.\r\n     * @param {any[]} args The arguments used to invoke the server method.\r\n     * @returns {Promise<void>} A Promise that resolves when the invocation has been successfully sent, or rejects with an error.\r\n     */\r\n    HubConnection.prototype.send = function (methodName) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var _a = this.replaceStreamingParams(args), streams = _a[0], streamIds = _a[1];\r\n        var sendPromise = this.sendWithProtocol(this.createInvocation(methodName, args, true, streamIds));\r\n        this.launchStreams(streams, sendPromise);\r\n        return sendPromise;\r\n    };\r\n    /** Invokes a hub method on the server using the specified name and arguments.\r\n     *\r\n     * The Promise returned by this method resolves when the server indicates it has finished invoking the method. When the promise\r\n     * resolves, the server has finished invoking the method. If the server method returns a result, it is produced as the result of\r\n     * resolving the Promise.\r\n     *\r\n     * @typeparam T The expected return type.\r\n     * @param {string} methodName The name of the server method to invoke.\r\n     * @param {any[]} args The arguments used to invoke the server method.\r\n     * @returns {Promise<T>} A Promise that resolves with the result of the server method (if any), or rejects with an error.\r\n     */\r\n    HubConnection.prototype.invoke = function (methodName) {\r\n        var _this = this;\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var _a = this.replaceStreamingParams(args), streams = _a[0], streamIds = _a[1];\r\n        var invocationDescriptor = this.createInvocation(methodName, args, false, streamIds);\r\n        var p = new Promise(function (resolve, reject) {\r\n            // invocationId will always have a value for a non-blocking invocation\r\n            _this.callbacks[invocationDescriptor.invocationId] = function (invocationEvent, error) {\r\n                if (error) {\r\n                    reject(error);\r\n                    return;\r\n                }\r\n                else if (invocationEvent) {\r\n                    // invocationEvent will not be null when an error is not passed to the callback\r\n                    if (invocationEvent.type === MessageType.Completion) {\r\n                        if (invocationEvent.error) {\r\n                            reject(new Error(invocationEvent.error));\r\n                        }\r\n                        else {\r\n                            resolve(invocationEvent.result);\r\n                        }\r\n                    }\r\n                    else {\r\n                        reject(new Error(\"Unexpected message type: \" + invocationEvent.type));\r\n                    }\r\n                }\r\n            };\r\n            var promiseQueue = _this.sendWithProtocol(invocationDescriptor)\r\n                .catch(function (e) {\r\n                reject(e);\r\n                // invocationId will always have a value for a non-blocking invocation\r\n                delete _this.callbacks[invocationDescriptor.invocationId];\r\n            });\r\n            _this.launchStreams(streams, promiseQueue);\r\n        });\r\n        return p;\r\n    };\r\n    /** Registers a handler that will be invoked when the hub method with the specified method name is invoked.\r\n     *\r\n     * @param {string} methodName The name of the hub method to define.\r\n     * @param {Function} newMethod The handler that will be raised when the hub method is invoked.\r\n     */\r\n    HubConnection.prototype.on = function (methodName, newMethod) {\r\n        if (!methodName || !newMethod) {\r\n            return;\r\n        }\r\n        methodName = methodName.toLowerCase();\r\n        if (!this.methods[methodName]) {\r\n            this.methods[methodName] = [];\r\n        }\r\n        // Preventing adding the same handler multiple times.\r\n        if (this.methods[methodName].indexOf(newMethod) !== -1) {\r\n            return;\r\n        }\r\n        this.methods[methodName].push(newMethod);\r\n    };\r\n    HubConnection.prototype.off = function (methodName, method) {\r\n        if (!methodName) {\r\n            return;\r\n        }\r\n        methodName = methodName.toLowerCase();\r\n        var handlers = this.methods[methodName];\r\n        if (!handlers) {\r\n            return;\r\n        }\r\n        if (method) {\r\n            var removeIdx = handlers.indexOf(method);\r\n            if (removeIdx !== -1) {\r\n                handlers.splice(removeIdx, 1);\r\n                if (handlers.length === 0) {\r\n                    delete this.methods[methodName];\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            delete this.methods[methodName];\r\n        }\r\n    };\r\n    /** Registers a handler that will be invoked when the connection is closed.\r\n     *\r\n     * @param {Function} callback The handler that will be invoked when the connection is closed. Optionally receives a single argument containing the error that caused the connection to close (if any).\r\n     */\r\n    HubConnection.prototype.onclose = function (callback) {\r\n        if (callback) {\r\n            this.closedCallbacks.push(callback);\r\n        }\r\n    };\r\n    /** Registers a handler that will be invoked when the connection starts reconnecting.\r\n     *\r\n     * @param {Function} callback The handler that will be invoked when the connection starts reconnecting. Optionally receives a single argument containing the error that caused the connection to start reconnecting (if any).\r\n     */\r\n    HubConnection.prototype.onreconnecting = function (callback) {\r\n        if (callback) {\r\n            this.reconnectingCallbacks.push(callback);\r\n        }\r\n    };\r\n    /** Registers a handler that will be invoked when the connection successfully reconnects.\r\n     *\r\n     * @param {Function} callback The handler that will be invoked when the connection successfully reconnects.\r\n     */\r\n    HubConnection.prototype.onreconnected = function (callback) {\r\n        if (callback) {\r\n            this.reconnectedCallbacks.push(callback);\r\n        }\r\n    };\r\n    HubConnection.prototype.processIncomingData = function (data) {\r\n        this.cleanupTimeout();\r\n        if (!this.receivedHandshakeResponse) {\r\n            data = this.processHandshakeResponse(data);\r\n            this.receivedHandshakeResponse = true;\r\n        }\r\n        // Data may have all been read when processing handshake response\r\n        if (data) {\r\n            // Parse the messages\r\n            var messages = this.protocol.parseMessages(data, this.logger);\r\n            for (var _i = 0, messages_1 = messages; _i < messages_1.length; _i++) {\r\n                var message = messages_1[_i];\r\n                switch (message.type) {\r\n                    case MessageType.Invocation:\r\n                        this.invokeClientMethod(message);\r\n                        break;\r\n                    case MessageType.StreamItem:\r\n                    case MessageType.Completion:\r\n                        var callback = this.callbacks[message.invocationId];\r\n                        if (callback) {\r\n                            if (message.type === MessageType.Completion) {\r\n                                delete this.callbacks[message.invocationId];\r\n                            }\r\n                            callback(message);\r\n                        }\r\n                        break;\r\n                    case MessageType.Ping:\r\n                        // Don't care about pings\r\n                        break;\r\n                    case MessageType.Close:\r\n                        this.logger.log(LogLevel.Information, \"Close message received from server.\");\r\n                        var error = message.error ? new Error(\"Server returned an error on close: \" + message.error) : undefined;\r\n                        if (message.allowReconnect === true) {\r\n                            // It feels wrong not to await connection.stop() here, but processIncomingData is called as part of an onreceive callback which is not async,\r\n                            // this is already the behavior for serverTimeout(), and HttpConnection.Stop() should catch and log all possible exceptions.\r\n                            // tslint:disable-next-line:no-floating-promises\r\n                            this.connection.stop(error);\r\n                        }\r\n                        else {\r\n                            // We cannot await stopInternal() here, but subsequent calls to stop() will await this if stopInternal() is still ongoing.\r\n                            this.stopPromise = this.stopInternal(error);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        this.logger.log(LogLevel.Warning, \"Invalid message type: \" + message.type + \".\");\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n        this.resetTimeoutPeriod();\r\n    };\r\n    HubConnection.prototype.processHandshakeResponse = function (data) {\r\n        var _a;\r\n        var responseMessage;\r\n        var remainingData;\r\n        try {\r\n            _a = this.handshakeProtocol.parseHandshakeResponse(data), remainingData = _a[0], responseMessage = _a[1];\r\n        }\r\n        catch (e) {\r\n            var message = \"Error parsing handshake response: \" + e;\r\n            this.logger.log(LogLevel.Error, message);\r\n            var error = new Error(message);\r\n            this.handshakeRejecter(error);\r\n            throw error;\r\n        }\r\n        if (responseMessage.error) {\r\n            var message = \"Server returned handshake error: \" + responseMessage.error;\r\n            this.logger.log(LogLevel.Error, message);\r\n            var error = new Error(message);\r\n            this.handshakeRejecter(error);\r\n            throw error;\r\n        }\r\n        else {\r\n            this.logger.log(LogLevel.Debug, \"Server handshake complete.\");\r\n        }\r\n        this.handshakeResolver();\r\n        return remainingData;\r\n    };\r\n    HubConnection.prototype.resetKeepAliveInterval = function () {\r\n        var _this = this;\r\n        if (this.connection.features.inherentKeepAlive) {\r\n            return;\r\n        }\r\n        this.cleanupPingTimer();\r\n        this.pingServerHandle = setTimeout(function () { return __awaiter(_this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (!(this.connectionState === HubConnectionState.Connected)) return [3 /*break*/, 4];\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, this.sendMessage(this.cachedPingMessage)];\r\n                    case 2:\r\n                        _b.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        _a = _b.sent();\r\n                        // We don't care about the error. It should be seen elsewhere in the client.\r\n                        // The connection is probably in a bad or closed state now, cleanup the timer so it stops triggering\r\n                        this.cleanupPingTimer();\r\n                        return [3 /*break*/, 4];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        }); }, this.keepAliveIntervalInMilliseconds);\r\n    };\r\n    HubConnection.prototype.resetTimeoutPeriod = function () {\r\n        var _this = this;\r\n        if (!this.connection.features || !this.connection.features.inherentKeepAlive) {\r\n            // Set the timeout timer\r\n            this.timeoutHandle = setTimeout(function () { return _this.serverTimeout(); }, this.serverTimeoutInMilliseconds);\r\n        }\r\n    };\r\n    HubConnection.prototype.serverTimeout = function () {\r\n        // The server hasn't talked to us in a while. It doesn't like us anymore ... :(\r\n        // Terminate the connection, but we don't need to wait on the promise. This could trigger reconnecting.\r\n        // tslint:disable-next-line:no-floating-promises\r\n        this.connection.stop(new Error(\"Server timeout elapsed without receiving a message from the server.\"));\r\n    };\r\n    HubConnection.prototype.invokeClientMethod = function (invocationMessage) {\r\n        var _this = this;\r\n        var methods = this.methods[invocationMessage.target.toLowerCase()];\r\n        if (methods) {\r\n            try {\r\n                methods.forEach(function (m) { return m.apply(_this, invocationMessage.arguments); });\r\n            }\r\n            catch (e) {\r\n                this.logger.log(LogLevel.Error, \"A callback for the method \" + invocationMessage.target.toLowerCase() + \" threw error '\" + e + \"'.\");\r\n            }\r\n            if (invocationMessage.invocationId) {\r\n                // This is not supported in v1. So we return an error to avoid blocking the server waiting for the response.\r\n                var message = \"Server requested a response, which is not supported in this version of the client.\";\r\n                this.logger.log(LogLevel.Error, message);\r\n                // We don't want to wait on the stop itself.\r\n                this.stopPromise = this.stopInternal(new Error(message));\r\n            }\r\n        }\r\n        else {\r\n            this.logger.log(LogLevel.Warning, \"No client method with the name '\" + invocationMessage.target + \"' found.\");\r\n        }\r\n    };\r\n    HubConnection.prototype.connectionClosed = function (error) {\r\n        this.logger.log(LogLevel.Debug, \"HubConnection.connectionClosed(\" + error + \") called while in state \" + this.connectionState + \".\");\r\n        // Triggering this.handshakeRejecter is insufficient because it could already be resolved without the continuation having run yet.\r\n        this.stopDuringStartError = this.stopDuringStartError || error || new Error(\"The underlying connection was closed before the hub handshake could complete.\");\r\n        // If the handshake is in progress, start will be waiting for the handshake promise, so we complete it.\r\n        // If it has already completed, this should just noop.\r\n        if (this.handshakeResolver) {\r\n            this.handshakeResolver();\r\n        }\r\n        this.cancelCallbacksWithError(error || new Error(\"Invocation canceled due to the underlying connection being closed.\"));\r\n        this.cleanupTimeout();\r\n        this.cleanupPingTimer();\r\n        if (this.connectionState === HubConnectionState.Disconnecting) {\r\n            this.completeClose(error);\r\n        }\r\n        else if (this.connectionState === HubConnectionState.Connected && this.reconnectPolicy) {\r\n            // tslint:disable-next-line:no-floating-promises\r\n            this.reconnect(error);\r\n        }\r\n        else if (this.connectionState === HubConnectionState.Connected) {\r\n            this.completeClose(error);\r\n        }\r\n        // If none of the above if conditions were true were called the HubConnection must be in either:\r\n        // 1. The Connecting state in which case the handshakeResolver will complete it and stopDuringStartError will fail it.\r\n        // 2. The Reconnecting state in which case the handshakeResolver will complete it and stopDuringStartError will fail the current reconnect attempt\r\n        //    and potentially continue the reconnect() loop.\r\n        // 3. The Disconnected state in which case we're already done.\r\n    };\r\n    HubConnection.prototype.completeClose = function (error) {\r\n        var _this = this;\r\n        if (this.connectionStarted) {\r\n            this.connectionState = HubConnectionState.Disconnected;\r\n            this.connectionStarted = false;\r\n            try {\r\n                this.closedCallbacks.forEach(function (c) { return c.apply(_this, [error]); });\r\n            }\r\n            catch (e) {\r\n                this.logger.log(LogLevel.Error, \"An onclose callback called with error '\" + error + \"' threw error '\" + e + \"'.\");\r\n            }\r\n        }\r\n    };\r\n    HubConnection.prototype.reconnect = function (error) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var reconnectStartTime, previousReconnectAttempts, retryError, nextRetryDelay, e_4;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        reconnectStartTime = Date.now();\r\n                        previousReconnectAttempts = 0;\r\n                        retryError = error !== undefined ? error : new Error(\"Attempting to reconnect due to a unknown error.\");\r\n                        nextRetryDelay = this.getNextRetryDelay(previousReconnectAttempts++, 0, retryError);\r\n                        if (nextRetryDelay === null) {\r\n                            this.logger.log(LogLevel.Debug, \"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt.\");\r\n                            this.completeClose(error);\r\n                            return [2 /*return*/];\r\n                        }\r\n                        this.connectionState = HubConnectionState.Reconnecting;\r\n                        if (error) {\r\n                            this.logger.log(LogLevel.Information, \"Connection reconnecting because of error '\" + error + \"'.\");\r\n                        }\r\n                        else {\r\n                            this.logger.log(LogLevel.Information, \"Connection reconnecting.\");\r\n                        }\r\n                        if (this.onreconnecting) {\r\n                            try {\r\n                                this.reconnectingCallbacks.forEach(function (c) { return c.apply(_this, [error]); });\r\n                            }\r\n                            catch (e) {\r\n                                this.logger.log(LogLevel.Error, \"An onreconnecting callback called with error '\" + error + \"' threw error '\" + e + \"'.\");\r\n                            }\r\n                            // Exit early if an onreconnecting callback called connection.stop().\r\n                            if (this.connectionState !== HubConnectionState.Reconnecting) {\r\n                                this.logger.log(LogLevel.Debug, \"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.\");\r\n                                return [2 /*return*/];\r\n                            }\r\n                        }\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        if (!(nextRetryDelay !== null)) return [3 /*break*/, 7];\r\n                        this.logger.log(LogLevel.Information, \"Reconnect attempt number \" + previousReconnectAttempts + \" will start in \" + nextRetryDelay + \" ms.\");\r\n                        return [4 /*yield*/, new Promise(function (resolve) {\r\n                                _this.reconnectDelayHandle = setTimeout(resolve, nextRetryDelay);\r\n                            })];\r\n                    case 2:\r\n                        _a.sent();\r\n                        this.reconnectDelayHandle = undefined;\r\n                        if (this.connectionState !== HubConnectionState.Reconnecting) {\r\n                            this.logger.log(LogLevel.Debug, \"Connection left the reconnecting state during reconnect delay. Done reconnecting.\");\r\n                            return [2 /*return*/];\r\n                        }\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        _a.trys.push([3, 5, , 6]);\r\n                        return [4 /*yield*/, this.startInternal()];\r\n                    case 4:\r\n                        _a.sent();\r\n                        this.connectionState = HubConnectionState.Connected;\r\n                        this.logger.log(LogLevel.Information, \"HubConnection reconnected successfully.\");\r\n                        if (this.onreconnected) {\r\n                            try {\r\n                                this.reconnectedCallbacks.forEach(function (c) { return c.apply(_this, [_this.connection.connectionId]); });\r\n                            }\r\n                            catch (e) {\r\n                                this.logger.log(LogLevel.Error, \"An onreconnected callback called with connectionId '\" + this.connection.connectionId + \"; threw error '\" + e + \"'.\");\r\n                            }\r\n                        }\r\n                        return [2 /*return*/];\r\n                    case 5:\r\n                        e_4 = _a.sent();\r\n                        this.logger.log(LogLevel.Information, \"Reconnect attempt failed because of error '\" + e_4 + \"'.\");\r\n                        if (this.connectionState !== HubConnectionState.Reconnecting) {\r\n                            this.logger.log(LogLevel.Debug, \"Connection left the reconnecting state during reconnect attempt. Done reconnecting.\");\r\n                            return [2 /*return*/];\r\n                        }\r\n                        retryError = e_4 instanceof Error ? e_4 : new Error(e_4.toString());\r\n                        nextRetryDelay = this.getNextRetryDelay(previousReconnectAttempts++, Date.now() - reconnectStartTime, retryError);\r\n                        return [3 /*break*/, 6];\r\n                    case 6: return [3 /*break*/, 1];\r\n                    case 7:\r\n                        this.logger.log(LogLevel.Information, \"Reconnect retries have been exhausted after \" + (Date.now() - reconnectStartTime) + \" ms and \" + previousReconnectAttempts + \" failed attempts. Connection disconnecting.\");\r\n                        this.completeClose();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HubConnection.prototype.getNextRetryDelay = function (previousRetryCount, elapsedMilliseconds, retryReason) {\r\n        try {\r\n            return this.reconnectPolicy.nextRetryDelayInMilliseconds({\r\n                elapsedMilliseconds: elapsedMilliseconds,\r\n                previousRetryCount: previousRetryCount,\r\n                retryReason: retryReason,\r\n            });\r\n        }\r\n        catch (e) {\r\n            this.logger.log(LogLevel.Error, \"IRetryPolicy.nextRetryDelayInMilliseconds(\" + previousRetryCount + \", \" + elapsedMilliseconds + \") threw error '\" + e + \"'.\");\r\n            return null;\r\n        }\r\n    };\r\n    HubConnection.prototype.cancelCallbacksWithError = function (error) {\r\n        var callbacks = this.callbacks;\r\n        this.callbacks = {};\r\n        Object.keys(callbacks)\r\n            .forEach(function (key) {\r\n            var callback = callbacks[key];\r\n            callback(null, error);\r\n        });\r\n    };\r\n    HubConnection.prototype.cleanupPingTimer = function () {\r\n        if (this.pingServerHandle) {\r\n            clearTimeout(this.pingServerHandle);\r\n        }\r\n    };\r\n    HubConnection.prototype.cleanupTimeout = function () {\r\n        if (this.timeoutHandle) {\r\n            clearTimeout(this.timeoutHandle);\r\n        }\r\n    };\r\n    HubConnection.prototype.createInvocation = function (methodName, args, nonblocking, streamIds) {\r\n        if (nonblocking) {\r\n            if (streamIds.length !== 0) {\r\n                return {\r\n                    arguments: args,\r\n                    streamIds: streamIds,\r\n                    target: methodName,\r\n                    type: MessageType.Invocation,\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    arguments: args,\r\n                    target: methodName,\r\n                    type: MessageType.Invocation,\r\n                };\r\n            }\r\n        }\r\n        else {\r\n            var invocationId = this.invocationId;\r\n            this.invocationId++;\r\n            if (streamIds.length !== 0) {\r\n                return {\r\n                    arguments: args,\r\n                    invocationId: invocationId.toString(),\r\n                    streamIds: streamIds,\r\n                    target: methodName,\r\n                    type: MessageType.Invocation,\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    arguments: args,\r\n                    invocationId: invocationId.toString(),\r\n                    target: methodName,\r\n                    type: MessageType.Invocation,\r\n                };\r\n            }\r\n        }\r\n    };\r\n    HubConnection.prototype.launchStreams = function (streams, promiseQueue) {\r\n        var _this = this;\r\n        if (streams.length === 0) {\r\n            return;\r\n        }\r\n        // Synchronize stream data so they arrive in-order on the server\r\n        if (!promiseQueue) {\r\n            promiseQueue = Promise.resolve();\r\n        }\r\n        var _loop_1 = function (streamId) {\r\n            streams[streamId].subscribe({\r\n                complete: function () {\r\n                    promiseQueue = promiseQueue.then(function () { return _this.sendWithProtocol(_this.createCompletionMessage(streamId)); });\r\n                },\r\n                error: function (err) {\r\n                    var message;\r\n                    if (err instanceof Error) {\r\n                        message = err.message;\r\n                    }\r\n                    else if (err && err.toString) {\r\n                        message = err.toString();\r\n                    }\r\n                    else {\r\n                        message = \"Unknown error\";\r\n                    }\r\n                    promiseQueue = promiseQueue.then(function () { return _this.sendWithProtocol(_this.createCompletionMessage(streamId, message)); });\r\n                },\r\n                next: function (item) {\r\n                    promiseQueue = promiseQueue.then(function () { return _this.sendWithProtocol(_this.createStreamItemMessage(streamId, item)); });\r\n                },\r\n            });\r\n        };\r\n        // We want to iterate over the keys, since the keys are the stream ids\r\n        // tslint:disable-next-line:forin\r\n        for (var streamId in streams) {\r\n            _loop_1(streamId);\r\n        }\r\n    };\r\n    HubConnection.prototype.replaceStreamingParams = function (args) {\r\n        var streams = [];\r\n        var streamIds = [];\r\n        for (var i = 0; i < args.length; i++) {\r\n            var argument = args[i];\r\n            if (this.isObservable(argument)) {\r\n                var streamId = this.invocationId;\r\n                this.invocationId++;\r\n                // Store the stream for later use\r\n                streams[streamId] = argument;\r\n                streamIds.push(streamId.toString());\r\n                // remove stream from args\r\n                args.splice(i, 1);\r\n            }\r\n        }\r\n        return [streams, streamIds];\r\n    };\r\n    HubConnection.prototype.isObservable = function (arg) {\r\n        // This allows other stream implementations to just work (like rxjs)\r\n        return arg && arg.subscribe && typeof arg.subscribe === \"function\";\r\n    };\r\n    HubConnection.prototype.createStreamInvocation = function (methodName, args, streamIds) {\r\n        var invocationId = this.invocationId;\r\n        this.invocationId++;\r\n        if (streamIds.length !== 0) {\r\n            return {\r\n                arguments: args,\r\n                invocationId: invocationId.toString(),\r\n                streamIds: streamIds,\r\n                target: methodName,\r\n                type: MessageType.StreamInvocation,\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                arguments: args,\r\n                invocationId: invocationId.toString(),\r\n                target: methodName,\r\n                type: MessageType.StreamInvocation,\r\n            };\r\n        }\r\n    };\r\n    HubConnection.prototype.createCancelInvocation = function (id) {\r\n        return {\r\n            invocationId: id,\r\n            type: MessageType.CancelInvocation,\r\n        };\r\n    };\r\n    HubConnection.prototype.createStreamItemMessage = function (id, item) {\r\n        return {\r\n            invocationId: id,\r\n            item: item,\r\n            type: MessageType.StreamItem,\r\n        };\r\n    };\r\n    HubConnection.prototype.createCompletionMessage = function (id, error, result) {\r\n        if (error) {\r\n            return {\r\n                error: error,\r\n                invocationId: id,\r\n                type: MessageType.Completion,\r\n            };\r\n        }\r\n        return {\r\n            invocationId: id,\r\n            result: result,\r\n            type: MessageType.Completion,\r\n        };\r\n    };\r\n    return HubConnection;\r\n}());\r\nexport { HubConnection };\r\n//# sourceMappingURL=HubConnection.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n// 0, 2, 10, 30 second delays before reconnect attempts.\r\nvar DEFAULT_RETRY_DELAYS_IN_MILLISECONDS = [0, 2000, 10000, 30000, null];\r\n/** @private */\r\nvar DefaultReconnectPolicy = /** @class */ (function () {\r\n    function DefaultReconnectPolicy(retryDelays) {\r\n        this.retryDelays = retryDelays !== undefined ? retryDelays.concat([null]) : DEFAULT_RETRY_DELAYS_IN_MILLISECONDS;\r\n    }\r\n    DefaultReconnectPolicy.prototype.nextRetryDelayInMilliseconds = function (retryContext) {\r\n        return this.retryDelays[retryContext.previousRetryCount];\r\n    };\r\n    return DefaultReconnectPolicy;\r\n}());\r\nexport { DefaultReconnectPolicy };\r\n//# sourceMappingURL=DefaultReconnectPolicy.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n// This will be treated as a bit flag in the future, so we keep it using power-of-two values.\r\n/** Specifies a specific HTTP transport type. */\r\nexport var HttpTransportType;\r\n(function (HttpTransportType) {\r\n    /** Specifies no transport preference. */\r\n    HttpTransportType[HttpTransportType[\"None\"] = 0] = \"None\";\r\n    /** Specifies the WebSockets transport. */\r\n    HttpTransportType[HttpTransportType[\"WebSockets\"] = 1] = \"WebSockets\";\r\n    /** Specifies the Server-Sent Events transport. */\r\n    HttpTransportType[HttpTransportType[\"ServerSentEvents\"] = 2] = \"ServerSentEvents\";\r\n    /** Specifies the Long Polling transport. */\r\n    HttpTransportType[HttpTransportType[\"LongPolling\"] = 4] = \"LongPolling\";\r\n})(HttpTransportType || (HttpTransportType = {}));\r\n/** Specifies the transfer format for a connection. */\r\nexport var TransferFormat;\r\n(function (TransferFormat) {\r\n    /** Specifies that only text data will be transmitted over the connection. */\r\n    TransferFormat[TransferFormat[\"Text\"] = 1] = \"Text\";\r\n    /** Specifies that binary data will be transmitted over the connection. */\r\n    TransferFormat[TransferFormat[\"Binary\"] = 2] = \"Binary\";\r\n})(TransferFormat || (TransferFormat = {}));\r\n//# sourceMappingURL=ITransport.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n// Rough polyfill of https://developer.mozilla.org/en-US/docs/Web/API/AbortController\r\n// We don't actually ever use the API being polyfilled, we always use the polyfill because\r\n// it's a very new API right now.\r\n// Not exported from index.\r\n/** @private */\r\nvar AbortController = /** @class */ (function () {\r\n    function AbortController() {\r\n        this.isAborted = false;\r\n        this.onabort = null;\r\n    }\r\n    AbortController.prototype.abort = function () {\r\n        if (!this.isAborted) {\r\n            this.isAborted = true;\r\n            if (this.onabort) {\r\n                this.onabort();\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(AbortController.prototype, \"signal\", {\r\n        get: function () {\r\n            return this;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbortController.prototype, \"aborted\", {\r\n        get: function () {\r\n            return this.isAborted;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return AbortController;\r\n}());\r\nexport { AbortController };\r\n//# sourceMappingURL=AbortController.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { AbortController } from \"./AbortController\";\r\nimport { HttpError, TimeoutError } from \"./Errors\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { TransferFormat } from \"./ITransport\";\r\nimport { Arg, getDataDetail, getUserAgentHeader, sendMessage } from \"./Utils\";\r\n// Not exported from 'index', this type is internal.\r\n/** @private */\r\nvar LongPollingTransport = /** @class */ (function () {\r\n    function LongPollingTransport(httpClient, accessTokenFactory, logger, logMessageContent, withCredentials, headers) {\r\n        this.httpClient = httpClient;\r\n        this.accessTokenFactory = accessTokenFactory;\r\n        this.logger = logger;\r\n        this.pollAbort = new AbortController();\r\n        this.logMessageContent = logMessageContent;\r\n        this.withCredentials = withCredentials;\r\n        this.headers = headers;\r\n        this.running = false;\r\n        this.onreceive = null;\r\n        this.onclose = null;\r\n    }\r\n    Object.defineProperty(LongPollingTransport.prototype, \"pollAborted\", {\r\n        // This is an internal type, not exported from 'index' so this is really just internal.\r\n        get: function () {\r\n            return this.pollAbort.aborted;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LongPollingTransport.prototype.connect = function (url, transferFormat) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, _b, name, value, headers, pollOptions, token, pollUrl, response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        Arg.isRequired(url, \"url\");\r\n                        Arg.isRequired(transferFormat, \"transferFormat\");\r\n                        Arg.isIn(transferFormat, TransferFormat, \"transferFormat\");\r\n                        this.url = url;\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) Connecting.\");\r\n                        // Allow binary format on Node and Browsers that support binary content (indicated by the presence of responseType property)\r\n                        if (transferFormat === TransferFormat.Binary &&\r\n                            (typeof XMLHttpRequest !== \"undefined\" && typeof new XMLHttpRequest().responseType !== \"string\")) {\r\n                            throw new Error(\"Binary protocols over XmlHttpRequest not implementing advanced features are not supported.\");\r\n                        }\r\n                        _b = getUserAgentHeader(), name = _b[0], value = _b[1];\r\n                        headers = __assign((_a = {}, _a[name] = value, _a), this.headers);\r\n                        pollOptions = {\r\n                            abortSignal: this.pollAbort.signal,\r\n                            headers: headers,\r\n                            timeout: 100000,\r\n                            withCredentials: this.withCredentials,\r\n                        };\r\n                        if (transferFormat === TransferFormat.Binary) {\r\n                            pollOptions.responseType = \"arraybuffer\";\r\n                        }\r\n                        return [4 /*yield*/, this.getAccessToken()];\r\n                    case 1:\r\n                        token = _c.sent();\r\n                        this.updateHeaderToken(pollOptions, token);\r\n                        pollUrl = url + \"&_=\" + Date.now();\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) polling: \" + pollUrl + \".\");\r\n                        return [4 /*yield*/, this.httpClient.get(pollUrl, pollOptions)];\r\n                    case 2:\r\n                        response = _c.sent();\r\n                        if (response.statusCode !== 200) {\r\n                            this.logger.log(LogLevel.Error, \"(LongPolling transport) Unexpected response code: \" + response.statusCode + \".\");\r\n                            // Mark running as false so that the poll immediately ends and runs the close logic\r\n                            this.closeError = new HttpError(response.statusText || \"\", response.statusCode);\r\n                            this.running = false;\r\n                        }\r\n                        else {\r\n                            this.running = true;\r\n                        }\r\n                        this.receiving = this.poll(this.url, pollOptions);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    LongPollingTransport.prototype.getAccessToken = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this.accessTokenFactory) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.accessTokenFactory()];\r\n                    case 1: return [2 /*return*/, _a.sent()];\r\n                    case 2: return [2 /*return*/, null];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    LongPollingTransport.prototype.updateHeaderToken = function (request, token) {\r\n        if (!request.headers) {\r\n            request.headers = {};\r\n        }\r\n        if (token) {\r\n            // tslint:disable-next-line:no-string-literal\r\n            request.headers[\"Authorization\"] = \"Bearer \" + token;\r\n            return;\r\n        }\r\n        // tslint:disable-next-line:no-string-literal\r\n        if (request.headers[\"Authorization\"]) {\r\n            // tslint:disable-next-line:no-string-literal\r\n            delete request.headers[\"Authorization\"];\r\n        }\r\n    };\r\n    LongPollingTransport.prototype.poll = function (url, pollOptions) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var token, pollUrl, response, e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, , 8, 9]);\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        if (!this.running) return [3 /*break*/, 7];\r\n                        return [4 /*yield*/, this.getAccessToken()];\r\n                    case 2:\r\n                        token = _a.sent();\r\n                        this.updateHeaderToken(pollOptions, token);\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        _a.trys.push([3, 5, , 6]);\r\n                        pollUrl = url + \"&_=\" + Date.now();\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) polling: \" + pollUrl + \".\");\r\n                        return [4 /*yield*/, this.httpClient.get(pollUrl, pollOptions)];\r\n                    case 4:\r\n                        response = _a.sent();\r\n                        if (response.statusCode === 204) {\r\n                            this.logger.log(LogLevel.Information, \"(LongPolling transport) Poll terminated by server.\");\r\n                            this.running = false;\r\n                        }\r\n                        else if (response.statusCode !== 200) {\r\n                            this.logger.log(LogLevel.Error, \"(LongPolling transport) Unexpected response code: \" + response.statusCode + \".\");\r\n                            // Unexpected status code\r\n                            this.closeError = new HttpError(response.statusText || \"\", response.statusCode);\r\n                            this.running = false;\r\n                        }\r\n                        else {\r\n                            // Process the response\r\n                            if (response.content) {\r\n                                this.logger.log(LogLevel.Trace, \"(LongPolling transport) data received. \" + getDataDetail(response.content, this.logMessageContent) + \".\");\r\n                                if (this.onreceive) {\r\n                                    this.onreceive(response.content);\r\n                                }\r\n                            }\r\n                            else {\r\n                                // This is another way timeout manifest.\r\n                                this.logger.log(LogLevel.Trace, \"(LongPolling transport) Poll timed out, reissuing.\");\r\n                            }\r\n                        }\r\n                        return [3 /*break*/, 6];\r\n                    case 5:\r\n                        e_1 = _a.sent();\r\n                        if (!this.running) {\r\n                            // Log but disregard errors that occur after stopping\r\n                            this.logger.log(LogLevel.Trace, \"(LongPolling transport) Poll errored after shutdown: \" + e_1.message);\r\n                        }\r\n                        else {\r\n                            if (e_1 instanceof TimeoutError) {\r\n                                // Ignore timeouts and reissue the poll.\r\n                                this.logger.log(LogLevel.Trace, \"(LongPolling transport) Poll timed out, reissuing.\");\r\n                            }\r\n                            else {\r\n                                // Close the connection with the error as the result.\r\n                                this.closeError = e_1;\r\n                                this.running = false;\r\n                            }\r\n                        }\r\n                        return [3 /*break*/, 6];\r\n                    case 6: return [3 /*break*/, 1];\r\n                    case 7: return [3 /*break*/, 9];\r\n                    case 8:\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) Polling complete.\");\r\n                        // We will reach here with pollAborted==false when the server returned a response causing the transport to stop.\r\n                        // If pollAborted==true then client initiated the stop and the stop method will raise the close event after DELETE is sent.\r\n                        if (!this.pollAborted) {\r\n                            this.raiseOnClose();\r\n                        }\r\n                        return [7 /*endfinally*/];\r\n                    case 9: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    LongPollingTransport.prototype.send = function (data) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                if (!this.running) {\r\n                    return [2 /*return*/, Promise.reject(new Error(\"Cannot send until the transport is connected\"))];\r\n                }\r\n                return [2 /*return*/, sendMessage(this.logger, \"LongPolling\", this.httpClient, this.url, this.accessTokenFactory, data, this.logMessageContent, this.withCredentials, this.headers)];\r\n            });\r\n        });\r\n    };\r\n    LongPollingTransport.prototype.stop = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var headers, _a, name_1, value, deleteOptions, token;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) Stopping polling.\");\r\n                        // Tell receiving loop to stop, abort any current request, and then wait for it to finish\r\n                        this.running = false;\r\n                        this.pollAbort.abort();\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, , 5, 6]);\r\n                        return [4 /*yield*/, this.receiving];\r\n                    case 2:\r\n                        _b.sent();\r\n                        // Send DELETE to clean up long polling on the server\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) sending DELETE request to \" + this.url + \".\");\r\n                        headers = {};\r\n                        _a = getUserAgentHeader(), name_1 = _a[0], value = _a[1];\r\n                        headers[name_1] = value;\r\n                        deleteOptions = {\r\n                            headers: __assign({}, headers, this.headers),\r\n                            withCredentials: this.withCredentials,\r\n                        };\r\n                        return [4 /*yield*/, this.getAccessToken()];\r\n                    case 3:\r\n                        token = _b.sent();\r\n                        this.updateHeaderToken(deleteOptions, token);\r\n                        return [4 /*yield*/, this.httpClient.delete(this.url, deleteOptions)];\r\n                    case 4:\r\n                        _b.sent();\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) DELETE request sent.\");\r\n                        return [3 /*break*/, 6];\r\n                    case 5:\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) Stop finished.\");\r\n                        // Raise close event here instead of in polling\r\n                        // It needs to happen after the DELETE request is sent\r\n                        this.raiseOnClose();\r\n                        return [7 /*endfinally*/];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    LongPollingTransport.prototype.raiseOnClose = function () {\r\n        if (this.onclose) {\r\n            var logMessage = \"(LongPolling transport) Firing onclose event.\";\r\n            if (this.closeError) {\r\n                logMessage += \" Error: \" + this.closeError;\r\n            }\r\n            this.logger.log(LogLevel.Trace, logMessage);\r\n            this.onclose(this.closeError);\r\n        }\r\n    };\r\n    return LongPollingTransport;\r\n}());\r\nexport { LongPollingTransport };\r\n//# sourceMappingURL=LongPollingTransport.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { TransferFormat } from \"./ITransport\";\r\nimport { Arg, getDataDetail, getUserAgentHeader, Platform, sendMessage } from \"./Utils\";\r\n/** @private */\r\nvar ServerSentEventsTransport = /** @class */ (function () {\r\n    function ServerSentEventsTransport(httpClient, accessTokenFactory, logger, logMessageContent, eventSourceConstructor, withCredentials, headers) {\r\n        this.httpClient = httpClient;\r\n        this.accessTokenFactory = accessTokenFactory;\r\n        this.logger = logger;\r\n        this.logMessageContent = logMessageContent;\r\n        this.withCredentials = withCredentials;\r\n        this.eventSourceConstructor = eventSourceConstructor;\r\n        this.headers = headers;\r\n        this.onreceive = null;\r\n        this.onclose = null;\r\n    }\r\n    ServerSentEventsTransport.prototype.connect = function (url, transferFormat) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var token;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        Arg.isRequired(url, \"url\");\r\n                        Arg.isRequired(transferFormat, \"transferFormat\");\r\n                        Arg.isIn(transferFormat, TransferFormat, \"transferFormat\");\r\n                        this.logger.log(LogLevel.Trace, \"(SSE transport) Connecting.\");\r\n                        // set url before accessTokenFactory because this.url is only for send and we set the auth header instead of the query string for send\r\n                        this.url = url;\r\n                        if (!this.accessTokenFactory) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.accessTokenFactory()];\r\n                    case 1:\r\n                        token = _a.sent();\r\n                        if (token) {\r\n                            url += (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") + (\"access_token=\" + encodeURIComponent(token));\r\n                        }\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                            var opened = false;\r\n                            if (transferFormat !== TransferFormat.Text) {\r\n                                reject(new Error(\"The Server-Sent Events transport only supports the 'Text' transfer format\"));\r\n                                return;\r\n                            }\r\n                            var eventSource;\r\n                            if (Platform.isBrowser || Platform.isWebWorker) {\r\n                                eventSource = new _this.eventSourceConstructor(url, { withCredentials: _this.withCredentials });\r\n                            }\r\n                            else {\r\n                                // Non-browser passes cookies via the dictionary\r\n                                var cookies = _this.httpClient.getCookieString(url);\r\n                                var headers = {};\r\n                                headers.Cookie = cookies;\r\n                                var _a = getUserAgentHeader(), name_1 = _a[0], value = _a[1];\r\n                                headers[name_1] = value;\r\n                                eventSource = new _this.eventSourceConstructor(url, { withCredentials: _this.withCredentials, headers: __assign({}, headers, _this.headers) });\r\n                            }\r\n                            try {\r\n                                eventSource.onmessage = function (e) {\r\n                                    if (_this.onreceive) {\r\n                                        try {\r\n                                            _this.logger.log(LogLevel.Trace, \"(SSE transport) data received. \" + getDataDetail(e.data, _this.logMessageContent) + \".\");\r\n                                            _this.onreceive(e.data);\r\n                                        }\r\n                                        catch (error) {\r\n                                            _this.close(error);\r\n                                            return;\r\n                                        }\r\n                                    }\r\n                                };\r\n                                eventSource.onerror = function (e) {\r\n                                    var error = new Error(e.data || \"Error occurred\");\r\n                                    if (opened) {\r\n                                        _this.close(error);\r\n                                    }\r\n                                    else {\r\n                                        reject(error);\r\n                                    }\r\n                                };\r\n                                eventSource.onopen = function () {\r\n                                    _this.logger.log(LogLevel.Information, \"SSE connected to \" + _this.url);\r\n                                    _this.eventSource = eventSource;\r\n                                    opened = true;\r\n                                    resolve();\r\n                                };\r\n                            }\r\n                            catch (e) {\r\n                                reject(e);\r\n                                return;\r\n                            }\r\n                        })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ServerSentEventsTransport.prototype.send = function (data) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                if (!this.eventSource) {\r\n                    return [2 /*return*/, Promise.reject(new Error(\"Cannot send until the transport is connected\"))];\r\n                }\r\n                return [2 /*return*/, sendMessage(this.logger, \"SSE\", this.httpClient, this.url, this.accessTokenFactory, data, this.logMessageContent, this.withCredentials, this.headers)];\r\n            });\r\n        });\r\n    };\r\n    ServerSentEventsTransport.prototype.stop = function () {\r\n        this.close();\r\n        return Promise.resolve();\r\n    };\r\n    ServerSentEventsTransport.prototype.close = function (e) {\r\n        if (this.eventSource) {\r\n            this.eventSource.close();\r\n            this.eventSource = undefined;\r\n            if (this.onclose) {\r\n                this.onclose(e);\r\n            }\r\n        }\r\n    };\r\n    return ServerSentEventsTransport;\r\n}());\r\nexport { ServerSentEventsTransport };\r\n//# sourceMappingURL=ServerSentEventsTransport.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { TransferFormat } from \"./ITransport\";\r\nimport { Arg, getDataDetail, getUserAgentHeader, Platform } from \"./Utils\";\r\n/** @private */\r\nvar WebSocketTransport = /** @class */ (function () {\r\n    function WebSocketTransport(httpClient, accessTokenFactory, logger, logMessageContent, webSocketConstructor, headers) {\r\n        this.logger = logger;\r\n        this.accessTokenFactory = accessTokenFactory;\r\n        this.logMessageContent = logMessageContent;\r\n        this.webSocketConstructor = webSocketConstructor;\r\n        this.httpClient = httpClient;\r\n        this.onreceive = null;\r\n        this.onclose = null;\r\n        this.headers = headers;\r\n    }\r\n    WebSocketTransport.prototype.connect = function (url, transferFormat) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var token;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        Arg.isRequired(url, \"url\");\r\n                        Arg.isRequired(transferFormat, \"transferFormat\");\r\n                        Arg.isIn(transferFormat, TransferFormat, \"transferFormat\");\r\n                        this.logger.log(LogLevel.Trace, \"(WebSockets transport) Connecting.\");\r\n                        if (!this.accessTokenFactory) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.accessTokenFactory()];\r\n                    case 1:\r\n                        token = _a.sent();\r\n                        if (token) {\r\n                            url += (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") + (\"access_token=\" + encodeURIComponent(token));\r\n                        }\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                            url = url.replace(/^http/, \"ws\");\r\n                            var webSocket;\r\n                            var cookies = _this.httpClient.getCookieString(url);\r\n                            var opened = false;\r\n                            if (Platform.isNode) {\r\n                                var headers = {};\r\n                                var _a = getUserAgentHeader(), name_1 = _a[0], value = _a[1];\r\n                                headers[name_1] = value;\r\n                                if (cookies) {\r\n                                    headers[\"Cookie\"] = \"\" + cookies;\r\n                                }\r\n                                // Only pass headers when in non-browser environments\r\n                                webSocket = new _this.webSocketConstructor(url, undefined, {\r\n                                    headers: __assign({}, headers, _this.headers),\r\n                                });\r\n                            }\r\n                            if (!webSocket) {\r\n                                // Chrome is not happy with passing 'undefined' as protocol\r\n                                webSocket = new _this.webSocketConstructor(url);\r\n                            }\r\n                            if (transferFormat === TransferFormat.Binary) {\r\n                                webSocket.binaryType = \"arraybuffer\";\r\n                            }\r\n                            // tslint:disable-next-line:variable-name\r\n                            webSocket.onopen = function (_event) {\r\n                                _this.logger.log(LogLevel.Information, \"WebSocket connected to \" + url + \".\");\r\n                                _this.webSocket = webSocket;\r\n                                opened = true;\r\n                                resolve();\r\n                            };\r\n                            webSocket.onerror = function (event) {\r\n                                var error = null;\r\n                                // ErrorEvent is a browser only type we need to check if the type exists before using it\r\n                                if (typeof ErrorEvent !== \"undefined\" && event instanceof ErrorEvent) {\r\n                                    error = event.error;\r\n                                }\r\n                                else {\r\n                                    error = new Error(\"There was an error with the transport.\");\r\n                                }\r\n                                reject(error);\r\n                            };\r\n                            webSocket.onmessage = function (message) {\r\n                                _this.logger.log(LogLevel.Trace, \"(WebSockets transport) data received. \" + getDataDetail(message.data, _this.logMessageContent) + \".\");\r\n                                if (_this.onreceive) {\r\n                                    try {\r\n                                        _this.onreceive(message.data);\r\n                                    }\r\n                                    catch (error) {\r\n                                        _this.close(error);\r\n                                        return;\r\n                                    }\r\n                                }\r\n                            };\r\n                            webSocket.onclose = function (event) {\r\n                                // Don't call close handler if connection was never established\r\n                                // We'll reject the connect call instead\r\n                                if (opened) {\r\n                                    _this.close(event);\r\n                                }\r\n                                else {\r\n                                    var error = null;\r\n                                    // ErrorEvent is a browser only type we need to check if the type exists before using it\r\n                                    if (typeof ErrorEvent !== \"undefined\" && event instanceof ErrorEvent) {\r\n                                        error = event.error;\r\n                                    }\r\n                                    else {\r\n                                        error = new Error(\"There was an error with the transport.\");\r\n                                    }\r\n                                    reject(error);\r\n                                }\r\n                            };\r\n                        })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WebSocketTransport.prototype.send = function (data) {\r\n        if (this.webSocket && this.webSocket.readyState === this.webSocketConstructor.OPEN) {\r\n            this.logger.log(LogLevel.Trace, \"(WebSockets transport) sending data. \" + getDataDetail(data, this.logMessageContent) + \".\");\r\n            this.webSocket.send(data);\r\n            return Promise.resolve();\r\n        }\r\n        return Promise.reject(\"WebSocket is not in the OPEN state\");\r\n    };\r\n    WebSocketTransport.prototype.stop = function () {\r\n        if (this.webSocket) {\r\n            // Manually invoke onclose callback inline so we know the HttpConnection was closed properly before returning\r\n            // This also solves an issue where websocket.onclose could take 18+ seconds to trigger during network disconnects\r\n            this.close(undefined);\r\n        }\r\n        return Promise.resolve();\r\n    };\r\n    WebSocketTransport.prototype.close = function (event) {\r\n        // webSocket will be null if the transport did not start successfully\r\n        if (this.webSocket) {\r\n            // Clear websocket handlers because we are considering the socket closed now\r\n            this.webSocket.onclose = function () { };\r\n            this.webSocket.onmessage = function () { };\r\n            this.webSocket.onerror = function () { };\r\n            this.webSocket.close();\r\n            this.webSocket = undefined;\r\n        }\r\n        this.logger.log(LogLevel.Trace, \"(WebSockets transport) socket closed.\");\r\n        if (this.onclose) {\r\n            if (this.isCloseEvent(event) && (event.wasClean === false || event.code !== 1000)) {\r\n                this.onclose(new Error(\"WebSocket closed with status code: \" + event.code + \" (\" + event.reason + \").\"));\r\n            }\r\n            else if (event instanceof Error) {\r\n                this.onclose(event);\r\n            }\r\n            else {\r\n                this.onclose();\r\n            }\r\n        }\r\n    };\r\n    WebSocketTransport.prototype.isCloseEvent = function (event) {\r\n        return event && typeof event.wasClean === \"boolean\" && typeof event.code === \"number\";\r\n    };\r\n    return WebSocketTransport;\r\n}());\r\nexport { WebSocketTransport };\r\n//# sourceMappingURL=WebSocketTransport.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { DefaultHttpClient } from \"./DefaultHttpClient\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { HttpTransportType, TransferFormat } from \"./ITransport\";\r\nimport { LongPollingTransport } from \"./LongPollingTransport\";\r\nimport { ServerSentEventsTransport } from \"./ServerSentEventsTransport\";\r\nimport { Arg, createLogger, getUserAgentHeader, Platform } from \"./Utils\";\r\nimport { WebSocketTransport } from \"./WebSocketTransport\";\r\nvar MAX_REDIRECTS = 100;\r\n/** @private */\r\nvar HttpConnection = /** @class */ (function () {\r\n    function HttpConnection(url, options) {\r\n        if (options === void 0) { options = {}; }\r\n        this.features = {};\r\n        this.negotiateVersion = 1;\r\n        Arg.isRequired(url, \"url\");\r\n        this.logger = createLogger(options.logger);\r\n        this.baseUrl = this.resolveUrl(url);\r\n        options = options || {};\r\n        options.logMessageContent = options.logMessageContent === undefined ? false : options.logMessageContent;\r\n        if (typeof options.withCredentials === \"boolean\" || options.withCredentials === undefined) {\r\n            options.withCredentials = options.withCredentials === undefined ? true : options.withCredentials;\r\n        }\r\n        else {\r\n            throw new Error(\"withCredentials option was not a 'boolean' or 'undefined' value\");\r\n        }\r\n        var webSocketModule = null;\r\n        var eventSourceModule = null;\r\n        if (Platform.isNode && typeof require !== \"undefined\") {\r\n            // In order to ignore the dynamic require in webpack builds we need to do this magic\r\n            // @ts-ignore: TS doesn't know about these names\r\n            var requireFunc = typeof __webpack_require__ === \"function\" ? __non_webpack_require__ : require;\r\n            webSocketModule = requireFunc(\"ws\");\r\n            eventSourceModule = requireFunc(\"eventsource\");\r\n        }\r\n        if (!Platform.isNode && typeof WebSocket !== \"undefined\" && !options.WebSocket) {\r\n            options.WebSocket = WebSocket;\r\n        }\r\n        else if (Platform.isNode && !options.WebSocket) {\r\n            if (webSocketModule) {\r\n                options.WebSocket = webSocketModule;\r\n            }\r\n        }\r\n        if (!Platform.isNode && typeof EventSource !== \"undefined\" && !options.EventSource) {\r\n            options.EventSource = EventSource;\r\n        }\r\n        else if (Platform.isNode && !options.EventSource) {\r\n            if (typeof eventSourceModule !== \"undefined\") {\r\n                options.EventSource = eventSourceModule;\r\n            }\r\n        }\r\n        this.httpClient = options.httpClient || new DefaultHttpClient(this.logger);\r\n        this.connectionState = \"Disconnected\" /* Disconnected */;\r\n        this.connectionStarted = false;\r\n        this.options = options;\r\n        this.onreceive = null;\r\n        this.onclose = null;\r\n    }\r\n    HttpConnection.prototype.start = function (transferFormat) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var message, message;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        transferFormat = transferFormat || TransferFormat.Binary;\r\n                        Arg.isIn(transferFormat, TransferFormat, \"transferFormat\");\r\n                        this.logger.log(LogLevel.Debug, \"Starting connection with transfer format '\" + TransferFormat[transferFormat] + \"'.\");\r\n                        if (this.connectionState !== \"Disconnected\" /* Disconnected */) {\r\n                            return [2 /*return*/, Promise.reject(new Error(\"Cannot start an HttpConnection that is not in the 'Disconnected' state.\"))];\r\n                        }\r\n                        this.connectionState = \"Connecting\" /* Connecting */;\r\n                        this.startInternalPromise = this.startInternal(transferFormat);\r\n                        return [4 /*yield*/, this.startInternalPromise];\r\n                    case 1:\r\n                        _a.sent();\r\n                        if (!(this.connectionState === \"Disconnecting\" /* Disconnecting */)) return [3 /*break*/, 3];\r\n                        message = \"Failed to start the HttpConnection before stop() was called.\";\r\n                        this.logger.log(LogLevel.Error, message);\r\n                        // We cannot await stopPromise inside startInternal since stopInternal awaits the startInternalPromise.\r\n                        return [4 /*yield*/, this.stopPromise];\r\n                    case 2:\r\n                        // We cannot await stopPromise inside startInternal since stopInternal awaits the startInternalPromise.\r\n                        _a.sent();\r\n                        return [2 /*return*/, Promise.reject(new Error(message))];\r\n                    case 3:\r\n                        if (this.connectionState !== \"Connected\" /* Connected */) {\r\n                            message = \"HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!\";\r\n                            this.logger.log(LogLevel.Error, message);\r\n                            return [2 /*return*/, Promise.reject(new Error(message))];\r\n                        }\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        this.connectionStarted = true;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HttpConnection.prototype.send = function (data) {\r\n        if (this.connectionState !== \"Connected\" /* Connected */) {\r\n            return Promise.reject(new Error(\"Cannot send data if the connection is not in the 'Connected' State.\"));\r\n        }\r\n        if (!this.sendQueue) {\r\n            this.sendQueue = new TransportSendQueue(this.transport);\r\n        }\r\n        // Transport will not be null if state is connected\r\n        return this.sendQueue.send(data);\r\n    };\r\n    HttpConnection.prototype.stop = function (error) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.connectionState === \"Disconnected\" /* Disconnected */) {\r\n                            this.logger.log(LogLevel.Debug, \"Call to HttpConnection.stop(\" + error + \") ignored because the connection is already in the disconnected state.\");\r\n                            return [2 /*return*/, Promise.resolve()];\r\n                        }\r\n                        if (this.connectionState === \"Disconnecting\" /* Disconnecting */) {\r\n                            this.logger.log(LogLevel.Debug, \"Call to HttpConnection.stop(\" + error + \") ignored because the connection is already in the disconnecting state.\");\r\n                            return [2 /*return*/, this.stopPromise];\r\n                        }\r\n                        this.connectionState = \"Disconnecting\" /* Disconnecting */;\r\n                        this.stopPromise = new Promise(function (resolve) {\r\n                            // Don't complete stop() until stopConnection() completes.\r\n                            _this.stopPromiseResolver = resolve;\r\n                        });\r\n                        // stopInternal should never throw so just observe it.\r\n                        return [4 /*yield*/, this.stopInternal(error)];\r\n                    case 1:\r\n                        // stopInternal should never throw so just observe it.\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.stopPromise];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HttpConnection.prototype.stopInternal = function (error) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var e_1, e_2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        // Set error as soon as possible otherwise there is a race between\r\n                        // the transport closing and providing an error and the error from a close message\r\n                        // We would prefer the close message error.\r\n                        this.stopError = error;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, this.startInternalPromise];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        e_1 = _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 4:\r\n                        if (!this.transport) return [3 /*break*/, 9];\r\n                        _a.label = 5;\r\n                    case 5:\r\n                        _a.trys.push([5, 7, , 8]);\r\n                        return [4 /*yield*/, this.transport.stop()];\r\n                    case 6:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        e_2 = _a.sent();\r\n                        this.logger.log(LogLevel.Error, \"HttpConnection.transport.stop() threw error '\" + e_2 + \"'.\");\r\n                        this.stopConnection();\r\n                        return [3 /*break*/, 8];\r\n                    case 8:\r\n                        this.transport = undefined;\r\n                        return [3 /*break*/, 10];\r\n                    case 9:\r\n                        this.logger.log(LogLevel.Debug, \"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.\");\r\n                        this.stopConnection();\r\n                        _a.label = 10;\r\n                    case 10: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HttpConnection.prototype.startInternal = function (transferFormat) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var url, negotiateResponse, redirects, _loop_1, this_1, e_3;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        url = this.baseUrl;\r\n                        this.accessTokenFactory = this.options.accessTokenFactory;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 12, , 13]);\r\n                        if (!this.options.skipNegotiation) return [3 /*break*/, 5];\r\n                        if (!(this.options.transport === HttpTransportType.WebSockets)) return [3 /*break*/, 3];\r\n                        // No need to add a connection ID in this case\r\n                        this.transport = this.constructTransport(HttpTransportType.WebSockets);\r\n                        // We should just call connect directly in this case.\r\n                        // No fallback or negotiate in this case.\r\n                        return [4 /*yield*/, this.startTransport(url, transferFormat)];\r\n                    case 2:\r\n                        // We should just call connect directly in this case.\r\n                        // No fallback or negotiate in this case.\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3: throw new Error(\"Negotiation can only be skipped when using the WebSocket transport directly.\");\r\n                    case 4: return [3 /*break*/, 11];\r\n                    case 5:\r\n                        negotiateResponse = null;\r\n                        redirects = 0;\r\n                        _loop_1 = function () {\r\n                            var accessToken_1;\r\n                            return __generator(this, function (_a) {\r\n                                switch (_a.label) {\r\n                                    case 0: return [4 /*yield*/, this_1.getNegotiationResponse(url)];\r\n                                    case 1:\r\n                                        negotiateResponse = _a.sent();\r\n                                        // the user tries to stop the connection when it is being started\r\n                                        if (this_1.connectionState === \"Disconnecting\" /* Disconnecting */ || this_1.connectionState === \"Disconnected\" /* Disconnected */) {\r\n                                            throw new Error(\"The connection was stopped during negotiation.\");\r\n                                        }\r\n                                        if (negotiateResponse.error) {\r\n                                            throw new Error(negotiateResponse.error);\r\n                                        }\r\n                                        if (negotiateResponse.ProtocolVersion) {\r\n                                            throw new Error(\"Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.\");\r\n                                        }\r\n                                        if (negotiateResponse.url) {\r\n                                            url = negotiateResponse.url;\r\n                                        }\r\n                                        if (negotiateResponse.accessToken) {\r\n                                            accessToken_1 = negotiateResponse.accessToken;\r\n                                            this_1.accessTokenFactory = function () { return accessToken_1; };\r\n                                        }\r\n                                        redirects++;\r\n                                        return [2 /*return*/];\r\n                                }\r\n                            });\r\n                        };\r\n                        this_1 = this;\r\n                        _a.label = 6;\r\n                    case 6: return [5 /*yield**/, _loop_1()];\r\n                    case 7:\r\n                        _a.sent();\r\n                        _a.label = 8;\r\n                    case 8:\r\n                        if (negotiateResponse.url && redirects < MAX_REDIRECTS) return [3 /*break*/, 6];\r\n                        _a.label = 9;\r\n                    case 9:\r\n                        if (redirects === MAX_REDIRECTS && negotiateResponse.url) {\r\n                            throw new Error(\"Negotiate redirection limit exceeded.\");\r\n                        }\r\n                        return [4 /*yield*/, this.createTransport(url, this.options.transport, negotiateResponse, transferFormat)];\r\n                    case 10:\r\n                        _a.sent();\r\n                        _a.label = 11;\r\n                    case 11:\r\n                        if (this.transport instanceof LongPollingTransport) {\r\n                            this.features.inherentKeepAlive = true;\r\n                        }\r\n                        if (this.connectionState === \"Connecting\" /* Connecting */) {\r\n                            // Ensure the connection transitions to the connected state prior to completing this.startInternalPromise.\r\n                            // start() will handle the case when stop was called and startInternal exits still in the disconnecting state.\r\n                            this.logger.log(LogLevel.Debug, \"The HttpConnection connected successfully.\");\r\n                            this.connectionState = \"Connected\" /* Connected */;\r\n                        }\r\n                        return [3 /*break*/, 13];\r\n                    case 12:\r\n                        e_3 = _a.sent();\r\n                        this.logger.log(LogLevel.Error, \"Failed to start the connection: \" + e_3);\r\n                        this.connectionState = \"Disconnected\" /* Disconnected */;\r\n                        this.transport = undefined;\r\n                        return [2 /*return*/, Promise.reject(e_3)];\r\n                    case 13: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HttpConnection.prototype.getNegotiationResponse = function (url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var headers, token, _a, name, value, negotiateUrl, response, negotiateResponse, e_4;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        headers = {};\r\n                        if (!this.accessTokenFactory) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.accessTokenFactory()];\r\n                    case 1:\r\n                        token = _b.sent();\r\n                        if (token) {\r\n                            headers[\"Authorization\"] = \"Bearer \" + token;\r\n                        }\r\n                        _b.label = 2;\r\n                    case 2:\r\n                        _a = getUserAgentHeader(), name = _a[0], value = _a[1];\r\n                        headers[name] = value;\r\n                        negotiateUrl = this.resolveNegotiateUrl(url);\r\n                        this.logger.log(LogLevel.Debug, \"Sending negotiation request: \" + negotiateUrl + \".\");\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        _b.trys.push([3, 5, , 6]);\r\n                        return [4 /*yield*/, this.httpClient.post(negotiateUrl, {\r\n                                content: \"\",\r\n                                headers: __assign({}, headers, this.options.headers),\r\n                                withCredentials: this.options.withCredentials,\r\n                            })];\r\n                    case 4:\r\n                        response = _b.sent();\r\n                        if (response.statusCode !== 200) {\r\n                            return [2 /*return*/, Promise.reject(new Error(\"Unexpected status code returned from negotiate '\" + response.statusCode + \"'\"))];\r\n                        }\r\n                        negotiateResponse = JSON.parse(response.content);\r\n                        if (!negotiateResponse.negotiateVersion || negotiateResponse.negotiateVersion < 1) {\r\n                            // Negotiate version 0 doesn't use connectionToken\r\n                            // So we set it equal to connectionId so all our logic can use connectionToken without being aware of the negotiate version\r\n                            negotiateResponse.connectionToken = negotiateResponse.connectionId;\r\n                        }\r\n                        return [2 /*return*/, negotiateResponse];\r\n                    case 5:\r\n                        e_4 = _b.sent();\r\n                        this.logger.log(LogLevel.Error, \"Failed to complete negotiation with the server: \" + e_4);\r\n                        return [2 /*return*/, Promise.reject(e_4)];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HttpConnection.prototype.createConnectUrl = function (url, connectionToken) {\r\n        if (!connectionToken) {\r\n            return url;\r\n        }\r\n        return url + (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + (\"id=\" + connectionToken);\r\n    };\r\n    HttpConnection.prototype.createTransport = function (url, requestedTransport, negotiateResponse, requestedTransferFormat) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var connectUrl, transportExceptions, transports, negotiate, _i, transports_1, endpoint, transportOrError, ex_1, ex_2, message;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        connectUrl = this.createConnectUrl(url, negotiateResponse.connectionToken);\r\n                        if (!this.isITransport(requestedTransport)) return [3 /*break*/, 2];\r\n                        this.logger.log(LogLevel.Debug, \"Connection was provided an instance of ITransport, using that directly.\");\r\n                        this.transport = requestedTransport;\r\n                        return [4 /*yield*/, this.startTransport(connectUrl, requestedTransferFormat)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.connectionId = negotiateResponse.connectionId;\r\n                        return [2 /*return*/];\r\n                    case 2:\r\n                        transportExceptions = [];\r\n                        transports = negotiateResponse.availableTransports || [];\r\n                        negotiate = negotiateResponse;\r\n                        _i = 0, transports_1 = transports;\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        if (!(_i < transports_1.length)) return [3 /*break*/, 13];\r\n                        endpoint = transports_1[_i];\r\n                        transportOrError = this.resolveTransportOrError(endpoint, requestedTransport, requestedTransferFormat);\r\n                        if (!(transportOrError instanceof Error)) return [3 /*break*/, 4];\r\n                        // Store the error and continue, we don't want to cause a re-negotiate in these cases\r\n                        transportExceptions.push(endpoint.transport + \" failed: \" + transportOrError);\r\n                        return [3 /*break*/, 12];\r\n                    case 4:\r\n                        if (!this.isITransport(transportOrError)) return [3 /*break*/, 12];\r\n                        this.transport = transportOrError;\r\n                        if (!!negotiate) return [3 /*break*/, 9];\r\n                        _a.label = 5;\r\n                    case 5:\r\n                        _a.trys.push([5, 7, , 8]);\r\n                        return [4 /*yield*/, this.getNegotiationResponse(url)];\r\n                    case 6:\r\n                        negotiate = _a.sent();\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        ex_1 = _a.sent();\r\n                        return [2 /*return*/, Promise.reject(ex_1)];\r\n                    case 8:\r\n                        connectUrl = this.createConnectUrl(url, negotiate.connectionToken);\r\n                        _a.label = 9;\r\n                    case 9:\r\n                        _a.trys.push([9, 11, , 12]);\r\n                        return [4 /*yield*/, this.startTransport(connectUrl, requestedTransferFormat)];\r\n                    case 10:\r\n                        _a.sent();\r\n                        this.connectionId = negotiate.connectionId;\r\n                        return [2 /*return*/];\r\n                    case 11:\r\n                        ex_2 = _a.sent();\r\n                        this.logger.log(LogLevel.Error, \"Failed to start the transport '\" + endpoint.transport + \"': \" + ex_2);\r\n                        negotiate = undefined;\r\n                        transportExceptions.push(endpoint.transport + \" failed: \" + ex_2);\r\n                        if (this.connectionState !== \"Connecting\" /* Connecting */) {\r\n                            message = \"Failed to select transport before stop() was called.\";\r\n                            this.logger.log(LogLevel.Debug, message);\r\n                            return [2 /*return*/, Promise.reject(new Error(message))];\r\n                        }\r\n                        return [3 /*break*/, 12];\r\n                    case 12:\r\n                        _i++;\r\n                        return [3 /*break*/, 3];\r\n                    case 13:\r\n                        if (transportExceptions.length > 0) {\r\n                            return [2 /*return*/, Promise.reject(new Error(\"Unable to connect to the server with any of the available transports. \" + transportExceptions.join(\" \")))];\r\n                        }\r\n                        return [2 /*return*/, Promise.reject(new Error(\"None of the transports supported by the client are supported by the server.\"))];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HttpConnection.prototype.constructTransport = function (transport) {\r\n        switch (transport) {\r\n            case HttpTransportType.WebSockets:\r\n                if (!this.options.WebSocket) {\r\n                    throw new Error(\"'WebSocket' is not supported in your environment.\");\r\n                }\r\n                return new WebSocketTransport(this.httpClient, this.accessTokenFactory, this.logger, this.options.logMessageContent || false, this.options.WebSocket, this.options.headers || {});\r\n            case HttpTransportType.ServerSentEvents:\r\n                if (!this.options.EventSource) {\r\n                    throw new Error(\"'EventSource' is not supported in your environment.\");\r\n                }\r\n                return new ServerSentEventsTransport(this.httpClient, this.accessTokenFactory, this.logger, this.options.logMessageContent || false, this.options.EventSource, this.options.withCredentials, this.options.headers || {});\r\n            case HttpTransportType.LongPolling:\r\n                return new LongPollingTransport(this.httpClient, this.accessTokenFactory, this.logger, this.options.logMessageContent || false, this.options.withCredentials, this.options.headers || {});\r\n            default:\r\n                throw new Error(\"Unknown transport: \" + transport + \".\");\r\n        }\r\n    };\r\n    HttpConnection.prototype.startTransport = function (url, transferFormat) {\r\n        var _this = this;\r\n        this.transport.onreceive = this.onreceive;\r\n        this.transport.onclose = function (e) { return _this.stopConnection(e); };\r\n        return this.transport.connect(url, transferFormat);\r\n    };\r\n    HttpConnection.prototype.resolveTransportOrError = function (endpoint, requestedTransport, requestedTransferFormat) {\r\n        var transport = HttpTransportType[endpoint.transport];\r\n        if (transport === null || transport === undefined) {\r\n            this.logger.log(LogLevel.Debug, \"Skipping transport '\" + endpoint.transport + \"' because it is not supported by this client.\");\r\n            return new Error(\"Skipping transport '\" + endpoint.transport + \"' because it is not supported by this client.\");\r\n        }\r\n        else {\r\n            if (transportMatches(requestedTransport, transport)) {\r\n                var transferFormats = endpoint.transferFormats.map(function (s) { return TransferFormat[s]; });\r\n                if (transferFormats.indexOf(requestedTransferFormat) >= 0) {\r\n                    if ((transport === HttpTransportType.WebSockets && !this.options.WebSocket) ||\r\n                        (transport === HttpTransportType.ServerSentEvents && !this.options.EventSource)) {\r\n                        this.logger.log(LogLevel.Debug, \"Skipping transport '\" + HttpTransportType[transport] + \"' because it is not supported in your environment.'\");\r\n                        return new Error(\"'\" + HttpTransportType[transport] + \"' is not supported in your environment.\");\r\n                    }\r\n                    else {\r\n                        this.logger.log(LogLevel.Debug, \"Selecting transport '\" + HttpTransportType[transport] + \"'.\");\r\n                        try {\r\n                            return this.constructTransport(transport);\r\n                        }\r\n                        catch (ex) {\r\n                            return ex;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    this.logger.log(LogLevel.Debug, \"Skipping transport '\" + HttpTransportType[transport] + \"' because it does not support the requested transfer format '\" + TransferFormat[requestedTransferFormat] + \"'.\");\r\n                    return new Error(\"'\" + HttpTransportType[transport] + \"' does not support \" + TransferFormat[requestedTransferFormat] + \".\");\r\n                }\r\n            }\r\n            else {\r\n                this.logger.log(LogLevel.Debug, \"Skipping transport '\" + HttpTransportType[transport] + \"' because it was disabled by the client.\");\r\n                return new Error(\"'\" + HttpTransportType[transport] + \"' is disabled by the client.\");\r\n            }\r\n        }\r\n    };\r\n    HttpConnection.prototype.isITransport = function (transport) {\r\n        return transport && typeof (transport) === \"object\" && \"connect\" in transport;\r\n    };\r\n    HttpConnection.prototype.stopConnection = function (error) {\r\n        var _this = this;\r\n        this.logger.log(LogLevel.Debug, \"HttpConnection.stopConnection(\" + error + \") called while in state \" + this.connectionState + \".\");\r\n        this.transport = undefined;\r\n        // If we have a stopError, it takes precedence over the error from the transport\r\n        error = this.stopError || error;\r\n        this.stopError = undefined;\r\n        if (this.connectionState === \"Disconnected\" /* Disconnected */) {\r\n            this.logger.log(LogLevel.Debug, \"Call to HttpConnection.stopConnection(\" + error + \") was ignored because the connection is already in the disconnected state.\");\r\n            return;\r\n        }\r\n        if (this.connectionState === \"Connecting\" /* Connecting */) {\r\n            this.logger.log(LogLevel.Warning, \"Call to HttpConnection.stopConnection(\" + error + \") was ignored because the connection is still in the connecting state.\");\r\n            throw new Error(\"HttpConnection.stopConnection(\" + error + \") was called while the connection is still in the connecting state.\");\r\n        }\r\n        if (this.connectionState === \"Disconnecting\" /* Disconnecting */) {\r\n            // A call to stop() induced this call to stopConnection and needs to be completed.\r\n            // Any stop() awaiters will be scheduled to continue after the onclose callback fires.\r\n            this.stopPromiseResolver();\r\n        }\r\n        if (error) {\r\n            this.logger.log(LogLevel.Error, \"Connection disconnected with error '\" + error + \"'.\");\r\n        }\r\n        else {\r\n            this.logger.log(LogLevel.Information, \"Connection disconnected.\");\r\n        }\r\n        if (this.sendQueue) {\r\n            this.sendQueue.stop().catch(function (e) {\r\n                _this.logger.log(LogLevel.Error, \"TransportSendQueue.stop() threw error '\" + e + \"'.\");\r\n            });\r\n            this.sendQueue = undefined;\r\n        }\r\n        this.connectionId = undefined;\r\n        this.connectionState = \"Disconnected\" /* Disconnected */;\r\n        if (this.connectionStarted) {\r\n            this.connectionStarted = false;\r\n            try {\r\n                if (this.onclose) {\r\n                    this.onclose(error);\r\n                }\r\n            }\r\n            catch (e) {\r\n                this.logger.log(LogLevel.Error, \"HttpConnection.onclose(\" + error + \") threw error '\" + e + \"'.\");\r\n            }\r\n        }\r\n    };\r\n    HttpConnection.prototype.resolveUrl = function (url) {\r\n        // startsWith is not supported in IE\r\n        if (url.lastIndexOf(\"https://\", 0) === 0 || url.lastIndexOf(\"http://\", 0) === 0) {\r\n            return url;\r\n        }\r\n        if (!Platform.isBrowser || !window.document) {\r\n            throw new Error(\"Cannot resolve '\" + url + \"'.\");\r\n        }\r\n        // Setting the url to the href propery of an anchor tag handles normalization\r\n        // for us. There are 3 main cases.\r\n        // 1. Relative path normalization e.g \"b\" -> \"http://localhost:5000/a/b\"\r\n        // 2. Absolute path normalization e.g \"/a/b\" -> \"http://localhost:5000/a/b\"\r\n        // 3. Networkpath reference normalization e.g \"//localhost:5000/a/b\" -> \"http://localhost:5000/a/b\"\r\n        var aTag = window.document.createElement(\"a\");\r\n        aTag.href = url;\r\n        this.logger.log(LogLevel.Information, \"Normalizing '\" + url + \"' to '\" + aTag.href + \"'.\");\r\n        return aTag.href;\r\n    };\r\n    HttpConnection.prototype.resolveNegotiateUrl = function (url) {\r\n        var index = url.indexOf(\"?\");\r\n        var negotiateUrl = url.substring(0, index === -1 ? url.length : index);\r\n        if (negotiateUrl[negotiateUrl.length - 1] !== \"/\") {\r\n            negotiateUrl += \"/\";\r\n        }\r\n        negotiateUrl += \"negotiate\";\r\n        negotiateUrl += index === -1 ? \"\" : url.substring(index);\r\n        if (negotiateUrl.indexOf(\"negotiateVersion\") === -1) {\r\n            negotiateUrl += index === -1 ? \"?\" : \"&\";\r\n            negotiateUrl += \"negotiateVersion=\" + this.negotiateVersion;\r\n        }\r\n        return negotiateUrl;\r\n    };\r\n    return HttpConnection;\r\n}());\r\nexport { HttpConnection };\r\nfunction transportMatches(requestedTransport, actualTransport) {\r\n    return !requestedTransport || ((actualTransport & requestedTransport) !== 0);\r\n}\r\n/** @private */\r\nvar TransportSendQueue = /** @class */ (function () {\r\n    function TransportSendQueue(transport) {\r\n        this.transport = transport;\r\n        this.buffer = [];\r\n        this.executing = true;\r\n        this.sendBufferedData = new PromiseSource();\r\n        this.transportResult = new PromiseSource();\r\n        this.sendLoopPromise = this.sendLoop();\r\n    }\r\n    TransportSendQueue.prototype.send = function (data) {\r\n        this.bufferData(data);\r\n        if (!this.transportResult) {\r\n            this.transportResult = new PromiseSource();\r\n        }\r\n        return this.transportResult.promise;\r\n    };\r\n    TransportSendQueue.prototype.stop = function () {\r\n        this.executing = false;\r\n        this.sendBufferedData.resolve();\r\n        return this.sendLoopPromise;\r\n    };\r\n    TransportSendQueue.prototype.bufferData = function (data) {\r\n        if (this.buffer.length && typeof (this.buffer[0]) !== typeof (data)) {\r\n            throw new Error(\"Expected data to be of type \" + typeof (this.buffer) + \" but was of type \" + typeof (data));\r\n        }\r\n        this.buffer.push(data);\r\n        this.sendBufferedData.resolve();\r\n    };\r\n    TransportSendQueue.prototype.sendLoop = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var transportResult, data, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!true) return [3 /*break*/, 6];\r\n                        return [4 /*yield*/, this.sendBufferedData.promise];\r\n                    case 1:\r\n                        _a.sent();\r\n                        if (!this.executing) {\r\n                            if (this.transportResult) {\r\n                                this.transportResult.reject(\"Connection stopped.\");\r\n                            }\r\n                            return [3 /*break*/, 6];\r\n                        }\r\n                        this.sendBufferedData = new PromiseSource();\r\n                        transportResult = this.transportResult;\r\n                        this.transportResult = undefined;\r\n                        data = typeof (this.buffer[0]) === \"string\" ?\r\n                            this.buffer.join(\"\") :\r\n                            TransportSendQueue.concatBuffers(this.buffer);\r\n                        this.buffer.length = 0;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        _a.trys.push([2, 4, , 5]);\r\n                        return [4 /*yield*/, this.transport.send(data)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        transportResult.resolve();\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        error_1 = _a.sent();\r\n                        transportResult.reject(error_1);\r\n                        return [3 /*break*/, 5];\r\n                    case 5: return [3 /*break*/, 0];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TransportSendQueue.concatBuffers = function (arrayBuffers) {\r\n        var totalLength = arrayBuffers.map(function (b) { return b.byteLength; }).reduce(function (a, b) { return a + b; });\r\n        var result = new Uint8Array(totalLength);\r\n        var offset = 0;\r\n        for (var _i = 0, arrayBuffers_1 = arrayBuffers; _i < arrayBuffers_1.length; _i++) {\r\n            var item = arrayBuffers_1[_i];\r\n            result.set(new Uint8Array(item), offset);\r\n            offset += item.byteLength;\r\n        }\r\n        return result.buffer;\r\n    };\r\n    return TransportSendQueue;\r\n}());\r\nexport { TransportSendQueue };\r\nvar PromiseSource = /** @class */ (function () {\r\n    function PromiseSource() {\r\n        var _this = this;\r\n        this.promise = new Promise(function (resolve, reject) {\r\n            var _a;\r\n            return _a = [resolve, reject], _this.resolver = _a[0], _this.rejecter = _a[1], _a;\r\n        });\r\n    }\r\n    PromiseSource.prototype.resolve = function () {\r\n        this.resolver();\r\n    };\r\n    PromiseSource.prototype.reject = function (reason) {\r\n        this.rejecter(reason);\r\n    };\r\n    return PromiseSource;\r\n}());\r\n//# sourceMappingURL=HttpConnection.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nimport { MessageType } from \"./IHubProtocol\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { TransferFormat } from \"./ITransport\";\r\nimport { NullLogger } from \"./Loggers\";\r\nimport { TextMessageFormat } from \"./TextMessageFormat\";\r\nvar JSON_HUB_PROTOCOL_NAME = \"json\";\r\n/** Implements the JSON Hub Protocol. */\r\nvar JsonHubProtocol = /** @class */ (function () {\r\n    function JsonHubProtocol() {\r\n        /** @inheritDoc */\r\n        this.name = JSON_HUB_PROTOCOL_NAME;\r\n        /** @inheritDoc */\r\n        this.version = 1;\r\n        /** @inheritDoc */\r\n        this.transferFormat = TransferFormat.Text;\r\n    }\r\n    /** Creates an array of {@link @microsoft/signalr.HubMessage} objects from the specified serialized representation.\r\n     *\r\n     * @param {string} input A string containing the serialized representation.\r\n     * @param {ILogger} logger A logger that will be used to log messages that occur during parsing.\r\n     */\r\n    JsonHubProtocol.prototype.parseMessages = function (input, logger) {\r\n        // The interface does allow \"ArrayBuffer\" to be passed in, but this implementation does not. So let's throw a useful error.\r\n        if (typeof input !== \"string\") {\r\n            throw new Error(\"Invalid input for JSON hub protocol. Expected a string.\");\r\n        }\r\n        if (!input) {\r\n            return [];\r\n        }\r\n        if (logger === null) {\r\n            logger = NullLogger.instance;\r\n        }\r\n        // Parse the messages\r\n        var messages = TextMessageFormat.parse(input);\r\n        var hubMessages = [];\r\n        for (var _i = 0, messages_1 = messages; _i < messages_1.length; _i++) {\r\n            var message = messages_1[_i];\r\n            var parsedMessage = JSON.parse(message);\r\n            if (typeof parsedMessage.type !== \"number\") {\r\n                throw new Error(\"Invalid payload.\");\r\n            }\r\n            switch (parsedMessage.type) {\r\n                case MessageType.Invocation:\r\n                    this.isInvocationMessage(parsedMessage);\r\n                    break;\r\n                case MessageType.StreamItem:\r\n                    this.isStreamItemMessage(parsedMessage);\r\n                    break;\r\n                case MessageType.Completion:\r\n                    this.isCompletionMessage(parsedMessage);\r\n                    break;\r\n                case MessageType.Ping:\r\n                    // Single value, no need to validate\r\n                    break;\r\n                case MessageType.Close:\r\n                    // All optional values, no need to validate\r\n                    break;\r\n                default:\r\n                    // Future protocol changes can add message types, old clients can ignore them\r\n                    logger.log(LogLevel.Information, \"Unknown message type '\" + parsedMessage.type + \"' ignored.\");\r\n                    continue;\r\n            }\r\n            hubMessages.push(parsedMessage);\r\n        }\r\n        return hubMessages;\r\n    };\r\n    /** Writes the specified {@link @microsoft/signalr.HubMessage} to a string and returns it.\r\n     *\r\n     * @param {HubMessage} message The message to write.\r\n     * @returns {string} A string containing the serialized representation of the message.\r\n     */\r\n    JsonHubProtocol.prototype.writeMessage = function (message) {\r\n        return TextMessageFormat.write(JSON.stringify(message));\r\n    };\r\n    JsonHubProtocol.prototype.isInvocationMessage = function (message) {\r\n        this.assertNotEmptyString(message.target, \"Invalid payload for Invocation message.\");\r\n        if (message.invocationId !== undefined) {\r\n            this.assertNotEmptyString(message.invocationId, \"Invalid payload for Invocation message.\");\r\n        }\r\n    };\r\n    JsonHubProtocol.prototype.isStreamItemMessage = function (message) {\r\n        this.assertNotEmptyString(message.invocationId, \"Invalid payload for StreamItem message.\");\r\n        if (message.item === undefined) {\r\n            throw new Error(\"Invalid payload for StreamItem message.\");\r\n        }\r\n    };\r\n    JsonHubProtocol.prototype.isCompletionMessage = function (message) {\r\n        if (message.result && message.error) {\r\n            throw new Error(\"Invalid payload for Completion message.\");\r\n        }\r\n        if (!message.result && message.error) {\r\n            this.assertNotEmptyString(message.error, \"Invalid payload for Completion message.\");\r\n        }\r\n        this.assertNotEmptyString(message.invocationId, \"Invalid payload for Completion message.\");\r\n    };\r\n    JsonHubProtocol.prototype.assertNotEmptyString = function (value, errorMessage) {\r\n        if (typeof value !== \"string\" || value === \"\") {\r\n            throw new Error(errorMessage);\r\n        }\r\n    };\r\n    return JsonHubProtocol;\r\n}());\r\nexport { JsonHubProtocol };\r\n//# sourceMappingURL=JsonHubProtocol.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nimport { DefaultReconnectPolicy } from \"./DefaultReconnectPolicy\";\r\nimport { HttpConnection } from \"./HttpConnection\";\r\nimport { HubConnection } from \"./HubConnection\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { JsonHubProtocol } from \"./JsonHubProtocol\";\r\nimport { NullLogger } from \"./Loggers\";\r\nimport { Arg, ConsoleLogger } from \"./Utils\";\r\n// tslint:disable:object-literal-sort-keys\r\nvar LogLevelNameMapping = {\r\n    trace: LogLevel.Trace,\r\n    debug: LogLevel.Debug,\r\n    info: LogLevel.Information,\r\n    information: LogLevel.Information,\r\n    warn: LogLevel.Warning,\r\n    warning: LogLevel.Warning,\r\n    error: LogLevel.Error,\r\n    critical: LogLevel.Critical,\r\n    none: LogLevel.None,\r\n};\r\nfunction parseLogLevel(name) {\r\n    // Case-insensitive matching via lower-casing\r\n    // Yes, I know case-folding is a complicated problem in Unicode, but we only support\r\n    // the ASCII strings defined in LogLevelNameMapping anyway, so it's fine -anurse.\r\n    var mapping = LogLevelNameMapping[name.toLowerCase()];\r\n    if (typeof mapping !== \"undefined\") {\r\n        return mapping;\r\n    }\r\n    else {\r\n        throw new Error(\"Unknown log level: \" + name);\r\n    }\r\n}\r\n/** A builder for configuring {@link @microsoft/signalr.HubConnection} instances. */\r\nvar HubConnectionBuilder = /** @class */ (function () {\r\n    function HubConnectionBuilder() {\r\n    }\r\n    HubConnectionBuilder.prototype.configureLogging = function (logging) {\r\n        Arg.isRequired(logging, \"logging\");\r\n        if (isLogger(logging)) {\r\n            this.logger = logging;\r\n        }\r\n        else if (typeof logging === \"string\") {\r\n            var logLevel = parseLogLevel(logging);\r\n            this.logger = new ConsoleLogger(logLevel);\r\n        }\r\n        else {\r\n            this.logger = new ConsoleLogger(logging);\r\n        }\r\n        return this;\r\n    };\r\n    HubConnectionBuilder.prototype.withUrl = function (url, transportTypeOrOptions) {\r\n        Arg.isRequired(url, \"url\");\r\n        Arg.isNotEmpty(url, \"url\");\r\n        this.url = url;\r\n        // Flow-typing knows where it's at. Since HttpTransportType is a number and IHttpConnectionOptions is guaranteed\r\n        // to be an object, we know (as does TypeScript) this comparison is all we need to figure out which overload was called.\r\n        if (typeof transportTypeOrOptions === \"object\") {\r\n            this.httpConnectionOptions = __assign({}, this.httpConnectionOptions, transportTypeOrOptions);\r\n        }\r\n        else {\r\n            this.httpConnectionOptions = __assign({}, this.httpConnectionOptions, { transport: transportTypeOrOptions });\r\n        }\r\n        return this;\r\n    };\r\n    /** Configures the {@link @microsoft/signalr.HubConnection} to use the specified Hub Protocol.\r\n     *\r\n     * @param {IHubProtocol} protocol The {@link @microsoft/signalr.IHubProtocol} implementation to use.\r\n     */\r\n    HubConnectionBuilder.prototype.withHubProtocol = function (protocol) {\r\n        Arg.isRequired(protocol, \"protocol\");\r\n        this.protocol = protocol;\r\n        return this;\r\n    };\r\n    HubConnectionBuilder.prototype.withAutomaticReconnect = function (retryDelaysOrReconnectPolicy) {\r\n        if (this.reconnectPolicy) {\r\n            throw new Error(\"A reconnectPolicy has already been set.\");\r\n        }\r\n        if (!retryDelaysOrReconnectPolicy) {\r\n            this.reconnectPolicy = new DefaultReconnectPolicy();\r\n        }\r\n        else if (Array.isArray(retryDelaysOrReconnectPolicy)) {\r\n            this.reconnectPolicy = new DefaultReconnectPolicy(retryDelaysOrReconnectPolicy);\r\n        }\r\n        else {\r\n            this.reconnectPolicy = retryDelaysOrReconnectPolicy;\r\n        }\r\n        return this;\r\n    };\r\n    /** Creates a {@link @microsoft/signalr.HubConnection} from the configuration options specified in this builder.\r\n     *\r\n     * @returns {HubConnection} The configured {@link @microsoft/signalr.HubConnection}.\r\n     */\r\n    HubConnectionBuilder.prototype.build = function () {\r\n        // If httpConnectionOptions has a logger, use it. Otherwise, override it with the one\r\n        // provided to configureLogger\r\n        var httpConnectionOptions = this.httpConnectionOptions || {};\r\n        // If it's 'null', the user **explicitly** asked for null, don't mess with it.\r\n        if (httpConnectionOptions.logger === undefined) {\r\n            // If our logger is undefined or null, that's OK, the HttpConnection constructor will handle it.\r\n            httpConnectionOptions.logger = this.logger;\r\n        }\r\n        // Now create the connection\r\n        if (!this.url) {\r\n            throw new Error(\"The 'HubConnectionBuilder.withUrl' method must be called before building the connection.\");\r\n        }\r\n        var connection = new HttpConnection(this.url, httpConnectionOptions);\r\n        return HubConnection.create(connection, this.logger || NullLogger.instance, this.protocol || new JsonHubProtocol(), this.reconnectPolicy);\r\n    };\r\n    return HubConnectionBuilder;\r\n}());\r\nexport { HubConnectionBuilder };\r\nfunction isLogger(logger) {\r\n    return logger.log !== undefined;\r\n}\r\n//# sourceMappingURL=HubConnectionBuilder.js.map","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { HubConnection, HubConnectionBuilder } from '@microsoft/signalr';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Chat } from '../models/chat';\r\nimport { User } from '../models/user';\r\nimport { SpinnerService } from './spinner.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ChatService {\r\n  private baseUrl = environment.api;\r\n  private hubUrl = environment.hubUrl;\r\n  private hubConnection: HubConnection;\r\n  private messageThreadSource = new BehaviorSubject<Chat[]>([]);\r\n  private messageThread$ = this.messageThreadSource.asObservable();\r\n\r\n  constructor(private http: HttpClient, private spinnerService: SpinnerService) {}\r\n\r\n  public createHubConnection(user: User) {\r\n    this.spinnerService.busy();\r\n    this.hubConnection = new HubConnectionBuilder()\r\n      .withUrl(this.hubUrl + `chat?token=${user.token}`, {\r\n        accessTokenFactory: () => user.token,\r\n      })\r\n      .withAutomaticReconnect()\r\n      .build();\r\n\r\n    this.hubConnection\r\n      .start()\r\n      .catch((error) => console.log(error))\r\n      .finally(() => this.spinnerService.idle());\r\n\r\n    this.hubConnection.on('ReceiveMessageThread', (chat) => {\r\n      this.messageThreadSource.next(chat);\r\n    });\r\n  }\r\n\r\n  public stopHubConnection() {\r\n    if (this.hubConnection) {\r\n      this.messageThreadSource.next([]);\r\n      this.hubConnection.stop();\r\n    }\r\n  }\r\n\r\n  public getMessages(id: number) {\r\n    return this.http.get<Chat[]>(this.baseUrl + `/chat?id=${id}`);\r\n  }\r\n}\r\n","<!-- Chat Left -->\r\n<div class=\"chat-header\">\r\n  <span>Chats</span>\r\n  <a href=\"javascript:void(0)\" class=\"chat-compose\">\r\n    <i class=\"material-icons\">control_point</i>\r\n  </a>\r\n</div>\r\n<form class=\"chat-search\">\r\n  <div class=\"input-group\">\r\n    <div class=\"input-group-prepend\">\r\n      <i class=\"fas fa-search\"></i>\r\n    </div>\r\n    <input type=\"text\" class=\"form-control\" placeholder=\"Search\" />\r\n  </div>\r\n</form>\r\n<div class=\"chat-users-list\">\r\n  <div class=\"chat-scroll\">\r\n    <ng-container *ngIf=\"chats.length !== 0\">\r\n      <a (click)=\"show(chat.patient.id)\" id=\"{{ chat.patient.id }}\" *ngFor=\"let chat of chats\"\r\n        [ngClass]=\"{ 'read-chat': chatMessage(chat)}\" #media_chat href=\"javascript:void(0);\" class=\"media read-chat\">\r\n        <div class=\"media-img-wrap\">\r\n          <div class=\"avatar avatar-online\" [ngClass]=\"{\r\n              'avatar-online': chat.patient.connectionId !== null,\r\n              'avatar-offline': chat.patient.connectionId === null\r\n            }\">\r\n            <img src=\"{{ chat.patient.photo }}\" alt=\"{{ chat.patient.fullname }}\" class=\"avatar-img rounded-circle\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"media-body\">\r\n          <div>\r\n            <div class=\"user-name\">{{ chat.patient.fullname }}</div>\r\n            <div class=\"user-last-chat\">{{getLastText(chat).patientContent}}</div>\r\n          </div>\r\n          <div>\r\n            <div class=\"last-chat-time block\">{{getLastText(chat).addedDate | timeago}}</div>\r\n          </div>\r\n        </div>\r\n      </a>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n<!-- /Chat Left -->","import {\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  OnInit,\r\n  Output,\r\n  QueryList,\r\n  ViewChildren,\r\n} from '@angular/core';\r\nimport { Chat, ChatMessage } from '../../models/chat';\r\n\r\n@Component({\r\n  selector: 'app-chat-lef-side-bar',\r\n  templateUrl: './chat-lef-side-bar.component.html',\r\n})\r\nexport class ChatLefSideBarComponent implements OnInit {\r\n  @ViewChildren('media_chat') mediaChat: QueryList<ElementRef>;\r\n  @Output() showChatRight = new EventEmitter();\r\n  @Input() chats: Chat[] = [];\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  public chatMessage(chat: Chat): ChatMessage {\r\n    const chatMessage: ChatMessage = Object.values(chat.chatMessageDTOs).find(x => x.chatId === chat.id && x.isSeen === false);\r\n    return chatMessage;\r\n  }\r\n\r\n  public getLastText(chat: Chat): ChatMessage | null {\r\n    const sender = chat.chatMessageDTOs[chat.chatMessageDTOs.length - 1];\r\n    const message = sender.patientContent ? sender : null;\r\n    return message;\r\n  }\r\n\r\n  public show(id: number) {\r\n    const element: ElementRef[] = this.mediaChat.toArray();\r\n    element.forEach((x) => x.nativeElement.classList.remove('active'));\r\n    element.forEach((x) => {\r\n      const elementId = parseInt(x.nativeElement.getAttribute('id'));\r\n      if (elementId === id) {\r\n        this.showChatRight.emit(id);\r\n        x.nativeElement.classList.add('active');\r\n      }\r\n    });\r\n  }\r\n}\r\n","<!-- Chat Right -->\r\n<ng-container *ngIf=\"user && show\">\r\n  <div class=\"chat-header\">\r\n    <a id=\"back_user_list\" href=\"javascript:void(0)\" class=\"back-user-list\">\r\n      <i class=\"material-icons\">chevron_left</i>\r\n    </a>\r\n    <div class=\"media\">\r\n      <div class=\"media-img-wrap\">\r\n        <div class=\"avatar\"\r\n          [ngClass]=\"{'avatar-online' : user.connectionId !== null, 'avatar-offline' : user.connectionId === null}\">\r\n          <img src={{user.photo}} alt={{user.fullname}} class=\"avatar-img rounded-circle\">\r\n        </div>\r\n      </div>\r\n      <div class=\"media-body\">\r\n        <div class=\"user-name\">{{user.fullname}}</div>\r\n        <div class=\"user-status\">{{user.connectionId ? 'online' : 'offline'}}</div>\r\n      </div>\r\n    </div>\r\n    <div class=\"chat-options\">\r\n      <a href=\"javascript:void(0)\">\r\n        <i class=\"material-icons\">more_vert</i>\r\n      </a>\r\n    </div>\r\n  </div>\r\n  <div class=\"chat-body\">\r\n    <div class=\"chat-scroll\">\r\n      <ul class=\"list-unstyled\">\r\n        <li class=\"media sent\">\r\n          <div class=\"media-body\">\r\n            <div class=\"msg-box\">\r\n              <div>\r\n                <p>Hello. What can I do for you?</p>\r\n                <ul class=\"chat-msg-info\">\r\n                  <li>\r\n                    <div class=\"chat-time\">\r\n                      <span>8:30 AM</span>\r\n                    </div>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </li>\r\n        <li class=\"media received\">\r\n          <div class=\"avatar\">\r\n            <img src=\"assets/img/patients/patient.jpg\" alt=\"User Image\" class=\"avatar-img rounded-circle\">\r\n          </div>\r\n          <div class=\"media-body\">\r\n            <div class=\"msg-box\">\r\n              <div>\r\n                <p>I'm just looking around.</p>\r\n                <p>Will you tell me something about yourself?</p>\r\n                <ul class=\"chat-msg-info\">\r\n                  <li>\r\n                    <div class=\"chat-time\">\r\n                      <span>8:35 AM</span>\r\n                    </div>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n            <div class=\"msg-box\">\r\n              <div>\r\n                <p>Are you there? That time!</p>\r\n                <ul class=\"chat-msg-info\">\r\n                  <li>\r\n                    <div class=\"chat-time\">\r\n                      <span>8:40 AM</span>\r\n                    </div>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n            <div class=\"msg-box\">\r\n              <div>\r\n                <div class=\"chat-msg-attachments\">\r\n                  <div class=\"chat-attachment\">\r\n                    <img src=\"assets/img/img-02.jpg\" alt=\"Attachment\">\r\n                    <div class=\"chat-attach-caption\">placeholder.jpg</div>\r\n                    <a href=\"#\" class=\"chat-attach-download\">\r\n                      <i class=\"fas fa-download\"></i>\r\n                    </a>\r\n                  </div>\r\n                  <div class=\"chat-attachment\">\r\n                    <img src=\"assets/img/img-03.jpg\" alt=\"Attachment\">\r\n                    <div class=\"chat-attach-caption\">placeholder.jpg</div>\r\n                    <a href=\"#\" class=\"chat-attach-download\">\r\n                      <i class=\"fas fa-download\"></i>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <ul class=\"chat-msg-info\">\r\n                  <li>\r\n                    <div class=\"chat-time\">\r\n                      <span>8:41 AM</span>\r\n                    </div>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </li>\r\n        <li class=\"chat-date\">Today</li>\r\n        <li class=\"media received\">\r\n          <div class=\"avatar\">\r\n            <img src=\"assets/img/patients/patient.jpg\" alt=\"User Image\" class=\"avatar-img rounded-circle\">\r\n          </div>\r\n          <div class=\"media-body\">\r\n            <div class=\"msg-box\">\r\n              <div>\r\n                <div class=\"msg-typing\">\r\n                  <span></span>\r\n                  <span></span>\r\n                  <span></span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n  <div class=\"chat-footer\">\r\n    <div class=\"input-group\">\r\n      <div class=\"input-group-prepend\">\r\n        <div class=\"btn-file btn\">\r\n          <i class=\"fa fa-paperclip\"></i>\r\n          <input type=\"file\">\r\n        </div>\r\n      </div>\r\n      <input type=\"text\" class=\"input-msg-send form-control\" placeholder=\"Type something\">\r\n      <div class=\"input-group-append\">\r\n        <button type=\"button\" class=\"btn msg-send-btn\"><i class=\"fab fa-telegram-plane\"></i></button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-container>\r\n<!-- /Chat Right -->","import { Component, Input, OnInit } from '@angular/core';\r\nimport { User } from '../../models/user';\r\n\r\n@Component({\r\n  selector: 'app-chat-message',\r\n  templateUrl: './chat-message.component.html'\r\n})\r\nexport class ChatMessageComponent implements OnInit {\r\n  @Input() show = false;\r\n  @Input() user: User;\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<!-- Page Content -->\r\n<div class=\"content\">\r\n  <div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n      <div class=\"col-xl-12\">\r\n        <div class=\"chat-window\">\r\n          <div class=\"chat-cont-left\">\r\n            <app-chat-lef-side-bar [chats]=\"chats\" (showChatRight)=\"showChat($event)\"></app-chat-lef-side-bar>\r\n          </div>\r\n          <div #chat_list class=\"chat-cont-right\" [ngClass]=\"{'current' : showChatRight}\">\r\n            <app-chat-message *ngIf=\"user\" [show]=\"showChatRight\" [user]=\"user\"></app-chat-message>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- /Row -->\r\n  </div>\r\n</div>\t\t\r\n<!-- /Page Content -->","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { timer } from 'rxjs';\r\nimport { Chat } from 'src/app/shared/models/chat';\r\nimport { User } from 'src/app/shared/models/user';\r\nimport { ChatService } from 'src/app/shared/services/chat.service';\r\n\r\n@Component({\r\n  selector: 'app-messages',\r\n  templateUrl: './messages.component.html',\r\n})\r\nexport class MessagesComponent implements OnInit {\r\n  @ViewChild('chat_list') chatlist: ElementRef;\r\n  public user: User;\r\n  public chats: Chat[] = [];\r\n  public showChatRight = false;\r\n  public loading = false;\r\n\r\n  constructor(private chatService: ChatService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.user = JSON.parse(localStorage.getItem('token'));\r\n    this.loadHubConnection();\r\n    this.loadMessages();\r\n  }\r\n\r\n  private loadHubConnection() {\r\n    if (this.user !== null) {\r\n      this.loading = true;\r\n      this.chatService.createHubConnection(this.user);\r\n    }\r\n  }\r\n\r\n  private loadMessages() {\r\n    if (this.user !== null) {\r\n      this.chatService\r\n        .getMessages(this.user.id)\r\n        .subscribe((response: Chat[]) => {\r\n          this.chats = response;\r\n        });\r\n    }\r\n  }\r\n\r\n  public showChat(id: number) {\r\n    const chat: Chat = Object.values(this.chats).find(\r\n      (x) => x.patient.id === id\r\n    );\r\n    this.user = chat.patient ? chat.patient : null;\r\n    this.showChatRight = false;\r\n    if (this.user !== null) {\r\n      timer(100)\r\n        .toPromise()\r\n        .then(() => {\r\n          this.showChatRight = true;\r\n        });\r\n    }\r\n  }\r\n}\r\n","<app-main-breadcrumb [title]='\"My Patients\"'></app-main-breadcrumb>\r\n<!-- Page Content -->\r\n<div class=\"content\">\r\n  <div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-5 col-lg-4 col-xl-3 theiaStickySidebar\">\r\n        <app-doctor-sidebar></app-doctor-sidebar>\r\n      </div>\r\n      <div class=\"col-md-7 col-lg-8 col-xl-9\">\r\n        <div class=\"row row-grid\">\r\n          <div class=\"col-md-6 col-lg-4 col-xl-3\" *ngFor=\"let item of patients\">\r\n            <div class=\"card widget-profile pat-widget-profile\">\r\n              <div class=\"card-body\">\r\n                <div class=\"pro-widget-content\">\r\n                  <div class=\"profile-info-widget\">\r\n                    <a [routerLink]=\"['/main/doctor/patient-profile', item.slug]\" class=\"booking-doc-img\">\r\n                      <img src={{item.photo}} alt={{item.fullname}}>\r\n                    </a>\r\n                    <div class=\"profile-det-info\">\r\n                      <h3><a [routerLink]=\"['/main/doctor/patient-profile', item.slug]\">{{item.fullname}}</a></h3>\r\n\r\n                      <div class=\"patient-details\">\r\n                        <h5><b>Patient ID :</b> P{{item.code}}</h5>\r\n                        <h5 class=\"mb-0\"><i class=\"fas fa-map-marker-alt\"></i> {{item.fullAddress}}</h5>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"patient-info\">\r\n                  <ul>\r\n                    <li>Phone <span>{{item.phone}}</span></li>\r\n                    <li>Age <span>{{item.age}} Years, Male</span></li>\r\n                    <li>Blood Group <span>{{item.bloodGroup}}</span></li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- /Page Content -->","import { Component, Input, OnInit } from '@angular/core';\r\nimport { User } from 'src/app/shared/models/user';\r\n\r\n@Component({\r\n  selector: 'app-my-patients',\r\n  templateUrl: './my-patients.component.html'\r\n})\r\nexport class MyPatientsComponent implements OnInit {\r\n  @Input() patients: User[] = [];\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-patient-profile-appointment',\r\n  templateUrl: './patient-profile-appointment.component.html'\r\n})\r\nexport class PatientProfileAppointmentComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"card card-table mb-0\">\r\n  <div class=\"card-body\">\r\n    <div class=\"table-responsive\">\r\n      <table class=\"table table-hover table-center mb-0\">\r\n        <thead>\r\n          <tr>\r\n            <th>Doctor</th>\r\n            <th>Appt Date</th>\r\n            <th>Booking Date</th>\r\n            <th>Amount</th>\r\n            <th>Follow Up</th>\r\n            <th>Status</th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td>\r\n              <h2 class=\"table-avatar\">\r\n                <a href=\"javascript:void(0);\" class=\"avatar avatar-sm mr-2\">\r\n                  <img class=\"avatar-img rounded-circle\" src=\"assets/img/doctors/doctor-thumb-02.jpg\" alt=\"User Image\">\r\n                </a>\r\n                <a href=\"javascript:void(0);\">Dr. Darren Elder <span>Dental</span></a>\r\n              </h2>\r\n            </td>\r\n            <td>14 Nov 2019 <span class=\"d-block text-info\">10.00 AM</span></td>\r\n            <td>12 Nov 2019</td>\r\n            <td>$160</td>\r\n            <td>16 Nov 2019</td>\r\n            <td><span class=\"badge badge-pill bg-success-light\">Confirm</span></td>\r\n            <td class=\"text-right\">\r\n              <div class=\"table-action\">\r\n                <a href=\"javascript:void(0);\" class=\"btn btn-sm bg-success-light\">\r\n                  <i class=\"far fa-edit\"></i> Edit\r\n                </a>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>\r\n              <h2 class=\"table-avatar\">\r\n                <a href=\"javascript:void(0);\" class=\"avatar avatar-sm mr-2\">\r\n                  <img class=\"avatar-img rounded-circle\" src=\"assets/img/doctors/doctor-thumb-02.jpg\" alt=\"User Image\">\r\n                </a>\r\n                <a href=\"javascript:void(0);\">Dr. Darren Elder <span>Dental</span></a>\r\n              </h2>\r\n            </td>\r\n            <td>11 Nov 2019 <span class=\"d-block text-info\">11.00 AM</span></td>\r\n            <td>10 Nov 2019</td>\r\n            <td>$400</td>\r\n            <td>13 Nov 2019</td>\r\n            <td><span class=\"badge badge-pill bg-danger-light\">Cancelled</span></td>\r\n            <td class=\"text-right\">\r\n              <div class=\"table-action\">\r\n                <a href=\"javascript:void(0);\" class=\"btn btn-sm bg-success-light\">\r\n                  <i class=\"far fa-edit\"></i> Edit\r\n                </a>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>\r\n              <h2 class=\"table-avatar\">\r\n                <a href=\"javascript:void(0);\" class=\"avatar avatar-sm mr-2\">\r\n                  <img class=\"avatar-img rounded-circle\" src=\"assets/img/doctors/doctor-thumb-02.jpg\" alt=\"User Image\">\r\n                </a>\r\n                <a href=\"javascript:void(0);\">Dr. Darren Elder <span>Dental</span></a>\r\n              </h2>\r\n            </td>\r\n            <td>10 Nov 2019 <span class=\"d-block text-info\">3.00 PM</span></td>\r\n            <td>10 Nov 2019</td>\r\n            <td>$350</td>\r\n            <td>12 Nov 2019</td>\r\n            <td><span class=\"badge badge-pill bg-warning-light\">Pending</span></td>\r\n            <td class=\"text-right\">\r\n              <div class=\"table-action\">\r\n                <a href=\"edit-prescription.html\" class=\"btn btn-sm bg-success-light\">\r\n                  <i class=\"far fa-edit\"></i> Edit\r\n                </a>\r\n                <a href=\"javascript:void(0);\" class=\"btn btn-sm bg-danger-light\">\r\n                  <i class=\"far fa-trash-alt\"></i> Cancel\r\n                </a>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>\r\n              <h2 class=\"table-avatar\">\r\n                <a href=\"javascript:void(0);\" class=\"avatar avatar-sm mr-2\">\r\n                  <img class=\"avatar-img rounded-circle\" src=\"assets/img/doctors/doctor-thumb-02.jpg\" alt=\"User Image\">\r\n                </a>\r\n                <a href=\"javascript:void(0);\">Dr. Darren Elder <span>Dental</span></a>\r\n              </h2>\r\n            </td>\r\n            <td>5 Nov 2019 <span class=\"d-block text-info\">5.00 PM</span></td>\r\n            <td>1 Nov 2019</td>\r\n            <td>$100</td>\r\n            <td>7 Nov 2019</td>\r\n            <td><span class=\"badge badge-pill bg-info-light\">Completed</span></td>\r\n            <td class=\"text-right\">\r\n              <div class=\"table-action\">\r\n                <a href=\"javascript:void(0);\" class=\"btn btn-sm bg-primary-light\">\r\n                  <i class=\"far fa-clock\"></i> Reschedule\r\n                </a>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-patient-profile-prescription',\r\n  templateUrl: './patient-profile-prescription.component.html'\r\n})\r\nexport class PatientProfilePrescriptionComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"text-right\">\r\n  <a href=\"add-prescription.html\" class=\"add-new-btn\">Add Prescription</a>\r\n</div>\r\n<div class=\"card card-table mb-0\">\r\n  <div class=\"card-body\">\r\n    <div class=\"table-responsive\">\r\n      <table class=\"table table-hover table-center mb-0\">\r\n        <thead>\r\n          <tr>\r\n            <th>Date </th>\r\n            <th>Name</th>\t\t\t\t\t\t\t\t\t\r\n            <th>Created by </th>\r\n            <th></th>\r\n          </tr>     \r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td>14 Nov 2019</td>\r\n            <td>Prescription 1</td>\r\n            <td>\r\n              <h2 class=\"table-avatar\">\r\n                <a href=\"javascript:void(0);\" class=\"avatar avatar-sm mr-2\">\r\n                  <img class=\"avatar-img rounded-circle\" src=\"assets/img/doctors/doctor-thumb-01.jpg\" alt=\"User Image\">\r\n                </a>\r\n                <a href=\"javascript:void(0);\">Dr. Ruby Perrin <span>Dental</span></a>\r\n              </h2>\r\n            </td>\r\n            <td class=\"text-right\">\r\n              <div class=\"table-action\">\r\n                <a href=\"javascript:void(0);\" class=\"btn btn-sm bg-primary-light\">\r\n                  <i class=\"fas fa-print\"></i> Print\r\n                </a>\r\n                <a href=\"javascript:void(0);\" class=\"btn btn-sm bg-info-light\">\r\n                  <i class=\"far fa-eye\"></i> View\r\n                </a>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>13 Nov 2019</td>\r\n            <td>Prescription 2</td>\r\n            <td>\r\n              <h2 class=\"table-avatar\">\r\n                <a href=\"javascript:void(0);\" class=\"avatar avatar-sm mr-2\">\r\n                  <img class=\"avatar-img rounded-circle\" src=\"assets/img/doctors/doctor-thumb-02.jpg\" alt=\"User Image\">\r\n                </a>\r\n                <a href=\"javascript:void(0);\">Dr. Darren Elder <span>Dental</span></a>\r\n              </h2>\r\n            </td>\r\n            <td class=\"text-right\">\r\n              <div class=\"table-action\">\r\n                <a href=\"javascript:void(0);\" class=\"btn btn-sm bg-primary-light\">\r\n                  <i class=\"fas fa-print\"></i> Print\r\n                </a>\r\n                <a href=\"javascript:void(0);\" class=\"btn btn-sm bg-info-light\">\r\n                  <i class=\"far fa-eye\"></i> View\r\n                </a>\r\n                <a href=\"edit-prescription.html\" class=\"btn btn-sm bg-success-light\">\r\n                  <i class=\"fas fa-edit\"></i> Edit\r\n                </a>\r\n                <a href=\"javascript:void(0);\" class=\"btn btn-sm bg-danger-light\">\r\n                  <i class=\"far fa-trash-alt\"></i> Delete\r\n                </a>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\t\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { ModalServicesService } from '../../services/modal-services.service';\r\n\r\n@Component({\r\n  selector: 'app-patient-profile-medical-record',\r\n  templateUrl: './patient-profile-medical-record.component.html',\r\n})\r\nexport class PatientProfileMedicalRecordComponent implements OnInit {\r\n  constructor(private modalService: ModalServicesService) {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  public openAddEditMedicalRecor() {\r\n    this.modalService.medicalRecord();\r\n  }\r\n\r\n  public openAppointmentDetails() {\r\n    this.modalService.appointmentDetails();\r\n  }\r\n}\r\n","<div class=\"text-right\">\r\n  <a (click)=\"openAddEditMedicalRecor()\" href=\"javascript:void(0);\" class=\"add-new-btn\">Add Medical Records</a>\r\n</div>\r\n<div class=\"card card-table mb-0\">\r\n  <div class=\"card-body\">\r\n    <div class=\"table-responsive\">\r\n      <table class=\"table table-hover table-center mb-0\">\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Date </th>\r\n            <th>Description</th>\r\n            <th>Attachment</th>\r\n            <th>Created</th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td><a href=\"javascript:void(0);\">#MR-0010</a></td>\r\n            <td>14 Nov 2019</td>\r\n            <td>Dental Filling</td>\r\n            <td><a href=\"#\">dental-test.pdf</a></td>\r\n            <td>\r\n              <h2 class=\"table-avatar\">\r\n                <a href=\"javascript:void(0);\" class=\"avatar avatar-sm mr-2\">\r\n                  <img class=\"avatar-img rounded-circle\" src=\"assets/img/doctors/doctor-thumb-01.jpg\" alt=\"User Image\">\r\n                </a>\r\n                <a href=\"javascript:void(0);\">Dr. Ruby Perrin <span>Dental</span></a>\r\n              </h2>\r\n            </td>\r\n            <td class=\"text-right\">\r\n              <div class=\"table-action\">\r\n                <a href=\"javascript:void(0);\" class=\"btn btn-sm bg-primary-light\">\r\n                  <i class=\"fas fa-print\"></i> Print\r\n                </a>\r\n                <a (click)=\"openAppointmentDetails()\" href=\"javascript:void(0);\" class=\"btn btn-sm bg-info-light\">\r\n                  <i class=\"far fa-eye\"></i> View\r\n                </a>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td><a href=\"javascript:void(0);\">#MR-0009</a></td>\r\n            <td>13 Nov 2019</td>\r\n            <td>Teeth Cleaning</td>\r\n            <td><a href=\"#\">dental-test.pdf</a></td>\r\n            <td>\r\n              <h2 class=\"table-avatar\">\r\n                <a href=\"javascript:void(0);\" class=\"avatar avatar-sm mr-2\">\r\n                  <img class=\"avatar-img rounded-circle\" src=\"assets/img/doctors/doctor-thumb-02.jpg\" alt=\"User Image\">\r\n                </a>\r\n                <a href=\"javascript:void(0);\">Dr. Darren Elder <span>Dental</span></a>\r\n              </h2>\r\n            </td>\r\n            <td class=\"text-right\">\r\n              <div class=\"table-action\">\r\n                <a href=\"javascript:void(0);\" class=\"btn btn-sm bg-primary-light\">\r\n                  <i class=\"fas fa-print\"></i> Print\r\n                </a>\r\n                <a (click)=\"openAppointmentDetails()\" href=\"javascript:void(0);\" class=\"btn btn-sm bg-info-light\">\r\n                  <i class=\"far fa-eye\"></i> View\r\n                </a>\r\n                <a (click)=\"openAddEditMedicalRecor()\" href=\"javascript:void(0)\" class=\"btn btn-sm bg-success-light\">\r\n                  <i class=\"fas fa-edit\"></i> Edit\r\n                </a>\r\n                <a href=\"javascript:void(0);\" class=\"btn btn-sm bg-danger-light\">\r\n                  <i class=\"far fa-trash-alt\"></i> Delete\r\n                </a>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-patient-profile-billing',\r\n  templateUrl: './patient-profile-billing.component.html'\r\n})\r\nexport class PatientProfileBillingComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"card card-table mb-0\">\r\n  <app-invoice-table></app-invoice-table>\r\n</div>","import { Component, ElementRef, OnInit, QueryList, ViewChildren } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-patient-user-tabs',\r\n  templateUrl: './patient-user-tabs.component.html'\r\n})\r\nexport class PatientUserTabsComponent implements OnInit {\r\n  @ViewChildren('activeLink') activeLinks!: QueryList<ElementRef>;\r\n  @ViewChildren('patient_profile') patientProfiles!: QueryList<ElementRef>;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  public switchNavTabs(event: Event) {\r\n    event.preventDefault();\r\n\r\n    const target = event.currentTarget as HTMLElement;\r\n    const href = target.getAttribute('href')?.replace('#', '');\r\n    const navLink: ElementRef[] = this.activeLinks.toArray();\r\n    const patientProfiles: ElementRef[] = this.patientProfiles.toArray();\r\n\r\n    patientProfiles.forEach((x) => {\r\n      x.nativeElement.className = 'tab-pane fade';\r\n      if (x.nativeElement.getAttribute('id') === href) {\r\n        x.nativeElement.className = 'tab-pane fade show active';\r\n      }\r\n    });\r\n\r\n    navLink.forEach((x) => (x.nativeElement.className = 'nav-link'));\r\n\r\n    target.classList.add('active');\r\n  }\r\n}\r\n","<div class=\"card\">\r\n  <div class=\"card-body pt-0\">\r\n    <div class=\"user-tabs\">\r\n      <ul class=\"nav nav-tabs nav-tabs-bottom nav-justified flex-wrap\">\r\n        <li class=\"nav-item\">\r\n          <a (click)=\"switchNavTabs($event)\" #activeLink class=\"nav-link active\" href=\"#appointments\">Appointments</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a (click)=\"switchNavTabs($event)\" #activeLink class=\"nav-link\" href=\"#pres\"><span>Prescription</span></a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a (click)=\"switchNavTabs($event)\" #activeLink class=\"nav-link\" href=\"#medical\"><span\r\n              class=\"med-records\">Medical Records</span></a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a (click)=\"switchNavTabs($event)\" #activeLink class=\"nav-link\" href=\"#billing\"><span>Billing</span></a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"tab-content\">\r\n      <!-- Appointment Tab -->\r\n      <div #patient_profile class=\"tab-pane fade show active\" id=\"appointments\">\r\n        <app-patient-profile-appointment></app-patient-profile-appointment>\r\n      </div>\r\n      <!-- /Appointment Tab -->\r\n      <!-- Prescription Tab -->\r\n      <div #patient_profile class=\"tab-pane fade\" id=\"pres\">\r\n        <app-patient-profile-prescription></app-patient-profile-prescription>\r\n      </div>\r\n      <!-- /Prescription Tab -->\r\n      <!-- Medical Records Tab -->\r\n      <div #patient_profile class=\"tab-pane fade\" id=\"medical\">\r\n        <app-patient-profile-medical-record></app-patient-profile-medical-record>\r\n      </div>\r\n      <!-- /Medical Records Tab -->\r\n      <!-- Billing Tab -->\r\n      <div #patient_profile class=\"tab-pane\" id=\"billing\">\r\n        <app-patient-profile-billing></app-patient-profile-billing>\r\n      </div>\r\n      <!-- Billing Tab -->\r\n    </div>\r\n  </div>\r\n</div>","<app-main-breadcrumb [title]='\"Patient Profile\"'></app-main-breadcrumb>\r\n\r\n<!-- Page Content -->\r\n<div class=\"content\">\r\n  <div class=\"container-fluid\">\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-md-5 col-lg-4 col-xl-3 theiaStickySidebar dct-dashbd-lft\">\r\n      \r\n        <!-- Profile Widget -->\r\n        <div class=\"card widget-profile pat-widget-profile\" *ngIf=\"patient\">\r\n          <div class=\"card-body\">\r\n            <div class=\"pro-widget-content\">\r\n              <div class=\"profile-info-widget\">\r\n                <a href=\"javascript:void(0);\" class=\"booking-doc-img\">\r\n                  <img src={{patient.photo}} alt={{patient.fullname}}>\r\n                </a>\r\n                <div class=\"profile-det-info\">\r\n                  <h3>{{patient.fullname}}</h3>\r\n                  \r\n                  <div class=\"patient-details\">\r\n                    <h5><b>Patient ID :</b> PT{{patient.code}}</h5>\r\n                    <h5 class=\"mb-0\"><i class=\"fas fa-map-marker-alt\"></i> {{patient.fullAddress}}</h5>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"patient-info\">\r\n              <ul>\r\n                <li>Phone <span>{{patient.phone}}</span></li>\r\n                <li>Age <span>{{patient.age}} Years, Male</span></li>\r\n                <li>Blood Group <span>{{patient.bloodGroup}}</span></li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- /Profile Widget -->\r\n        \r\n        <!-- Last Booking -->\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">\r\n            <h4 class=\"card-title\">Last Booking</h4>\r\n          </div>\r\n          <ul class=\"list-group list-group-flush\">\r\n            <li class=\"list-group-item\">\r\n              <div class=\"media align-items-center\">\r\n                <div class=\"mr-3\">\r\n                  <img alt=\"Image placeholder\" src=\"assets/img/doctors/doctor-thumb-02.jpg\" class=\"avatar  rounded-circle\">\r\n                </div>\r\n                <div class=\"media-body\">\r\n                  <h5 class=\"d-block mb-0\">Dr. Darren Elder </h5>\r\n                  <span class=\"d-block text-sm text-muted\">Dentist</span>\r\n                  <span class=\"d-block text-sm text-muted\">14 Nov 2019 5.00 PM</span>\r\n                </div>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <!-- /Last Booking -->\r\n        \r\n      </div>\r\n\r\n      <div class=\"col-md-7 col-lg-8 col-xl-9 dct-appoinment\">\r\n        <app-patient-user-tabs></app-patient-user-tabs>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n\r\n</div>\t\t\r\n<!-- /Page Content -->","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { User } from 'src/app/shared/models/user';\r\nimport { DoctorService } from 'src/app/shared/services/doctor.service';\r\n\r\n@Component({\r\n  selector: 'app-patient-profile',\r\n  templateUrl: './patient-profile.component.html',\r\n})\r\nexport class PatientProfileComponent implements OnInit {\r\n  public patient!: User;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private doctorService: DoctorService,\r\n    private router: Router\r\n  ) {\r\n    this.router.routeReuseStrategy.shouldReuseRoute = () => false;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.apiResponse();\r\n  }\r\n\r\n  private apiResponse() {\r\n    const slug: any = this.route.snapshot.paramMap.get('slug');\r\n    this.doctorService.patientBySlug(slug).forEach((response) => (this.patient = response));\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-profile-settings',\n  templateUrl: './profile-settings.component.html'\n})\nexport class ProfileSettingsComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<app-main-breadcrumb [title]='\"Profile Settings\"'></app-main-breadcrumb>\n  \n  <!-- Page Content -->\n  <div class=\"content\">\n    <div class=\"container-fluid\">\n\n      <div class=\"row\">\n        <div class=\"col-md-5 col-lg-4 col-xl-3 theiaStickySidebar\">\n        <app-doctor-sidebar></app-doctor-sidebar>\n        </div>\n        \n        <div class=\"col-md-7 col-lg-8 col-xl-9\">\n        \n          <!-- Basic Information -->\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <h4 class=\"card-title\">Basic Information</h4>\n              <div class=\"row form-row\">\n                <div class=\"col-md-12\">\n                  <div class=\"form-group\">\n                    <div class=\"change-avatar\">\n                      <div class=\"profile-img\">\n                        <img src=\"assets/img/doctors/doctor-thumb-02.jpg\" alt=\"User Image\">\n                      </div>\n                      <div class=\"upload-img\">\n                        <div class=\"change-photo-btn\">\n                          <span><i class=\"fa fa-upload\"></i> Upload Photo</span>\n                          <input type=\"file\" class=\"upload\">\n                        </div>\n                        <small class=\"form-text text-muted\">Allowed JPG, GIF or PNG. Max size of 2MB</small>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <div class=\"form-group\">\n                    <label>Username <span class=\"text-danger\">*</span></label>\n                    <input type=\"text\" class=\"form-control\" readonly>\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <div class=\"form-group\">\n                    <label>Email <span class=\"text-danger\">*</span></label>\n                    <input type=\"email\" class=\"form-control\" readonly>\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <div class=\"form-group\">\n                    <label>First Name <span class=\"text-danger\">*</span></label>\n                    <input type=\"text\" class=\"form-control\">\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <div class=\"form-group\">\n                    <label>Last Name <span class=\"text-danger\">*</span></label>\n                    <input type=\"text\" class=\"form-control\">\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <div class=\"form-group\">\n                    <label>Phone Number</label>\n                    <input type=\"text\" class=\"form-control\">\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <div class=\"form-group\">\n                    <label>Gender</label>\n                    <select class=\"form-control select\">\n                      <option>Select</option>\n                      <option>Male</option>\n                      <option>Female</option>\n                    </select>\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <div class=\"form-group mb-0\">\n                    <label>Date of Birth</label>\n                    <input type=\"text\" class=\"form-control\">\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <!-- /Basic Information -->\n          \n          <!-- About Me -->\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <h4 class=\"card-title\">About Me</h4>\n              <div class=\"form-group mb-0\">\n                <label>Biography</label>\n                <textarea class=\"form-control\" rows=\"5\"></textarea>\n              </div>\n            </div>\n          </div>\n          <!-- /About Me -->\n          \n          <!-- Clinic Info -->\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <h4 class=\"card-title\">Clinic Info</h4>\n              <div class=\"row form-row\">\n                <div class=\"col-md-6\">\n                  <div class=\"form-group\">\n                    <label>Clinic Name</label>\n                    <input type=\"text\" class=\"form-control\">\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <div class=\"form-group\">\n                    <label>Clinic Address</label>\n                    <input type=\"text\" class=\"form-control\">\n                  </div>\n                </div>\n                <div class=\"col-md-12\">\n                  <div class=\"form-group\">\n                    <label>Clinic Images</label>\n                    <form action=\"#\" class=\"dropzone\"></form>\n                  </div>\n                  <div class=\"upload-wrap\">\n                    <div class=\"upload-images\">\n                      <img src=\"assets/img/features/feature-01.jpg\" alt=\"Upload Image\">\n                      <a href=\"javascript:void(0);\" class=\"btn btn-icon btn-danger btn-sm\"><i class=\"far fa-trash-alt\"></i></a>\n                    </div>\n                    <div class=\"upload-images\">\n                      <img src=\"assets/img/features/feature-02.jpg\" alt=\"Upload Image\">\n                      <a href=\"javascript:void(0);\" class=\"btn btn-icon btn-danger btn-sm\"><i class=\"far fa-trash-alt\"></i></a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <!-- /Clinic Info -->\n\n          <!-- Contact Details -->\n          <div class=\"card contact-card\">\n            <div class=\"card-body\">\n              <h4 class=\"card-title\">Contact Details</h4>\n              <div class=\"row form-row\">\n                <div class=\"col-md-6\">\n                  <div class=\"form-group\">\n                    <label>Address Line 1</label>\n                    <input type=\"text\" class=\"form-control\">\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <div class=\"form-group\">\n                    <label class=\"control-label\">Address Line 2</label>\n                    <input type=\"text\" class=\"form-control\">\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <div class=\"form-group\">\n                    <label class=\"control-label\">City</label>\n                    <input type=\"text\" class=\"form-control\">\n                  </div>\n                </div>\n\n                <div class=\"col-md-6\">\n                  <div class=\"form-group\">\n                    <label class=\"control-label\">State / Province</label>\n                    <input type=\"text\" class=\"form-control\">\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <div class=\"form-group\">\n                    <label class=\"control-label\">Country</label>\n                    <input type=\"text\" class=\"form-control\">\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <div class=\"form-group\">\n                    <label class=\"control-label\">Postal Code</label>\n                    <input type=\"text\" class=\"form-control\">\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <!-- /Contact Details -->\n          \n          <!-- Pricing -->\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <h4 class=\"card-title\">Pricing</h4>\n              \n              <div class=\"form-group mb-0\">\n                <div id=\"pricing_select\">\n                  <div class=\"custom-control custom-radio custom-control-inline\">\n                    <input type=\"radio\" id=\"price_free\" name=\"rating_option\" class=\"custom-control-input\" value=\"price_free\" checked>\n                    <label class=\"custom-control-label\" for=\"price_free\">Free</label>\n                  </div>\n                  <div class=\"custom-control custom-radio custom-control-inline\">\n                    <input type=\"radio\" id=\"price_custom\" name=\"rating_option\" value=\"custom_price\" class=\"custom-control-input\">\n                    <label class=\"custom-control-label\" for=\"price_custom\">Custom Price (per hour)</label>\n                  </div>\n                </div>\n\n              </div>\n              \n              <div class=\"row custom_price_cont\" id=\"custom_price_cont\" style=\"display: none;\">\n                <div class=\"col-md-4\">\n                  <input type=\"text\" class=\"form-control\" id=\"custom_rating_input\" name=\"custom_rating_count\" value=\"\" placeholder=\"20\">\n                  <small class=\"form-text text-muted\">Custom price you can add</small>\n                </div>\n              </div>\n              \n            </div>\n          </div>\n          <!-- /Pricing -->\n          \n          <!-- Services and Specialization -->\n          <div class=\"card services-card\">\n            <div class=\"card-body\">\n              <h4 class=\"card-title\">Services and Specialization</h4>\n              <div class=\"form-group\">\n                <label>Services</label>\n                <input type=\"text\" data-role=\"tagsinput\" class=\"input-tags form-control\" placeholder=\"Enter Services\" name=\"services\" value=\"Tooth cleaning \" id=\"services\">\n                <small class=\"form-text text-muted\">Note : Type & Press enter to add new services</small>\n              </div> \n              <div class=\"form-group mb-0\">\n                <label>Specialization </label>\n                <input class=\"input-tags form-control\" type=\"text\" data-role=\"tagsinput\" placeholder=\"Enter Specialization\" name=\"specialist\" value=\"Children Care,Dental Care\" id=\"specialist\">\n                <small class=\"form-text text-muted\">Note : Type & Press  enter to add new specialization</small>\n              </div> \n            </div>              \n          </div>\n          <!-- /Services and Specialization -->\n         \n          <!-- Education -->\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <h4 class=\"card-title\">Education</h4>\n              <div class=\"education-info\">\n                <div class=\"row form-row education-cont\">\n                  <div class=\"col-12 col-md-10 col-lg-11\">\n                    <div class=\"row form-row\">\n                      <div class=\"col-12 col-md-6 col-lg-4\">\n                        <div class=\"form-group\">\n                          <label>Degree</label>\n                          <input type=\"text\" class=\"form-control\">\n                        </div> \n                      </div>\n                      <div class=\"col-12 col-md-6 col-lg-4\">\n                        <div class=\"form-group\">\n                          <label>College/Institute</label>\n                          <input type=\"text\" class=\"form-control\">\n                        </div> \n                      </div>\n                      <div class=\"col-12 col-md-6 col-lg-4\">\n                        <div class=\"form-group\">\n                          <label>Year of Completion</label>\n                          <input type=\"text\" class=\"form-control\">\n                        </div> \n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"add-more\">\n                <a href=\"javascript:void(0);\" class=\"add-education\"><i class=\"fa fa-plus-circle\"></i> Add More</a>\n              </div>\n            </div>\n          </div>\n          <!-- /Education -->\n        \n          <!-- Experience -->\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <h4 class=\"card-title\">Experience</h4>\n              <div class=\"experience-info\">\n                <div class=\"row form-row experience-cont\">\n                  <div class=\"col-12 col-md-10 col-lg-11\">\n                    <div class=\"row form-row\">\n                      <div class=\"col-12 col-md-6 col-lg-4\">\n                        <div class=\"form-group\">\n                          <label>Hospital Name</label>\n                          <input type=\"text\" class=\"form-control\">\n                        </div> \n                      </div>\n                      <div class=\"col-12 col-md-6 col-lg-4\">\n                        <div class=\"form-group\">\n                          <label>From</label>\n                          <input type=\"text\" class=\"form-control\">\n                        </div> \n                      </div>\n                      <div class=\"col-12 col-md-6 col-lg-4\">\n                        <div class=\"form-group\">\n                          <label>To</label>\n                          <input type=\"text\" class=\"form-control\">\n                        </div> \n                      </div>\n                      <div class=\"col-12 col-md-6 col-lg-4\">\n                        <div class=\"form-group\">\n                          <label>Designation</label>\n                          <input type=\"text\" class=\"form-control\">\n                        </div> \n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"add-more\">\n                <a href=\"javascript:void(0);\" class=\"add-experience\"><i class=\"fa fa-plus-circle\"></i> Add More</a>\n              </div>\n            </div>\n          </div>\n          <!-- /Experience -->\n          \n          <!-- Awards -->\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <h4 class=\"card-title\">Awards</h4>\n              <div class=\"awards-info\">\n                <div class=\"row form-row awards-cont\">\n                  <div class=\"col-12 col-md-5\">\n                    <div class=\"form-group\">\n                      <label>Awards</label>\n                      <input type=\"text\" class=\"form-control\">\n                    </div> \n                  </div>\n                  <div class=\"col-12 col-md-5\">\n                    <div class=\"form-group\">\n                      <label>Year</label>\n                      <input type=\"text\" class=\"form-control\">\n                    </div> \n                  </div>\n                </div>\n              </div>\n              <div class=\"add-more\">\n                <a href=\"javascript:void(0);\" class=\"add-award\"><i class=\"fa fa-plus-circle\"></i> Add More</a>\n              </div>\n            </div>\n          </div>\n          <!-- /Awards -->\n          \n          <!-- Memberships -->\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <h4 class=\"card-title\">Memberships</h4>\n              <div class=\"membership-info\">\n                <div class=\"row form-row membership-cont\">\n                  <div class=\"col-12 col-md-10 col-lg-5\">\n                    <div class=\"form-group\">\n                      <label>Memberships</label>\n                      <input type=\"text\" class=\"form-control\">\n                    </div> \n                  </div>\n                </div>\n              </div>\n              <div class=\"add-more\">\n                <a href=\"javascript:void(0);\" class=\"add-membership\"><i class=\"fa fa-plus-circle\"></i> Add More</a>\n              </div>\n            </div>\n          </div>\n          <!-- /Memberships -->\n          \n          <!-- Registrations -->\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <h4 class=\"card-title\">Registrations</h4>\n              <div class=\"registrations-info\">\n                <div class=\"row form-row reg-cont\">\n                  <div class=\"col-12 col-md-5\">\n                    <div class=\"form-group\">\n                      <label>Registrations</label>\n                      <input type=\"text\" class=\"form-control\">\n                    </div> \n                  </div>\n                  <div class=\"col-12 col-md-5\">\n                    <div class=\"form-group\">\n                      <label>Year</label>\n                      <input type=\"text\" class=\"form-control\">\n                    </div> \n                  </div>\n                </div>\n              </div>\n              <div class=\"add-more\">\n                <a href=\"javascript:void(0);\" class=\"add-reg\"><i class=\"fa fa-plus-circle\"></i> Add More</a>\n              </div>\n            </div>\n          </div>\n          <!-- /Registrations -->\n          \n          <div class=\"submit-section submit-btn-bottom\">\n            <button type=\"submit\" class=\"btn btn-primary submit-btn\">Save Changes</button>\n          </div>\n          \n        </div>\n      </div>\n\n    </div>\n\n  </div>\t\t\n  <!-- /Page Content -->","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-reviews',\n  templateUrl: './reviews.component.html'\n})\nexport class ReviewsComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<app-main-breadcrumb [title]='\"Reviews\"'></app-main-breadcrumb>\r\n\r\n<!-- Page Content -->\r\n<div class=\"content\">\r\n  <div class=\"container-fluid\">\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-md-5 col-lg-4 col-xl-3 theiaStickySidebar\">\r\n      <app-doctor-sidebar></app-doctor-sidebar>\r\n      </div>\r\n\r\n      <div class=\"col-md-7 col-lg-8 col-xl-9\">\r\n        <div class=\"doc-review review-listing\">\r\n        \r\n          <!-- Review Listing -->\r\n          <ul class=\"comments-list\">\r\n          \r\n            <!-- Comment List -->\r\n            <li>\r\n              <div class=\"comment\">\r\n                <img class=\"avatar rounded-circle\" alt=\"User Image\" src=\"assets/img/patients/patient.jpg\">\r\n                <div class=\"comment-body\">\r\n                  <div class=\"meta-data\">\r\n                    <span class=\"comment-author\">Richard Wilson</span>\r\n                    <span class=\"comment-date\">Reviewed 2 Days ago</span>\r\n                    <div class=\"review-count rating\">\r\n                      <i class=\"fas fa-star filled\"></i>\r\n                      <i class=\"fas fa-star filled\"></i>\r\n                      <i class=\"fas fa-star filled\"></i>\r\n                      <i class=\"fas fa-star filled\"></i>\r\n                      <i class=\"fas fa-star\"></i>\r\n                    </div>\r\n                  </div>\r\n                  <p class=\"recommended\"><i class=\"far fa-thumbs-up\"></i> I recommend the doctor</p>\r\n                  <p class=\"comment-content\">\r\n                    Lorem ipsum dolor sit amet, consectetur adipisicing elit,\r\n                    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\r\n                    Ut enim ad minim veniam, quis nostrud exercitation.\r\n                    Curabitur non nulla sit amet nisl tempus\r\n                  </p>\r\n                  <div class=\"comment-reply\">\r\n                    <a class=\"comment-btn\" href=\"#\">\r\n                      <i class=\"fas fa-reply\"></i> Reply\r\n                    </a>\r\n                     <p class=\"recommend-btn\">\r\n                    <span>Recommend?</span>\r\n                    <a href=\"#\" class=\"like-btn\">\r\n                      <i class=\"far fa-thumbs-up\"></i> Yes\r\n                    </a>\r\n                    <a href=\"#\" class=\"dislike-btn\">\r\n                      <i class=\"far fa-thumbs-down\"></i> No\r\n                    </a>\r\n                  </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <!-- Comment Reply -->\r\n              <ul class=\"comments-reply\">\r\n              \r\n                <!-- Comment Reply List -->\r\n                <li>\r\n                  <div class=\"comment\">\r\n                    <img class=\"avatar rounded-circle\" alt=\"User Image\" src=\"assets/img/doctors/doctor-thumb-02.jpg\">\r\n                    <div class=\"comment-body\">\r\n                      <div class=\"meta-data\">\r\n                        <span class=\"comment-author\">Dr. Darren Elder</span>\r\n                        <span class=\"comment-date\">Reviewed 3 Days ago</span>\r\n                      </div>\r\n                      <p class=\"comment-content\">\r\n                        Lorem ipsum dolor sit amet, consectetur adipisicing elit,\r\n                        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\r\n                        Ut enim ad minim veniam.\r\n                        Curabitur non nulla sit amet nisl tempus\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </li>\r\n                <!-- /Comment Reply List -->\r\n                \r\n              </ul>\r\n              <!-- /Comment Reply -->\r\n              \r\n            </li>\r\n            <!-- /Comment List -->\r\n            \r\n            <!-- Comment List -->\r\n            <li>\r\n              <div class=\"comment\">\r\n                <img class=\"avatar rounded-circle\" alt=\"User Image\" src=\"assets/img/patients/patient2.jpg\">\r\n                <div class=\"comment-body\">\r\n                  <div class=\"meta-data\">\r\n                    <span class=\"comment-author\">Travis Trimble</span>\r\n                    <span class=\"comment-date\">Reviewed 4 Days ago</span>\r\n                    <div class=\"review-count rating\">\r\n                      <i class=\"fas fa-star filled\"></i>\r\n                      <i class=\"fas fa-star filled\"></i>\r\n                      <i class=\"fas fa-star filled\"></i>\r\n                      <i class=\"fas fa-star filled\"></i>\r\n                      <i class=\"fas fa-star filled\"></i>\r\n                    </div>\r\n                  </div>\r\n                  <p class=\"comment-content\">\r\n                    Lorem ipsum dolor sit amet, consectetur adipisicing elit,\r\n                    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\r\n                    Ut enim ad minim veniam, quis nostrud exercitation.\r\n                    Curabitur non nulla sit amet nisl tempus\r\n                  </p>\r\n                  <div class=\"comment-reply\">\r\n                    <a class=\"comment-btn\" href=\"#\">\r\n                      <i class=\"fas fa-reply\"></i> Reply\r\n                    </a>\r\n                    <p class=\"recommend-btn\">\r\n                      <span>Recommend?</span>\r\n                      <a href=\"#\" class=\"like-btn\">\r\n                        <i class=\"far fa-thumbs-up\"></i> Yes\r\n                      </a>\r\n                      <a href=\"#\" class=\"dislike-btn\">\r\n                        <i class=\"far fa-thumbs-down\"></i> No\r\n                      </a>\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </li>\r\n            <!-- /Comment List -->\r\n            \r\n          </ul>\r\n          <!-- /Comment List -->\r\n          \r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\t\t\r\n<!-- /Page Content -->","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthDoctorGuard } from 'src/app/shared/guards/auth-doctor.guard';\r\nimport { AppointmentsComponent } from './appointments/appointments.component';\r\nimport { ChangePasswordComponent } from './change-password/change-password.component';\r\nimport { DashboardComponent } from './dashboard/dashboard.component';\r\nimport { DoctorBlogComponent } from './doctor-blog/doctor-blog.component';\r\nimport { DoctorComponent } from './doctor.component';\r\nimport { InvoicesComponent } from './invoices/invoices.component';\r\nimport { MessagesComponent } from './messages/messages.component';\r\nimport { MyPatientsComponent } from './my-patients/my-patients.component';\r\nimport { PatientProfileComponent } from './patient-profile/patient-profile.component';\r\nimport { ProfileSettingsComponent } from './profile-settings/profile-settings.component';\r\nimport { ReviewsComponent } from './reviews/reviews.component';\r\nimport { ScheduleTimingsComponent } from './schedule-timings/schedule-timings.component';\r\nimport { SocialMediaComponent } from './social-media/social-media.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DoctorComponent,\r\n    runGuardsAndResolvers: 'always',\r\n    canActivate: [AuthDoctorGuard],\r\n    children: [\r\n      { path: 'dashboard', component: DashboardComponent },\r\n      { path: 'appointments', component: AppointmentsComponent },\r\n      { path: 'my-patients', component: MyPatientsComponent },\r\n      { path: 'patient-profile/:slug', component: PatientProfileComponent },\r\n      { path: 'schedule-timings', component: ScheduleTimingsComponent },\r\n      { path: 'invoices', component: InvoicesComponent },\r\n      { path: 'reviews', component: ReviewsComponent },\r\n      { path: 'message', component: MessagesComponent },\r\n      { path: 'profile-settings', component: ProfileSettingsComponent },\r\n      { path: 'social-media', component: SocialMediaComponent },\r\n      { path: 'change-password', component: ChangePasswordComponent },\r\n      { path: 'doctor-blog', component: DoctorBlogComponent },\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class DoctorRoutingModule { }\r\n","import {\r\n  Component,\r\n  ElementRef,\r\n  OnInit,\r\n  QueryList,\r\n  ViewChildren,\r\n} from '@angular/core';\r\nimport { ConfirmService } from 'src/app/shared/services/confirm.service';\r\nimport { ModalServicesService } from 'src/app/shared/services/modal-services.service';\r\nimport { ToastrService } from 'src/app/shared/services/toastr.service';\r\n\r\n@Component({\r\n  selector: 'app-schedule-timings',\r\n  templateUrl: './schedule-timings.component.html',\r\n})\r\nexport class ScheduleTimingsComponent implements OnInit {\r\n  @ViewChildren('nav_link') navLinks!: QueryList<ElementRef>;\r\n  @ViewChildren('tab') tabs!: QueryList<ElementRef>;\r\n\r\n  constructor(\r\n    private modalService: ModalServicesService,\r\n    private confirm: ConfirmService,\r\n    private toastr: ToastrService,\r\n  ) {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  public switchTab(event: Event) {\r\n    event.preventDefault();\r\n\r\n    const target = event.target as HTMLElement;\r\n    const href = target.getAttribute('href')?.replace('#', '');\r\n    const navLink: ElementRef[] = this.navLinks.toArray();\r\n    const tab: ElementRef[] = this.tabs.toArray();\r\n\r\n    tab.forEach((x) => {\r\n      x.nativeElement.className = 'tab-pane fade';\r\n      if (x.nativeElement.getAttribute('id') === href) {\r\n        x.nativeElement.className = 'tab-pane fade show active';\r\n      }\r\n    });\r\n\r\n    navLink.forEach((x) => (x.nativeElement.className = 'nav-link'));\r\n\r\n    target.classList.add('active');\r\n  }\r\n\r\n  public openTimeSlotCreateUpdate() {\r\n    this.modalService.timeSlot();\r\n  }\r\n\r\n  public removeExistingTimeSlot() {\r\n    this.confirm\r\n      .confirm('Remove time slot', 'Do you want to remove?')\r\n      .forEach((result) => {\r\n        if (result) {\r\n          this.toastr.success('Selected time slot successfully removed!', 'Success');\r\n        }\r\n      });\r\n  }\r\n}\r\n","<app-main-breadcrumb [title]='\"Schedule Timings\"'></app-main-breadcrumb>\r\n\r\n<!-- Page Content -->\r\n<div class=\"content\">\r\n  <div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-5 col-lg-4 col-xl-3 theiaStickySidebar\">\r\n        <app-doctor-sidebar></app-doctor-sidebar>\r\n      </div>\r\n      <div class=\"col-md-7 col-lg-8 col-xl-9\">\r\n        <div class=\"row\">\r\n          <div class=\"col-sm-12\">\r\n            <div class=\"card\">\r\n              <div class=\"card-body\">\r\n                <h4 class=\"card-title\">Schedule Timings</h4>\r\n                <div class=\"profile-box\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-lg-4\">\r\n                      <div class=\"form-group\">\r\n                        <label>Timing Slot Duration</label>\r\n                        <select class=\"select form-control\">\r\n                          <option>-</option>\r\n                          <option>15 mins</option>\r\n                          <option selected=\"selected\">30 mins</option>\r\n                          <option>45 mins</option>\r\n                          <option>1 Hour</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col-md-12\">\r\n                      <div class=\"card schedule-widget mb-0\">\r\n                        <!-- Schedule Header -->\r\n                        <div class=\"schedule-header\">\r\n                          <!-- Schedule Nav -->\r\n                          <div class=\"schedule-nav\">\r\n                            <ul class=\"nav nav-tabs nav-justified\">\r\n                              <li class=\"nav-item\">\r\n                                <a (click)=\"switchTab($event)\" #nav_link class=\"nav-link\" href=\"#slot_sunday\">Sunday</a>\r\n                              </li>\r\n                              <li class=\"nav-item\">\r\n                                <a (click)=\"switchTab($event)\" #nav_link class=\"nav-link active\"\r\n                                  href=\"#slot_monday\">Monday</a>\r\n                              </li>\r\n                              <li class=\"nav-item\">\r\n                                <a (click)=\"switchTab($event)\" #nav_link class=\"nav-link\"\r\n                                  href=\"#slot_tuesday\">Tuesday</a>\r\n                              </li>\r\n                              <li class=\"nav-item\">\r\n                                <a (click)=\"switchTab($event)\" #nav_link class=\"nav-link\"\r\n                                  href=\"#slot_wednesday\">Wednesday</a>\r\n                              </li>\r\n                              <li class=\"nav-item\">\r\n                                <a (click)=\"switchTab($event)\" #nav_link class=\"nav-link\"\r\n                                  href=\"#slot_thursday\">Thursday</a>\r\n                              </li>\r\n                              <li class=\"nav-item\">\r\n                                <a (click)=\"switchTab($event)\" #nav_link class=\"nav-link\" href=\"#slot_friday\">Friday</a>\r\n                              </li>\r\n                              <li class=\"nav-item\">\r\n                                <a (click)=\"switchTab($event)\" #nav_link class=\"nav-link\"\r\n                                  href=\"#slot_saturday\">Saturday</a>\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                          <!-- /Schedule Nav -->\r\n                        </div>\r\n                        <!-- /Schedule Header -->\r\n\r\n                        <!-- Schedule Content -->\r\n                        <div class=\"tab-content schedule-cont\">\r\n                          <!-- Sunday Slot -->\r\n                          <div #tab id=\"slot_sunday\" class=\"tab-pane fade\">\r\n                            <h4 class=\"card-title d-flex justify-content-between\">\r\n                              <span>Time Slots</span>\r\n                              <a (click)=\"openTimeSlotCreateUpdate()\" class=\"edit-link\" href=\"javascript:void(0);\"><i\r\n                                  class=\"fa fa-plus-circle\"></i> Add Slot</a>\r\n                            </h4>\r\n                            <p class=\"text-muted mb-0\">Not Available</p>\r\n                          </div>\r\n                          <!-- /Sunday Slot -->\r\n\r\n                          <!-- Monday Slot -->\r\n                          <div #tab id=\"slot_monday\" class=\"tab-pane fade show active\">\r\n                            <h4 class=\"card-title d-flex justify-content-between\">\r\n                              <span>Time Slots</span>\r\n                              <a (click)=\"openTimeSlotCreateUpdate()\" class=\"edit-link\" href=\"javascript:void(0);\"><i\r\n                                  class=\"fa fa-edit mr-1\"></i>Edit</a>\r\n                            </h4>\r\n\r\n                            <!-- Slot List -->\r\n                            <div class=\"doc-times\">\r\n                              <div class=\"doc-slot-list\">\r\n                                8:00 pm - 11:30 pm\r\n                                <a (click)=\"removeExistingTimeSlot()\" href=\"javascript:void(0)\" class=\"delete_schedule\">\r\n                                  <i class=\"fa fa-times\"></i>\r\n                                </a>\r\n                              </div>\r\n                              <div class=\"doc-slot-list\">\r\n                                11:30 pm - 1:30 pm\r\n                                <a (click)=\"removeExistingTimeSlot()\" href=\"javascript:void(0)\" class=\"delete_schedule\">\r\n                                  <i class=\"fa fa-times\"></i>\r\n                                </a>\r\n                              </div>\r\n                              <div class=\"doc-slot-list\">\r\n                                3:00 pm - 5:00 pm\r\n                                <a (click)=\"removeExistingTimeSlot()\" href=\"javascript:void(0)\" class=\"delete_schedule\">\r\n                                  <i class=\"fa fa-times\"></i>\r\n                                </a>\r\n                              </div>\r\n                              <div class=\"doc-slot-list\">\r\n                                6:00 pm - 11:00 pm\r\n                                <a (click)=\"removeExistingTimeSlot()\" href=\"javascript:void(0)\" class=\"delete_schedule\">\r\n                                  <i class=\"fa fa-times\"></i>\r\n                                </a>\r\n                              </div>\r\n                            </div>\r\n                            <!-- /Slot List -->\r\n\r\n                          </div>\r\n                          <!-- /Monday Slot -->\r\n\r\n                          <!-- Tuesday Slot -->\r\n                          <div #tab id=\"slot_tuesday\" class=\"tab-pane fade\">\r\n                            <h4 class=\"card-title d-flex justify-content-between\">\r\n                              <span>Time Slots</span>\r\n                              <a (click)=\"openTimeSlotCreateUpdate()\" class=\"edit-link\" href=\"javascript:void(0);\"><i\r\n                                  class=\"fa fa-plus-circle\"></i> Add Slot</a>\r\n                            </h4>\r\n                            <p class=\"text-muted mb-0\">Not Available</p>\r\n                          </div>\r\n                          <!-- /Tuesday Slot -->\r\n\r\n                          <!-- Wednesday Slot -->\r\n                          <div #tab id=\"slot_wednesday\" class=\"tab-pane fade\">\r\n                            <h4 class=\"card-title d-flex justify-content-between\">\r\n                              <span>Time Slots</span>\r\n                              <a (click)=\"openTimeSlotCreateUpdate()\" class=\"edit-link\" href=\"javascript:void(0);\"><i\r\n                                  class=\"fa fa-plus-circle\"></i> Add Slot</a>\r\n                            </h4>\r\n                            <p class=\"text-muted mb-0\">Not Available</p>\r\n                          </div>\r\n                          <!-- /Wednesday Slot -->\r\n\r\n                          <!-- Thursday Slot -->\r\n                          <div #tab id=\"slot_thursday\" class=\"tab-pane fade\">\r\n                            <h4 class=\"card-title d-flex justify-content-between\">\r\n                              <span>Time Slots</span>\r\n                              <a (click)=\"openTimeSlotCreateUpdate()\" class=\"edit-link\" href=\"javascript:void(0)\"><i\r\n                                  class=\"fa fa-plus-circle\"></i> Add Slot</a>\r\n                            </h4>\r\n                            <p class=\"text-muted mb-0\">Not Available</p>\r\n                          </div>\r\n                          <!-- /Thursday Slot -->\r\n\r\n                          <!-- Friday Slot -->\r\n                          <div #tab id=\"slot_friday\" class=\"tab-pane fade\">\r\n                            <h4 class=\"card-title d-flex justify-content-between\">\r\n                              <span>Time Slots</span>\r\n                              <a (click)=\"openTimeSlotCreateUpdate()\" class=\"edit-link\" href=\"javascript:void(0)\"><i\r\n                                  class=\"fa fa-plus-circle\"></i> Add Slot</a>\r\n                            </h4>\r\n                            <p class=\"text-muted mb-0\">Not Available</p>\r\n                          </div>\r\n                          <!-- /Friday Slot -->\r\n\r\n                          <!-- Saturday Slot -->\r\n                          <div #tab id=\"slot_saturday\" class=\"tab-pane fade\">\r\n                            <h4 class=\"card-title d-flex justify-content-between\">\r\n                              <span>Time Slots</span>\r\n                              <a (click)=\"openTimeSlotCreateUpdate()\" class=\"edit-link\" href=\"javascript:void(0);\"><i\r\n                                  class=\"fa fa-plus-circle\"></i> Add Slot</a>\r\n                            </h4>\r\n                            <p class=\"text-muted mb-0\">Not Available</p>\r\n                          </div>\r\n                          <!-- /Saturday Slot -->\r\n                        </div>\r\n                        <!-- /Schedule Content -->\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- /Page Content -->","import { Component, OnInit } from '@angular/core';\r\nimport {\r\n  FormBuilder,\r\n  FormControl,\r\n  FormGroup,\r\n  Validators,\r\n} from '@angular/forms';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { DoctorService } from 'src/app/shared/services/doctor.service';\r\nimport { ToastrService } from 'src/app/shared/services/toastr.service';\r\n\r\n@Component({\r\n  selector: 'app-social-media',\r\n  templateUrl: './social-media.component.html',\r\n})\r\nexport class SocialMediaComponent implements OnInit {\r\n  public fg: FormGroup = new FormGroup({});\r\n\r\n  constructor(\r\n    private title: Title,\r\n    private fb: FormBuilder,\r\n    private toastr: ToastrService,\r\n    private doctorService: DoctorService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.getUrls();\r\n    this.title.setTitle('Doccure | Doctor Social Medial Url');\r\n    this.intitializeForm();\r\n  }\r\n\r\n  private getUrls() {\r\n    this.doctorService.getDoctorSocialMediaUrl().forEach((response) => {\r\n      this.fg.controls.facebookURL.setValue(response.facebookURL);\r\n      this.fg.controls.twitterURL.setValue(response.twitterURL);\r\n      this.fg.controls.instagramURL.setValue(response.instagramURL);\r\n      this.fg.controls.pinterestURL.setValue(response.pinterestURL);\r\n      this.fg.controls.linkedinURL.setValue(response.linkedinURL);\r\n    });\r\n  }\r\n\r\n  private intitializeForm() {\r\n    this.fg = this.fb.group({\r\n      facebookURL: new FormControl('', Validators.required),\r\n      twitterURL: new FormControl('', Validators.required),\r\n      instagramURL: new FormControl('', Validators.required),\r\n      pinterestURL: new FormControl('', Validators.required),\r\n      linkedinURL: new FormControl('', Validators.required),\r\n    });\r\n  }\r\n\r\n  public updateUrls() {\r\n    this.doctorService\r\n      .updateDoctorSocialMediaUrl(this.fg.value)\r\n      .forEach((response) => this.toastr.success(response.message, 'Success'));\r\n  }\r\n}\r\n","<app-main-breadcrumb [title]='\"Social Media\"'></app-main-breadcrumb>\r\n\r\n<!-- Page Content -->\r\n<div class=\"content\">\r\n  <div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-5 col-lg-4 col-xl-3 theiaStickySidebar\">\r\n        <app-doctor-sidebar></app-doctor-sidebar>\r\n      </div>\r\n      <div class=\"col-md-7 col-lg-8 col-xl-9\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <!-- Social Form -->\r\n            <form [formGroup]=\"fg\" (ngSubmit)=\"fg.valid && updateUrls()\" autocomplete=\"off\">\r\n              <div class=\"row\">\r\n                <div class=\"col-md-12 col-lg-8\">\r\n                  <app-input-text [type]='\"text\"' [label]='\"Facebook\"' [formControlName]='\"facebookURL\"'\r\n                    [value]=\"fg.value.facebookURL\"></app-input-text>\r\n                </div>\r\n              </div>\r\n              <div class=\"row\">\r\n                <div class=\"col-md-12 col-lg-8\">\r\n                  <app-input-text [type]='\"text\"' [label]='\"Twitter\"' [formControlName]='\"twitterURL\"' [value]=\"fg.value.twitterURL\"></app-input-text>\r\n                </div>\r\n              </div>\r\n              <div class=\"row\">\r\n                <div class=\"col-md-12 col-lg-8\">\r\n                  <app-input-text [type]='\"text\"' [label]='\"Instagram\"' [formControlName]='\"instagramURL\"' [value]=\"fg.value.instagramURL\">\r\n                  </app-input-text>\r\n                </div>\r\n              </div>\r\n              <div class=\"row\">\r\n                <div class=\"col-md-12 col-lg-8\">\r\n                  <app-input-text [type]='\"text\"' [label]='\"Pinterest\"' [formControlName]='\"pinterestURL\"' [value]=\"fg.value.pinterestURL\">\r\n                  </app-input-text>\r\n                </div>\r\n              </div>\r\n              <div class=\"row\">\r\n                <div class=\"col-md-12 col-lg-8\">\r\n                  <app-input-text [type]='\"text\"' [label]='\"Linkedin\"' [formControlName]='\"linkedinURL\"' [value]=\"fg.value.linkedinURL\">\r\n                  </app-input-text>\r\n                </div>\r\n              </div>\r\n              <div class=\"submit-section\">\r\n                <button [disabled]=\"!fg.valid\" type=\"submit\" class=\"btn btn-primary submit-btn\">Save Changes</button>\r\n              </div>\r\n            </form>\r\n            <!-- /Social Form -->\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- /Page Content -->","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { DoctorRoutingModule } from './doctor-routing.module';\r\nimport { DoctorComponent } from './doctor.component';\r\nimport { DashboardComponent } from './dashboard/dashboard.component';\r\nimport { AppointmentsComponent } from './appointments/appointments.component';\r\nimport { MyPatientsComponent } from './my-patients/my-patients.component';\r\nimport { ScheduleTimingsComponent } from './schedule-timings/schedule-timings.component';\r\nimport { InvoicesComponent } from './invoices/invoices.component';\r\nimport { ReviewsComponent } from './reviews/reviews.component';\r\nimport { MessagesComponent } from './messages/messages.component';\r\nimport { ProfileSettingsComponent } from './profile-settings/profile-settings.component';\r\nimport { SocialMediaComponent } from './social-media/social-media.component';\r\nimport { ChangePasswordComponent } from './change-password/change-password.component';\r\nimport { PatientProfileComponent } from './patient-profile/patient-profile.component';\r\nimport { DoctorBlogComponent } from './doctor-blog/doctor-blog.component';\r\nimport { ComponentsHelperModule } from 'src/app/shared/components/components-helper.module';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    DoctorComponent,\r\n    DashboardComponent,\r\n    AppointmentsComponent,\r\n    MyPatientsComponent,\r\n    ScheduleTimingsComponent,\r\n    InvoicesComponent,\r\n    ReviewsComponent,\r\n    MessagesComponent,\r\n    ProfileSettingsComponent,\r\n    SocialMediaComponent,\r\n    ChangePasswordComponent,\r\n    PatientProfileComponent,\r\n    DoctorBlogComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    DoctorRoutingModule,\r\n    ComponentsHelperModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n  ],\r\n})\r\nexport class DoctorModule {}\r\n"],"sourceRoot":"webpack:///"}